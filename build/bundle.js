var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function l(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function d(t){return function(e){return e.preventDefault(),t.call(this,e)}}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function b(t,e,n){t.classList[n?"add":"remove"](e)}let _;function w(t){_=t}function I(){const t=function(){if(!_)throw new Error("Function called outside component initialization");return _}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const T=[],E=[],S=[],C=[],k=Promise.resolve();let N=!1;function A(t){S.push(t)}let P=!1;const R=new Set;function x(){if(!P){P=!0;do{for(let t=0;t<T.length;t+=1){const e=T[t];w(e),D(e.$$)}for(w(null),T.length=0;E.length;)E.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];R.has(e)||(R.add(e),e())}S.length=0}while(T.length);for(;C.length;)C.pop()();N=!1,P=!1,R.clear()}}function D(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const O=new Set;let L;function M(t,e){t&&t.i&&(O.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(O.has(t))return;O.add(t),L.c.push((()=>{O.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function U(t){t&&t.c()}function j(t,n,o,a){const{fragment:s,on_mount:u,on_destroy:c,after_update:l}=t.$$;s&&s.m(n,o),a||A((()=>{const n=u.map(e).filter(i);c?c.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(A)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(T.push(t),N||(N=!0,k.then(x)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,i,o,a,s,c,l,h=[-1]){const f=_;w(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:i.target||f.$$.root};l&&l(p.root);let d=!1;if(p.ctx=o?o(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),d&&V(e,t)),n})):[],p.update(),d=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();i.intro&&M(e.$$.fragment),j(e,i.target,i.anchor,i.customElement),x()}w(f)}class K{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function W(t,e,n){const r=t.slice();return r[12]=e[n],r}function H(t){let e,n,r,i,o,c,d,g,y,b=t[12].id+"",_=t[12].name+"";function w(){return t[7](t[12])}return{c(){e=l("li"),n=h(b),r=h(":\n          "),i=h(_),o=f(),c=l("button"),c.textContent="Delete",d=f(),v(c,"class","remove-button svelte-js15mc"),v(e,"class","list-item svelte-js15mc")},m(t,u){s(t,e,u),a(e,n),a(e,r),a(e,i),a(e,o),a(e,c),a(e,d),g||(y=p(c,"click",w),g=!0)},p(e,r){t=e,1&r&&b!==(b=t[12].id+"")&&m(n,b),1&r&&_!==(_=t[12].name+"")&&m(i,_)},d(t){t&&u(e),g=!1,y()}}}function z(e){let n,r,i;return{c(){n=l("button"),n.textContent="Next"},m(t,o){s(t,n,o),r||(i=p(n,"click",e[5]),r=!0)},p:t,d(t){t&&u(n),r=!1,i()}}}function G(e){let n,i,o,g,b,_,w,I,T,E,S,C,k,N,A,P,R,x,D,O,L,M,F,U,j,q,V,B,K=e[1].name+"",G=e[0],$=[];for(let t=0;t<G.length;t+=1)$[t]=H(W(e,G,t));let Q=e[0].length>1&&z(e);return{c(){n=l("div"),i=l("div"),o=l("p"),o.innerHTML="Please enter the names of the persons you dined with below. Once you have\n      entered more than 2 diners, please click <strong>&quot;Next&quot;</strong>",g=f(),b=l("h2"),b.textContent="People",_=f(),w=l("ul");for(let t=0;t<$.length;t+=1)$[t].c();I=f(),T=l("div"),E=l("form"),S=l("input"),C=f(),k=l("div"),N=h(K),A=f(),P=l("br"),R=f(),x=l("button"),x.textContent="Add",D=f(),O=l("br"),L=f(),Q&&Q.c(),M=f(),F=l("div"),U=l("p"),U.innerHTML="If you&#39;re returning for a past session, click the <strong>&quot;Search Past Session&quot;</strong> button below.",j=f(),q=l("button"),q.textContent="Search Past Session",v(b,"class","heading svelte-js15mc"),v(w,"class","people-list"),v(i,"class","show-people svelte-js15mc"),v(S,"type","text"),v(S,"placeholder","add person"),v(k,"class","error svelte-js15mc"),v(P,"class","break"),v(O,"class","break"),v(T,"class","add-person"),v(F,"class","return svelte-js15mc"),v(n,"class","add-people-container svelte-js15mc")},m(t,r){s(t,n,r),a(n,i),a(i,o),a(i,g),a(i,b),a(i,_),a(i,w);for(let t=0;t<$.length;t+=1)$[t].m(w,null);a(n,I),a(n,T),a(T,E),a(E,S),y(S,e[2]),a(E,C),a(E,k),a(k,N),a(E,A),a(E,P),a(E,R),a(E,x),a(T,D),a(T,O),a(T,L),Q&&Q.m(T,null),a(n,M),a(n,F),a(F,U),a(F,j),a(F,q),V||(B=[p(S,"input",e[8]),p(E,"submit",d(e[3])),p(q,"click",e[6])],V=!0)},p(t,[e]){if(17&e){let n;for(G=t[0],n=0;n<G.length;n+=1){const r=W(t,G,n);$[n]?$[n].p(r,e):($[n]=H(r),$[n].c(),$[n].m(w,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=G.length}4&e&&S.value!==t[2]&&y(S,t[2]),2&e&&K!==(K=t[1].name+"")&&m(N,K),t[0].length>1?Q?Q.p(t,e):(Q=z(t),Q.c(),Q.m(T,null)):Q&&(Q.d(1),Q=null)},i:t,o:t,d(t){t&&u(n),c($,t),Q&&Q.d(),V=!1,r(B)}}}function $(t,e,n){let r;const i=I();let o=[],a={name:""},s="",u=!1;const c=t=>{n(0,o=o.filter((e=>e.id!=t))),o.forEach((e=>{e.id>t&&e.id--}))};return t.$$.update=()=>{1&t.$$.dirty&&(r=o.length+1)},[o,a,s,()=>{u=!0,s.length<1?(u=!1,n(1,a.name="Name cannot be empty",a)):n(1,a.name="",a),u&&(n(0,o=[...o,{id:r,name:s,total:0,itemsOrdered:[],percentageOfTotal:0,percentageOfSalesTax:0,percentageOfTip:0}]),n(2,s=""))},c,()=>{i("gotPeopleObject",o)},()=>{i("searchPastSessions")},t=>{c(t.id)},function(){s=this.value,n(2,s)}]}class Q extends K{constructor(t){super(),B(this,t,$,G,o,{})}}function Y(t,e,n){const r=t.slice();return r[20]=e[n],r}function X(t,e,n){const r=t.slice();return r[7]=e[n],r}function J(t){let e,n,r,i,o=t[1][0].textResults+"";return{c(){e=l("h3"),e.textContent="Copy and paste info from the text from your receipt!",n=f(),r=l("p"),i=h(o),v(r,"class","returned-text svelte-hf1yg")},m(t,o){s(t,e,o),s(t,n,o),s(t,r,o),a(r,i)},p(t,e){2&e&&o!==(o=t[1][0].textResults+"")&&m(i,o)},d(t){t&&u(e),t&&u(n),t&&u(r)}}}function Z(t){let e,n,r,i,o,c,d,g,y,b,_,w,I,T,E,S,C,k,N,A,P,R,x,D=t[7].quantity+"",O=t[7].itemName+"",L=t[7].itemAmount+"",M=t[7].quantity*t[7].itemAmount+"",F=t[7].peopleWhoAteIDs.join(", ")+"";function U(){return t[11](t[7])}return{c(){e=l("li"),n=l("div"),r=l("p"),i=h("Quantity: "),o=h(D),c=h(" | Name: "),d=h(O),g=h(" | Price: $"),y=h(L),b=h("\n                | Item Total: $"),_=h(M),w=f(),I=l("div"),T=l("p"),E=h(F),S=f(),C=l("div"),k=l("button"),k.textContent="Delete",N=f(),A=l("br"),P=f(),v(k,"class","remove-button svelte-hf1yg"),v(e,"class","list-item svelte-hf1yg")},m(t,u){s(t,e,u),a(e,n),a(n,r),a(r,i),a(r,o),a(r,c),a(r,d),a(r,g),a(r,y),a(r,b),a(r,_),a(e,w),a(e,I),a(I,T),a(T,E),a(e,S),a(e,C),a(C,k),a(e,N),a(e,A),a(e,P),R||(x=p(k,"click",U),R=!0)},p(e,n){t=e,4&n&&D!==(D=t[7].quantity+"")&&m(o,D),4&n&&O!==(O=t[7].itemName+"")&&m(d,O),4&n&&L!==(L=t[7].itemAmount+"")&&m(y,L),4&n&&M!==(M=t[7].quantity*t[7].itemAmount+"")&&m(_,M),4&n&&F!==(F=t[7].peopleWhoAteIDs.join(", ")+"")&&m(E,F)},d(t){t&&u(e),R=!1,x()}}}function tt(t){let e,n,r,i,o,c,d,g,y,b=t[20].name+"";return{c(){e=l("div"),n=l("input"),i=f(),o=h(b),c=l("br"),d=f(),v(n,"type","checkbox"),n.__value=r=[t[20].id,t[20].name],n.value=n.__value,t[16][0].push(n)},m(r,u){s(r,e,u),a(e,n),n.checked=~t[4].indexOf(n.__value),a(e,i),a(e,o),a(e,c),a(e,d),g||(y=p(n,"change",t[15]),g=!0)},p(t,e){1&e&&r!==(r=[t[20].id,t[20].name])&&(n.__value=r,n.value=n.__value),16&e&&(n.checked=~t[4].indexOf(n.__value)),1&e&&b!==(b=t[20].name+"")&&m(o,b)},d(r){r&&u(e),t[16][0].splice(t[16][0].indexOf(n),1),g=!1,y()}}}function et(e){let n,r,i;return{c(){n=l("button"),n.textContent="Next"},m(t,o){s(t,n,o),r||(i=p(n,"click",e[10]),r=!0)},p:t,d(t){t&&u(n),r=!1,i()}}}function nt(e){let n,i,o,b,_,w,I,T,E,S,C,k,N,A,P,R,x,D,O,L,M,F,U,j,q,V,B,K,W,H,z,G,$,Q,nt,rt,it=e[6].name+"",ot=e[6].amount+"",at=e[1][0].textResults.length>1&&J(e),st=e[2],ut=[];for(let t=0;t<st.length;t+=1)ut[t]=Z(X(e,st,t));let ct=e[0],lt=[];for(let t=0;t<ct.length;t+=1)lt[t]=tt(Y(e,ct,t));let ht=e[2].length>1&&et(e);return{c(){n=l("div"),i=l("p"),i.innerHTML="Please enter the items that were ordered as well as the price. Once you have\n    entered more than 2 items, please click <strong>&quot;Next&quot;</strong>",o=f(),b=l("div"),_=l("div"),at&&at.c(),w=f(),I=l("div"),T=l("h2"),T.textContent="Items",E=f(),S=l("ul");for(let t=0;t<ut.length;t+=1)ut[t].c();C=f(),k=l("div"),N=l("form"),A=l("input"),P=f(),R=l("div"),x=h(it),D=f(),O=l("input"),L=f(),M=l("div"),F=h(ot),U=f(),j=l("div"),q=l("input"),V=f(),B=l("div");for(let t=0;t<lt.length;t+=1)lt[t].c();K=f(),W=l("br"),H=f(),z=l("button"),z.textContent="Add",G=f(),$=l("br"),Q=f(),ht&&ht.c(),v(T,"class","heading svelte-hf1yg"),v(S,"class","item-list"),v(b,"class","show-items svelte-hf1yg"),v(A,"type","text"),v(A,"placeholder","add item name"),v(R,"class","error svelte-hf1yg"),v(O,"type","text"),v(O,"placeholder","add price amount"),v(M,"class","error svelte-hf1yg"),v(q,"type","number"),v(q,"placeholder","Quantity"),v(q,"class","quantity svelte-hf1yg"),v(B,"class","name-checkbox"),v(k,"class","add-item"),v(n,"class","add-items-container svelte-hf1yg")},m(t,r){s(t,n,r),a(n,i),a(n,o),a(n,b),a(b,_),at&&at.m(_,null),a(b,w),a(b,I),a(I,T),a(I,E),a(I,S);for(let t=0;t<ut.length;t+=1)ut[t].m(S,null);a(n,C),a(n,k),a(k,N),a(N,A),y(A,e[7]),a(N,P),a(N,R),a(R,x),a(N,D),a(N,O),y(O,e[3]),a(N,L),a(N,M),a(M,F),a(N,U),a(N,j),a(j,q),y(q,e[5]),a(N,V),a(N,B);for(let t=0;t<lt.length;t+=1)lt[t].m(B,null);a(N,K),a(N,W),a(N,H),a(N,z),a(k,G),a(k,$),a(k,Q),ht&&ht.m(k,null),nt||(rt=[p(A,"input",e[12]),p(O,"input",e[13]),p(q,"input",e[14]),p(N,"submit",d(e[9]))],nt=!0)},p(t,[e]){if(t[1][0].textResults.length>1?at?at.p(t,e):(at=J(t),at.c(),at.m(_,null)):at&&(at.d(1),at=null),260&e){let n;for(st=t[2],n=0;n<st.length;n+=1){const r=X(t,st,n);ut[n]?ut[n].p(r,e):(ut[n]=Z(r),ut[n].c(),ut[n].m(S,null))}for(;n<ut.length;n+=1)ut[n].d(1);ut.length=st.length}if(128&e&&A.value!==t[7]&&y(A,t[7]),64&e&&it!==(it=t[6].name+"")&&m(x,it),8&e&&O.value!==t[3]&&y(O,t[3]),64&e&&ot!==(ot=t[6].amount+"")&&m(F,ot),32&e&&g(q.value)!==t[5]&&y(q,t[5]),17&e){let n;for(ct=t[0],n=0;n<ct.length;n+=1){const r=Y(t,ct,n);lt[n]?lt[n].p(r,e):(lt[n]=tt(r),lt[n].c(),lt[n].m(B,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=ct.length}t[2].length>1?ht?ht.p(t,e):(ht=et(t),ht.c(),ht.m(k,null)):ht&&(ht.d(1),ht=null)},i:t,o:t,d(t){t&&u(n),at&&at.d(),c(ut,t),c(lt,t),ht&&ht.d(),nt=!1,r(rt)}}}function rt(t,e,n){let r;const i=I();let o,a="",s=[],u=1,c=[],{people:l}=e,{receiptInfo:h}=e,f=!1,p={name:"",amount:""};const d=t=>{n(2,c=c.filter((e=>e.id!=t))),c.forEach((e=>{e.id>t&&e.id--}))},v=[[]];return t.$$set=t=>{"people"in t&&n(0,l=t.people),"receiptInfo"in t&&n(1,h=t.receiptInfo)},t.$$.update=()=>{4&t.$$.dirty&&(r=c.length+1)},[l,h,c,o,s,u,p,a,d,()=>{f=!0,a.length<1&&(f=!1,n(6,p.name="Name cannot be empty",p)),o<=0?(f=!1,n(6,p.amount="Price must be greater than 0",p)):void 0===o?(f=!1,n(6,p.amount="Please enter an amount",p)):"$"===o[0]?(f=!1,n(6,p.amount='Please remove "$"',p)):(n(6,p.name="",p),n(6,p.amount="",p)),f&&(n(2,c=[...c,{id:r,itemName:a,itemAmount:o,quantity:u,peopleWhoAteIDs:s}]),n(7,a=""),n(3,o=null))},()=>{i("gotItemsArray",c)},t=>{d(t.id)},function(){a=this.value,n(7,a)},function(){o=this.value,n(3,o)},function(){u=g(this.value),n(5,u)},function(){s=function(t,e,n){const r=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&r.add(t[e].__value);return n||r.delete(e),Array.from(r)}(v[0],this.__value,this.checked),n(4,s)},v]}class it extends K{constructor(t){super(),B(this,t,rt,nt,o,{people:0,receiptInfo:1})}}const ot=process.env.FREEOCR_API_KEY,at=process.env.FirebaseAPIKEY;function st(e){let n,r,i;return{c(){n=l("button"),n.textContent="Skip"},m(t,o){s(t,n,o),r||(i=p(n,"click",e[3]),r=!0)},p:t,d(t){t&&u(n),r=!1,i()}}}function ut(e){let n,r,i;return{c(){n=l("button"),n.textContent="Next"},m(t,o){s(t,n,o),r||(i=p(n,"click",e[3]),r=!0)},p:t,d(t){t&&u(n),r=!1,i()}}}function ct(e){let n,i,o,c,d,g,y,b,_,w,I,T,E,S,C,k,N;function A(t,e){return t[1].length>1?ut:st}let P=A(e),R=P(e);return{c(){n=l("div"),i=l("p"),i.textContent='Instructions: Upload and submit a receipt image to retreive the text; once\n    done click "Next". This will be used on the next step. If you\'d rather\n    manually add each item, press "Skip."',o=f(),c=l("br"),d=f(),g=l("label"),g.textContent="Upload a receipt image (max file size 1.024 MB):",y=f(),b=l("input"),_=f(),w=l("button"),w.textContent="Submit",I=f(),T=l("div"),E=l("p"),S=h(e[1]),C=f(),R.c(),v(g,"for","file"),v(b,"accept","image/png, image/jpeg"),v(b,"type","file"),v(E,"class","returned-text svelte-1yh8ugg"),v(n,"class","file-input svelte-1yh8ugg")},m(t,r){s(t,n,r),a(n,i),a(n,o),a(n,c),a(n,d),a(n,g),a(n,y),a(n,b),a(n,_),a(n,w),a(n,I),a(n,T),a(T,E),a(E,S),a(n,C),R.m(n,null),k||(N=[p(b,"change",e[4]),p(w,"click",e[5])],k=!0)},p(t,[e]){2&e&&m(S,t[1]),P===(P=A(t))&&R?R.p(t,e):(R.d(1),R=P(t),R&&(R.c(),R.m(n,null)))},i:t,o:t,d(t){t&&u(n),R.d(),k=!1,r(N)}}}function lt(t,e,n){const r=I();let i=new FormData,o=[],a=[],s=[],u=[];const c=async()=>{o[0].size>1073741.82?alert("File size is too large, please compress or upload a different image!"):(i.append("file",o[0]),i.append("isTable","true"),(async()=>{const t={method:"POST",headers:{apikey:ot},body:i};try{const e=await fetch("https://api.ocr.space/parse/image",t),r=await e.json();a=await r.ParsedResults[0].TextOverlay.Lines,n(1,s=await r.ParsedResults[0].ParsedText),r.ParsedResults}catch(t){return console.log(t),t}})())};return[o,s,c,()=>{u=[...u,{textResults:s,lineItemArray:a,imageFile:o[0]}],r("gotReceiptInfo",u)},function(){o=this.files,n(0,o)},()=>c()]}class ht extends K{constructor(t){super(),B(this,t,lt,ct,o,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var ft=function(t,e){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ft(t,e)};function pt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var dt=function(){return dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dt.apply(this,arguments)};function vt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function gt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var mt=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function yt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _t(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function wt(t){return this instanceof wt?(this.v=t,this):new wt(t)}var It=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var Tt=Object.freeze({__proto__:null,__extends:pt,get __assign(){return dt},__rest:function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},__decorate:function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},__param:function(t,e){return function(n,r){e(n,r,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:vt,__generator:gt,__createBinding:mt,__exportStar:function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||mt(e,t,n)},__values:yt,__read:bt,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bt(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},__spreadArray:_t,__await:wt,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof wt?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:wt(t[r](e)),done:"return"===r}:i?i(e):e}:i}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=yt(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&mt(e,t,n);return It(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},__classPrivateFieldSet:function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}}),Et={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},St=function(t,e){if(!t)throw Ct(e)},Ct=function(t){return new Error("Firebase Database ("+Et.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},kt=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Nt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kt(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},At=function(t){var e=kt(t);return Nt.encodeByteArray(e,!0)},Pt=function(t){return At(t).replace(/\./g,"")},Rt=function(t){try{return Nt.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function xt(t){return Dt(void 0,t)}function Dt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Dt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ot=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lt(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=dt({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pt(JSON.stringify({alg:"none",type:"JWT"})),Pt(JSON.stringify(o)),""].join(".")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ft(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function Ut(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function jt(){return"object"==typeof self&&self.self===self}function qt(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Vt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Bt(){return Mt().indexOf("Electron/")>=0}function Kt(){var t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Wt(){return Mt().indexOf("MSAppHost/")>=0}function Ht(){return!0===Et.NODE_CLIENT||!0===Et.NODE_ADMIN}function zt(){return!Ut()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gt(){return"indexedDB"in self&&null!=indexedDB}function $t(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function Qt(){return!(!navigator||!navigator.cookieEnabled)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Yt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Xt.prototype.create),o}return pt(e,t),e}(Error),Xt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?Jt(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new Yt(i,s,r);return u},t}();function Jt(t,e){return t.replace(Zt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Zt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function te(t){return JSON.parse(t)}function ee(t){return JSON.stringify(t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ne=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=te(Rt(o[0])||""),n=te(Rt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},re=function(t){var e=ne(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},ie=function(t){var e=ne(t).claims;return"object"==typeof e&&!0===e.admin};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function se(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ue(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ce(t){return null!==t&&"object"==typeof t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function le(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var he=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function fe(t,e){var n=new pe(t,e);return n.subscribe.bind(n)}var pe=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=de),void 0===r.error&&(r.error=de),void 0===r.complete&&(r.complete=de);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function de(){}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ve=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ge(t,e){return t+" failed: "+e+" argument "}function me(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ge(t,e)+"must be a valid function.")}function ye(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ge(t,e)+"must be a valid context object.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var be=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,St(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},_e=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},we=144e5;function Ie(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(we,r+i)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Te(t){return t&&t._delegate?t._delegate:t}var Ee=Object.freeze({__proto__:null,CONSTANTS:Et,Deferred:Ot,ErrorFactory:Xt,FirebaseError:Yt,MAX_VALUE_MILLIS:we,RANDOM_FACTOR:.5,Sha1:he,areCookiesEnabled:Qt,assert:St,assertionError:Ct,async:function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},base64:Nt,base64Decode:Rt,base64Encode:At,base64urlEncodeWithoutPadding:Pt,calculateBackoffMillis:Ie,contains:oe,createMockUserToken:Lt,createSubscribe:fe,decode:ne,deepCopy:xt,deepEqual:function t(e,n){if(e===n)return!0;for(var r=Object.keys(e),i=Object.keys(n),o=0,a=r;o<a.length;o++){var s=a[o];if(!i.includes(s))return!1;var u=e[s],c=n[s];if(ce(u)&&ce(c)){if(!t(u,c))return!1}else if(u!==c)return!1}for(var l=0,h=i;l<h.length;l++){s=h[l];if(!r.includes(s))return!1}return!0},deepExtend:Dt,errorPrefix:ge,extractQuerystring:function(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)},getGlobal:function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")},getModularInstance:Te,getUA:Mt,isAdmin:ie,isBrowser:jt,isBrowserExtension:qt,isElectron:Bt,isEmpty:se,isIE:Kt,isIndexedDBAvailable:Gt,isMobileCordova:Ft,isNode:Ut,isNodeSdk:Ht,isReactNative:Vt,isSafari:zt,isUWP:Wt,isValidFormat:re,isValidTimestamp:function(t){var e=ne(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},issuedAtTime:function(t){var e=ne(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},jsonEval:te,map:ue,ordinal:function(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(t):""+t},querystring:le,querystringDecode:function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e},safeGet:ae,stringLength:_e,stringToByteArray:be,stringify:ee,validateArgCount:ve,validateCallback:me,validateContextObject:ye,validateIndexedDBOpenable:$t,validateNamespace:function(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(ge(t,"namespace")+"must be a valid firebase namespace.")}}),Se=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Ce="[DEFAULT]",ke=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ot;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch(t){}try{for(var r=yt(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=bt(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Ce),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(_t(_t([],bt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),bt(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=Ce),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=Ce),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=yt(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=bt(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=yt(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===Ce?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=Ce),this.component?this.component.multipleInstances?t:Ce:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var Ne,Ae=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ke(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}(),Pe=Object.freeze({__proto__:null,Component:Se,ComponentContainer:Ae,Provider:ke});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function Re(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xe,De=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(xe||(xe={}));var Oe={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Le=xe.INFO,Me=((Ne={})[xe.DEBUG]="log",Ne[xe.VERBOSE]="log",Ne[xe.INFO]="info",Ne[xe.WARN]="warn",Ne[xe.ERROR]="error",Ne),Fe=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Me[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Re(["["+i+"]  "+t.name+":"],n))}},Ue=function(){function t(t){this.name=t,this._logLevel=Le,this._logHandler=Fe,this._userLogHandler=null,De.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in xe))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Oe[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Re([this,xe.DEBUG],t)),this._logHandler.apply(this,Re([this,xe.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Re([this,xe.VERBOSE],t)),this._logHandler.apply(this,Re([this,xe.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Re([this,xe.INFO],t)),this._logHandler.apply(this,Re([this,xe.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Re([this,xe.WARN],t)),this._logHandler.apply(this,Re([this,xe.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Re([this,xe.ERROR],t)),this._logHandler.apply(this,Re([this,xe.ERROR],t))},t}();function je(t){De.forEach((function(e){e.setLogLevel(t)}))}function qe(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Oe[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:xe[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=De;r<i.length;r++){n(i[r])}}var Ve,Be,Ke=Object.freeze({__proto__:null,get LogLevel(){return xe},Logger:Ue,setLogLevel:je,setUserLogHandler:qe}),We=((Ve={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ve["bad-app-name"]="Illegal App name: '{$appName}",Ve["duplicate-app"]="Firebase App named '{$appName}' already exists",Ve["app-deleted"]="Firebase App named '{$appName}' already deleted",Ve["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ve["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ve),He=new Xt("app","Firebase",We),ze="@firebase/app",Ge="[DEFAULT]",$e=((Be={})[ze]="fire-core",Be["@firebase/analytics"]="fire-analytics",Be["@firebase/app-check"]="fire-app-check",Be["@firebase/auth"]="fire-auth",Be["@firebase/database"]="fire-rtdb",Be["@firebase/functions"]="fire-fn",Be["@firebase/installations"]="fire-iid",Be["@firebase/messaging"]="fire-fcm",Be["@firebase/performance"]="fire-perf",Be["@firebase/remote-config"]="fire-rc",Be["@firebase/storage"]="fire-gcs",Be["@firebase/firestore"]="fire-fst",Be["fire-js"]="fire-js",Be["firebase-wrapper"]="fire-js-all",Be),Qe=new Ue("@firebase/app"),Ye=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=xt(t),this.container=new Ae(e.name),this._addComponent(new Se("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=Ge),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Ge),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Qe.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw He.create("app-deleted",{appName:this.name_})},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Ye.prototype.name&&Ye.prototype.options||Ye.prototype.delete||console.log("dc");var Xe=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function t(){var e=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=Ge);var a=o.name;if("string"!=typeof a||!a)throw He.create("bad-app-name",{appName:String(a)});if(oe(e,a))throw He.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=$e[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Qe.warn(u.join(" "))}o(new Se(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:je,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw He.create("invalid-log-argument");qe(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!oe(e,t=t||Ge))throw He.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return Qe.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw He.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Dt(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(Ye);return e.INTERNAL=dt(dt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Dt(e,t)},createSubscribe:fe,ErrorFactory:Xt,deepExtend:Dt}),e}(),Je=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if(jt()&&void 0!==self.firebase){Qe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ze=self.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&Qe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var tn=Xe.initializeApp;Xe.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ut()&&Qe.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),tn.apply(void 0,t)};var en=Xe;!function(t,e){t.INTERNAL.registerComponent(new Se("platform-logger",(function(t){return new Je(t)}),"PRIVATE")),t.registerVersion(ze,"0.6.30",e),t.registerVersion("fire-js","")}(en);var nn=Object.freeze({__proto__:null,default:en,firebase:en});(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ra(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function w(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=C+t,this.message=e||k[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new T(e.substring(C.length),t.message,t.serverResponse):null}w(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,C="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function x(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function D(t,e){throw new x("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function O(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=A("__EID__")?"__EID__":void 0,w(R,Error),R.prototype.name="CustomError",w(x,R),x.prototype.name="AssertionError",O.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new O((function(){return new j}),(function(t){t.reset()}));function U(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=q(t,e)}function z(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var st=a.navigator;if(st){var ut=st.userAgent;if(ut){Y=ut;break t}}Y=""}function ct(t){return ot(Y,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ht(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===_t&&e||"",this.b=bt}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,bt={},_t={};function wt(){if(void 0===yt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){a.console&&a.console.error(t.message)}yt=t}else yt=t}return yt}function It(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=mt(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=wt();return new It(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))})))}It.prototype.ta=!0,It.prototype.sa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function Nt(t,e){this.a=e===Lt?t:""}function At(t){return t instanceof Nt&&t.constructor===Nt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t))t=new Nt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new Nt(t,Lt):null}return t}function Ot(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Lt))}var Lt={},Mt=new Nt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Ut?t:""}Ft.prototype.ta=!0,Ft.prototype.sa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof Nt?t:Ot(t),e=e||a,n=n instanceof gt?mt(n):n||"",e.open(At(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=l;var Kt,Wt,Ht=ct("Opera"),zt=ct("Trident")||ct("MSIE"),Gt=ct("Edge"),$t=Gt||zt,Qt=ct("Gecko")&&!(ot(Y.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Yt=ot(Y.toLowerCase(),"webkit")&&!ct("Edge");function Xt(){var t=a.document;return t?t.documentMode:void 0}t:{var Jt="",Zt=(Wt=Y,Qt?/rv:([^\);]+)(\)|;)/.exec(Wt):Gt?/Edge\/([\d\.]+)/.exec(Wt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Yt?/WebKit\/(\S+)/.exec(Wt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(Zt&&(Jt=Zt?Zt[1]:""),zt){var te=Xt();if(null!=te&&te>parseFloat(Jt)){Kt=String(te);break t}}Kt=Jt}var ee,ne={};function re(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=X(String(Kt)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=at(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||at(0==a[2].length,0==s[2].length)||at(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&zt){var ie=Xt();ee=ie||(parseInt(Kt,10)||void 0)}else ee=void 0;var oe=ee;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var ae=!zt||9<=Number(oe);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}V(a?Q(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function de(t){a.setTimeout((function(){throw t}),0)}function ve(t,e){le||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);le=function(){t.then(ye)}}else le=function(){var t=ye;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ct("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(ce||(ce=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),ce(t)):a.setImmediate(t)}}(),ge||(le(),ge=!0),me.add(t,e)}var ge=!1,me=new M;function ye(){for(var t;t=U();){try{t.a.call(t.b)}catch(t){de(t)}L(F,t)}ge=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){De(n,we,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}De(n,Ie,t)}))}catch(t){De(this,Ie,t)}}var _e=0,we=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new O((function(){return new Te}),(function(t){t.reset()}));function Se(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof be)return t;var e=new be(l);return De(e,we,t),e}function ke(t){return new be((function(e,n){n(t)}))}function Ne(t,e,n){Oe(t,e,n,null)||ve(_(e,t))}function Ae(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ne(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_e&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Fe(n,i,Ie,e)))}t.c=null}else De(t,Ie,e)}function Re(t,e){t.b||t.a!=we&&t.a!=Ie||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Se(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Re(t,i),i.a}function De(t,e,n){t.a==_e&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Oe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ie||n instanceof qe||function(t,e){t.g=!0,ve((function(){t.g&&je.call(null,e)}))}(t,n)))}function Oe(t,e,n,r){if(t instanceof be)return Re(t,Se(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Le(t){t.h||(t.h=!0,ve(t.gc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(t){je.call(null,t)}L(Ee,e)}function Ue(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return xe(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new qe(t);ve((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=_e,De(this,we,t)},t.ad=function(t){this.a=_e,De(this,Ie,t)},t.gc=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var je=de;function qe(t){R.call(this,t)}function Ve(){this.ya=this.ya,this.pa=this.pa}w(qe,R),qe.prototype.name="cancel";var Be={};function Ke(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t);delete Be[e]}}Ve.prototype.ya=!1,Ve.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},He=!zt||9<=Number(oe),ze=zt&&!re("9"),Ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Qe(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Qe,$e);var Ye=We({2:"touch",3:"pen",4:"mouse"});Qe.prototype.preventDefault=function(){Qe.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Qe.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Je,this.wa=this.Qa=!1}function tn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?wn(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=mn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=gn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ge||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?In(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=bn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Xe])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):tn(t)}}}function pn(t){return t in sn?sn[t]:sn[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&fn(t),n.call(r,e)}function gn(t,e){if(t.wa)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Qe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Qe(e,this))}function mn(t){return(t=t[an])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function _n(){Ve.call(this),this.v=new nn(this),this.bc=this,this.hb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function In(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Sn(t){var e=null;return new be((function(n,r){-1==(e=En((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function Cn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function kn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(_n,Ve),_n.prototype[Xe]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;dt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Tn(a,r,!0,t)&&i}if(i=Tn(a=t.b=n,r,!0,t)&&i,i=Tn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(a=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Nn.prototype).X=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Rn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof xn?(this.i=void 0!==e?e:t.i,Dn(this,t.c),this.l=t.l,this.a=t.a,On(this,t.g),this.f=t.f,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Rn))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),On(this,n[4]),this.f=qn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Dn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function On(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Vn(e,zn)),t.b=new $n(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof xn?new xn(t):new xn(t,void 0)}function jn(t,e,n,r){var i=new xn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&On(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Vn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Vn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vn(n,"/"==n.charAt(0)?Hn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Vn(n,Gn)),t.join("")},xn.prototype.resolve=function(t){var e=new xn(this),n=!!t.c;n?Dn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)On(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,Wn=/[#\?:]/g,Hn=/[#\?]/g,zn=/[#\?@]/g,Gn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=kn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){Qn(t),e=er(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Jn(t,e){return Qn(t),e=er(t,e),Pn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Q(n)),t.b+=n.length)}function tr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=$(e,this.a.get(er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=Nr();return zt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||a.window;var n="about:blank";t&&(n=At(Dt(t)||Mt)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Sr(Nr())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Dt(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(a=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Ot(e),a.href=At(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=jt("",r,n,a),t=At(e),a&&($t&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">',t=new Ft(t=(r=wt())?r.createHTML(t):t,null,Ut),r=a.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(a=jt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new be((function(e){"complete"==a.document.readyState?e():(t=function(){e()},ln(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function yr(t){return t=t||Nr(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function _r(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function wr(){return en.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":en.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Ir(){var t=wr();return"ReactNative"===t||"Node"===t}var Tr="Firefox",Er="Chrome";function Sr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Tr:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function kr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Sr(i=Nr()):"Worker"===r&&(r=Sr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return a.navigator&&a.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(t){return _r()&&!!a.indexedDB}return!1}function Rr(){return(xr()||"chrome-extension:"===Dr()||yr())&&!Ir()&&Pr()&&!_r()}function xr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return a.location&&a.location.protocol||null}function Or(t){return!fr(t=t||Nr())&&Sr(t)!=Tr}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Sr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Ar("fireauth.oauthhelper",a)&&!Ar("fireauth.iframe",a))}Vr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!xr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,zr={};function Gr(t){zr[t]||(zr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==$r.abcd}catch(Wt){Hr=!1}function Qr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[li],r=t[fi],i=t[pi];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[mi]=n||null,e[di]=r):(e[vi]=r||null,e[mi]=r||null,e[di]=n||null),e[gi]=t||null,Qr(this,bi,i),Qr(this,yi,Jr(e))}w(oi,Zr),oi.prototype.w=function(){var t=oi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",gi="multiFactorInfo",mi="previousEmail",yi="data",bi="operation";function _i(t){var e=Fn(t=Un(t),wi)||null,n=Fn(t,Ii)||null,r=Fn(t,Si)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new T("argument-error",wi+", "+Ii+"and "+Si+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ti)||null,languageCode:Fn(t,Ei)||null,tenantId:Fn(t,Ci)||null})}var wi="apiKey",Ii="oobCode",Ti="continueUrl",Ei="languageCode",Si="mode",Ci="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new _i(t)}catch(t){return null}}function Ai(t){var e=t[Oi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[xi])&&"boolean"!=typeof e)throw new T("argument-error",xi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Ri+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Ri="dynamicLinkDomain",xi="handleCodeInApp",Di="iOS",Oi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Ui="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Vi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ki(t){try{return new Bi(t)}catch(t){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Vi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),zi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:zi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:zi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:zi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Hi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Ji(t)}catch(t){}return null}var Yi="idToken",Xi="providerId";function Ji(t){var e=t[Xi];if(!e&&t[Yi]){var n=Ki(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Qr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}w(Zi,Ji),w(to,Zi),w(eo,Zi),w(no,Zi),w(ro,Zi);var ao="enroll",so="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Ja]){var n=Ki(t[Ja]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new T("user-mismatch"):t}))}function lo(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=($i(t)||{}).Ja||null,this.pb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,zi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Io(){bo.call(this,"github.com")}function To(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function Co(){mo.call(this,"twitter.com",Hi)}function ko(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Po(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=xo(e)))throw new T("argument-error","Invalid email link!");return new No(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Ni(t=io(t)))&&t.operation===ui?t:null}function Do(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new T("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Oo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Mo(t){try{this.a=t||en.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Do({fb:t,eb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return wo(n);case"github.com":return To(n);case"twitter.com":return ko(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new lo(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function jo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function qo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ka=function(t){return _s(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,ws(t,n)},lo.prototype.c=function(t,e){return co(Is(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return _s(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ws(t,n)},po.prototype.c=function(t,e){return co(Is(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Jb=ft(t),this},w(yo,mo),w(bo,mo),bo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},bo.prototype.Rb=function(){return Q(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},w(_o,bo),Qr(_o,"PROVIDER_ID","facebook.com"),Qr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(Io,bo),Qr(Io,"PROVIDER_ID","github.com"),Qr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),w(Eo,bo),Qr(Eo,"PROVIDER_ID","google.com"),Qr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(Co,mo),Qr(Co,"PROVIDER_ID","twitter.com"),Qr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ps,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Rs,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ws,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return co(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Po,{PROVIDER_ID:"password"}),Yr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ka=function(t){return t.gb(Lo(this))},Do.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Do.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=d(t)?t.session:null,a=d(t)?t.phoneNumber:t;return i=o&&o.type==ao?o.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==so?o.Ha().then((function(e){return function(t,e){return ru(t,Gs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},Yr(Mo,{PROVIDER_ID:"phone"}),Yr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Wo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function zo(t,e,n){T.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Uo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new zo(e,n,t.message)}return null}function $o(){}function Qo(t){return t.c||(t.c=t.b())}function Yo(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}w(Ho,T),w(zo,T),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},zo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,w(Yo,$o),Yo.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Yo.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Yo,w(Jo,$o),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(D("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(p(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ca={},la=null;function ha(t){var e;if(la||(la=new na(""),ca[""]=la,la.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ha(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function pa(t){this.f=t}function da(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ha("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(pa,$o),pa.prototype.a=function(){return new da(this.f)},pa.prototype.b=function(t){return function(){return t}}({}),w(da,_n);var va=0;function ga(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ma(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ya(t)}function ya(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){_n.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=_a,this.u=this.S=!1}(t=da.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ya(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ma(this)),this.readyState=va},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ya(this)),this.a&&(this.readyState=3,ya(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ga(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ma(this):ya(this),3==this.readyState&&ga(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ma(this))},t.sc=function(t){this.a&&(this.response=t,ma(this))},t.Va=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ma(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(ba,_n);var _a="";ba.prototype.b=ha("goog.net.XhrIo");var wa=/^https?$/i,Ia=["POST","PUT"];function Ta(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?Qo(t.D):Qo(Ko),t.a.onreadystatechange=b(t.Wb,t);try{fa(t.b,xa(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fa(t.b,xa(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=kn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ea,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!H(Ia,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Aa(t),0<t.g&&(t.u=function(t){return zt&&re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,xa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=En(t.Ma,t.g,t)),fa(t.b,xa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fa(t.b,xa(t,"Send error: "+e.message)),Sa(t,e)}}function Ea(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ca(t),Na(t)}function Ca(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ka(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Pa(t)&&2==Ra(t))fa(t.b,xa(t,"Local request error detected and ignored"));else if(t.i&&4==Pa(t))En(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Pa(t)){fa(t.b,xa(t,"Request complete")),t.c=!1;try{var e,n=Ra(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(Rn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!wa.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Pa(t)?t.a.statusText:""}catch(e){fa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ra(t)+"]",Ca(t)}}finally{Na(t)}}}function Na(t,e){if(t.a){Aa(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Aa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Pa(t){return t.a?t.a.readyState:0}function Ra(t){try{return 2<Pa(t)?t.a.status:-1}catch(t){return-1}}function xa(t,e){return e+" ["+t.P+" "+t.l+" "+Ra(t)+"]"}function Da(t){var e=Wa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Oa(t,e,n){t.a=!0,t.c=n,t.f=!e,Ua(t)}function La(t){if(t.a){if(!t.v)throw new ja(t);t.v=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&Ua(t)}function Fa(t){return W(t.g,(function(t){return p(t[1])}))}function Ua(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ba[e];n&&(a.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Da?(Ma(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Va(e),Ba[e.a]=e,t.h=e.a)}function ja(){R.call(this)}function qa(){R.call(this)}function Va(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=ba.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,xa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,xa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Na(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Na(this,!0)),ba.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ka(this):this.Jc())},t.Jc=function(){ka(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _a:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fa(this.b,"Can not get response: "+t.message),null}},Da.prototype.cancel=function(t){if(this.a)this.c instanceof Da&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qa(this),La(this),Oa(this,!1,t))}},Da.prototype.m=function(t,e){this.i=!1,Oa(this,t,e)},Da.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return Ma(this,r,(function(t){t instanceof qa?o.cancel():i(t)})),o.then(t,e,n)},Da.prototype.$goog_Thenable=!0,w(ja,R),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",w(qa,R),qa.prototype.message="Deferred was canceled",qa.prototype.name="CanceledError",Va.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Ka(t){var e,n=document,r=Tt(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Da(o);return e=window.setTimeout((function(){Ha(i,!0);var t=new $a(Ga,"Timeout reached for loading script "+r);La(s),Oa(s,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ha(i,!1,e),La(s),Oa(s,!0,null))},i.onerror=function(){Ha(i,!0,e);var t=new $a(za,"Error while loading script "+r);La(s),Oa(s,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Wa(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ha(t,!0,this.Ma)}}function Ha(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var za=0,Ga=1;function $a(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Qa(t){this.f=t}function Ya(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Za,this.g=ft(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||es,this.a=ft(t.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=a.XMLHttpRequest||n&&en.INTERNAL.node&&en.INTERNAL.node.XMLHttpRequest)&&!_r())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new pa(self):Ir()?this.f=new Qa(n):this.f=new Jo,this.b=null}w($a,R),w(Qa,$o),Qa.prototype.a=function(){return new this.f},Qa.prototype.b=function(){return{}};var Xa,Ja="idToken",Za=new Vr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new Vr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,Dn(t,e.c),t.a=e.a,On(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,s){(function(){var t=Nr();return!((t=Sr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&oe&&!(9<oe))})()||_r()?t=b(t.u,t):(Xa||(Xa=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[cs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Ka(Et(us,{onload:cs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,s)}Ya.prototype.T=function(){return this.b},Ya.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ba(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}wn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),In(s,"ready",(function(){u&&clearTimeout(u),Ke(this)})),In(s,"timeout",(function(){u&&clearTimeout(u),Ke(this),e&&e(null)})),Ta(s,t,n,r,i)};var us=new gt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(t,e,n,r,i,o,a){var s=Un(e+n);Mn(s,"key",t.c),a&&Mn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(s,c,i[c]);return new be((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function hs(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new T("invalid-email")}function fs(t){"email"in t&&hs(t)}function ps(t){if(!t[Ja]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,ft(t));throw new T("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Ya.prototype.s=function(t,e,n,r,i){var o=this;Xa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.Ab=function(){return ru(this,Hs,{})},Ya.prototype.Cb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Ya.prototype.Db=function(t,e){return ru(this,Ws,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ms(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,$s,e)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Ys,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qs,e)}function Ts(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Ya.prototype).Eb=function(t,e){var n={idToken:t},r=[];return lt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Us,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.gb=function(t){return ru(this,Zs,t)},t.ob=function(t,e){return ru(this,Vs,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Ss,{oobCode:t})},t.kb=function(t){return ru(this,Es,{oobCode:t})};var Es={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Cs={endpoint:"signupNewUser",A:function(t){if(hs(t),!t.password)throw new T("weak-password")},G:ps,V:!0,B:!0},ks={endpoint:"createAuthUri",B:!0},Ns={endpoint:"deleteAccount",O:["idToken"]},As={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Ps={endpoint:"emailLinkSignin",O:["email","oobCode"],A:hs,G:ps,V:!0,B:!0},Rs={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:hs,G:ps,V:!0},xs={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},Ds={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},Os={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");hs(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");hs(t)},Z:"email",B:!0},js={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},Vs={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",O:["idToken"],A:fs,V:!0},Ws={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fs(t),!t.password)throw new T("weak-password")},G:ps,V:!0},Hs={endpoint:"signupNewUser",G:ps,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Gs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},$s={endpoint:"verifyAssertion",A:ms,Za:ys,G:bs,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:ms,Za:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:function(t){if(ms(t),!t.idToken)throw new T("internal-error")},Za:ys,G:bs,V:!0},Xs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:ps,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(hs(t),!t.password)throw new T("wrong-password")},G:ps,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");ds(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);ps(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ja]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ke(new T("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ls(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Lr(t)),new T("internal-error",e)}function au(t){this.b=t,this.a=null,this.sb=function(t){return(lu||(lu=new be((function(t,e){function n(){qr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:uu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ce(Ka(r=Et(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new be((function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new gt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Vr(3e4,6e4),cu=new Vr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=jn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return en.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,js,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Un(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Un(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(cr())}))}function gu(t){return t.m||(t.m=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?kr(t.c,pu(t.b)):null,t.l=new Ya(t.g,A(t.i),t.C),t.f&&is(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=ft(u||null),t.f=c,t.zb(l).toString()}function bu(t){if(this.a=t||en.INTERNAL.reactNative&&en.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=b(this.c,this)}hu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=jn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=en.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),ht(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Xn(t.b,"eid"),(a=pu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.sb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new be((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Sn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Nr();return!Or(t)&&!jr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return ke(new T("popup-blocked"));if(a&&!Or())return this.ma().o((function(e){pr(t),i(e)})),r(),Ce();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(jo(n),a)||lr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){jo(e),lr(yu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){G(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Lr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Tu(t,e,n){ht(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,(function(t){return t==e}))}}function Nu(){if(!xu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.v=function(){var t=_r()?self:null;if(V(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&V(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Au(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Au(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=Au(t)),t.i}function Ru(t,e){var n=0;return new be((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function xu(){try{return!!a.indexedDB}catch(t){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function Ou(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Fu(t){return Pu(t).then((function(t){var e=Du(Ou(t,!1));return e.getAll?Lu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(xu()){var t=Ur(),r="__sak"+t;return wu||(wu=new Nu),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==wr();if(!(t=Bu()||t&&en.INTERNAL.node&&en.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||en.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Wu(){if(!function(){var t="Node"==wr();if(!(t=Hu()||t&&en.INTERNAL.node&&en.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||en.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Qu,t.Node=Yu,t.ReactNative=Xu,t.Worker=Ju,this.a=t[wr()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];V(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Ae(i).then((function(r){var i=[];V(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Ru(this,(function(e){return Lu((e=Du(Ou(e,!0))).get(t))})).then((function(i){return Ru(n,(function(o){if(o=Du(Ou(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ru(this,(function(e){return Lu(Du(Ou(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ru(this,(function(r){return n=!0,e.b++,Lu(Du(Ou(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&V(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t}))},(t=qu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Ce().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&hn(a.window,"storage",t)},(t=Ku.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return Ce().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,$u,Qu={F:Vu,cb:Wu},Yu={F:Vu,cb:Wu},Xu={F:bu,cb:Ku},Ju={F:Vu,cb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(jr(Nr())||!br()),e=Or(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new zu),t=Gu;try{this.g=!ur()&&Wr()||!a.indexedDB?new t.a.F:new ju(_r()?new qu:new t.a.F)}catch(t){this.g=new qu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new qu}this.v=new qu,this.f=b(this.Zb,this),this.b={}}function ec(){return $u||($u=new tc),$u}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ht(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Wr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Qe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(G(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ht(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},zt&&oe&&10==oe&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=a.Int32Array?new Int32Array(yc):yc),this.reset()}w(lc,(function(){this.b=-1}));for(var hc=64,fc=hc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=$(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|sc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Q(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){lc.call(this,8,_c)}w(bc,lc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?E(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new qo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Sn(500).then((function(){return Cc(t).then((function(){r||Ec(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Wo||(Wo=new Bo),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function kc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?mr().then((function(){return new be((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ar("universalLinks.subscribe",a))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",a))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",a))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",a))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Pb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ce()},t.Nb=function(){return ke(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return ke(new T("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Ce().then((function(){return jo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new qo(e,r,null,o,new T("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",a);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",a),l={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return ke(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Tc(o),l.sessionId=o;var h=yu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,s.w(),e)})).then((function(){var e=Ar("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",a)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",a)))throw new T("invalid-cordova-configuration");e=Nr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=Sn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},l=function(){Br()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ta=function(t){G(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function Ac(t){return ic(t.b,Nc,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Yc,this.g=new kc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Rc(this.D,this.v,this.m,S,this.J)}function Rc(t,e,n,r,i){var o=en.SDK_VERSION||null;return yr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Dc(t){t.a.Yb()&&xc(t).o((function(e){var n=new qo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Ub()||zc(t.b)}function Oc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){xc(t).o((function(e){var n=new qo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Dc(t)})).o((function(){Dc(t)}))}function Lc(t,e){G(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Rc(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return zc(this.b),e};var Mc=new Vr(2e3,1e4),Fc=new Vr(3e4,6e4);function Uc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new be((function(){})):Ac(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Vc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Pc.prototype.ra=function(){return this.b.ra()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Wc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function Gc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function $c(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):$c(t,n):$c(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Xc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).gb(e,n).then((function(t){return new Jc(t,r)}))}function tl(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function el(t,e,n){var r=e&&e[rl];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;V(e[nl]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Qc(t,s,e,null)})).o((function(e){Qc(t,s,null,e)}))}(this,t,e):ke(new T("invalid-auth-event")):(Qc(this,!1,null,null),Ce())}else ke(new T("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Sn(Fc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):ke(new T("invalid-auth-event"))}else ke(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nl="mfaInfo",rl="mfaPendingCredential";function il(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new el(t,e,n),Qr(this,"resolver",this.b)}function ol(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new il(e,t.serverResponse,n,t.message)}catch(t){}return null}function al(){}function sl(t){Qr(this,"factorId",t.fa),this.a=t}function ul(t){if(sl.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function cl(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ll(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hl(this,n)}function hl(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function pl(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Br()||!t?Ce():new be((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){pl(t,!0)})).o((function(e){t.i(e)&&pl(t,!1)}))}function dl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vl(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gl(t,e){t.b=Ki(e[Ja]||""),t.a=e.refreshToken,vl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ml(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,vl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yl(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function bl(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _l(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=en.SDK_VERSION?kr(en.SDK_VERSION):null;this.a=new Ya(this.l,A(S),r),(this.u=t.emulatorConfig||null)&&is(this.a,this.u),this.h=new dl(this.a),Al(this,e[Ja]),gl(this.h,e),Qr(this,"refreshToken",this.h.a),xl(this,n||{}),_n.call(this),this.P=!1,this.s&&Rr()&&(this.b=Wc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){wl(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){El(i,t.f)},this.ja=null,this.S=new ll(this,n),Qr(this,"multiFactor",this.S)}function wl(t,e){t.u=e,is(t.a,e),t.b&&(e=t.b,t.b=Wc(t.s,t.l,t.m,t.u),t.P&&(Lc(e,t),Oc(t.b,t)))}function Il(t,e){t.qa&&hn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&un(e,"languageCodeChanged",t.Pa)}function Tl(t,e){t.$&&hn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&un(e,"emulatorConfigChanged",t.Ba)}function El(t,e){t.aa=e,as(t.a,en.SDK_VERSION?kr(en.SDK_VERSION,t.aa):null)}function Sl(t,e){t.ja&&hn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&un(e,"frameworkChanged",t.Oa)}function Cl(t){try{return en.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kl(t){t.J||t.D.b||(t.D.start(),hn(t,"tokenChanged",t.ba),un(t,"tokenChanged",t.ba))}function Nl(t){hn(t,"tokenChanged",t.ba),t.D.stop()}function Al(t,e){t.Aa=e,Qr(t,"_lat",e)}function Pl(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ae(e).then((function(){return t}))}function Rl(t){t.b&&!t.P&&(t.P=!0,Oc(t.b,t))}function xl(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Dl(){}function Ol(t){return Ce().then((function(){if(t.J)throw new T("app-deleted")}))}function Ll(t){return K(t.providerData,(function(t){return t.providerId}))}function Ml(t,e){e&&(Fl(t,e.providerId),t.providerData.push(e))}function Fl(t,e){G(t.providerData,(function(t){return t.providerId==e}))}function Ul(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function jl(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new yl(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new yl),V(e.providerData,(function(e){Ml(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),hl(t.S,e.S.b))}function ql(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Os,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Ul(t,"isAnonymous",!1),e}))}))}function Vl(t,e){e[Ja]&&t.Aa!=e[Ja]&&(gl(t.h,e),t.dispatchEvent(new cl("tokenChanged")),Al(t,e[Ja]),Ul(t,"refreshToken",t.h.a))}function Bl(t,e){return ql(t).then((function(){if(H(Ll(t),e))return Pl(t).then((function(){throw new T("provider-already-linked")}))}))}function Kl(t,e,n){return Xr({user:t,credential:Uo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Wl(t,e){return Vl(t,e),t.reload().then((function(){return t}))}function Hl(t,e,n,r,i){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=$i(n.providerId),a=Ur(t.uid+":::"),s=null;(!Or()||br())&&t.s&&n.isOAuthProvider&&(s=yu(t.s,t.l,t.m,e,n,null,a,en.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=dr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Gl(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new be((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Vc(t.b,t,e,u,a)}))})).then((function(t){return u&&pr(u),t?Xr(t):null})).o((function(t){throw u&&pr(u),t})),$l(t,r,i)}function zl(t,e,n,r,i){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=null,a=Ur(t.uid+":::");return r=r().then((function(){if(Gl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Pl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xl,t.w(),e.a)),e})).then((function(){return qc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jl(t.ha);throw o})).then((function(){if(o)throw o})),$l(t,r,i)}function Gl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function $l(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),ke(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new cl("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),Cl(t),b(t.jc,t))),n||e}))}function Ql(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ja]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new _l(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&Ml(i,Xr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Yl(t){this.a=t,this.b=ec()}el.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nl],delete n[rl],dt(n,t),e.g(n)}))},w(il,T),al.prototype.tb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,xs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Ds,n)}))}(this,t,e)},w(sl,al),w(ul,sl),w(cl,$e),(t=ll.prototype).yc=function(t){hl(this,function(t){var e=[];return V(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Vl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return hl(e,r),Vl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fl.prototype.start=function(){this.a=this.c,pl(this,!0)},fl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ml(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},yl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(_l,_n),_l.prototype.xa=function(t){this.za=t,rs(this.a,t)},_l.prototype.la=function(){return this.za},_l.prototype.Ga=function(){return Q(this.aa)},_l.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(_l.prototype,"providerId","firebase"),(t=_l.prototype).reload=function(){var t=this;return $l(this,Ol(this).then((function(){return ql(t).then((function(){return Pl(t)})).then(Dl)})))},t.oc=function(t){return this.I(t).then((function(t){return new tl(t)}))},t.I=function(t){var e=this;return $l(this,Ol(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.Aa&&(Al(e,t.accessToken),e.dispatchEvent(new cl("tokenChanged"))),Ul(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");xl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new bl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ml(this,e[n]);Ul(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new cl("userReloaded",{hd:t}))},t.Lc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return $l(this,t.c(this.a,this.uid).then((function(t){return Vl(e,t),n=Kl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return $l(this,Bl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kl(e,t,"link"),Wl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return $l(this,Bl(this,"phone").then((function(){return Zc(Cl(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return $l(this,Ce().then((function(){return Zc(Cl(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return $l(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Vl(e,t),e.reload()})))},t.ed=function(t){var e=this;return $l(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vl(e,t),e.reload()})))},t.Db=function(t){var e=this;return $l(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Vl(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ol(this);var e=this;return $l(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vl(e,t),Ul(e,"displayName",t.displayName||null),Ul(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Pl(e)})).then(Dl))},t.cd=function(t){var e=this;return $l(this,ql(this).then((function(n){return H(Ll(e),t)?function(t,e,n){return ru(t,As,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(Ll(e),(function(t){n[t]||Fl(e,t)})),n[Mo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Pl(e)})):Pl(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return $l(this,this.I().then((function(e){return ru(t.a,Ns,{idToken:e})})).then((function(){t.dispatchEvent(new cl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Il(t,null),Tl(t,null),Sl(t,null),t.N=[],t.J=!0,Nl(t),Qr(t,"refreshToken",null),t.b&&Lc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return Hl(this,"linkViaPopup",t,(function(){return Bl(e,t.providerId).then((function(){return Pl(e)}))}),!1)},t.Nc=function(t){return Hl(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return zl(this,"linkViaRedirect",t,(function(){return Bl(e,t.providerId)}),!1)},t.Oc=function(t){return zl(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $l(this,this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kl(i,t,"link"),Wl(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $l(this,Ce().then((function(){return co(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kl(i,t,"reauthenticate"),Vl(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return $l(this,this.I().then((function(e){return n=e,void 0===t||ht(t)?{}:ji(new Ai(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return $l(this,this.I().then((function(t){return r=t,void 0===e||ht(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return $l(this,t=co(Ce(t),n.uid).then((function(t){return e=Kl(n,t,"reauthenticate"),Vl(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Xl={name:"redirectUser",F:"session"};function Jl(t){return ic(t.b,Xl,t.a)}function Zl(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=nh("local"),n=nh("session"),r=nh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(eh,t.a).then((function(t){return t?nh(t):e}))}))}))})).then((function(e){return t.c=e,th(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nh("local"),this.a,b(this.g,this))}function th(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,nh(Zu[n]),t.a));return r.push(ic(t.b,eh,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ne(t[s],_(o,s),a);else e(i)}))}(r)}Zl.prototype.g=function(){var t=this,e=nh("local");ah(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return th(t,"local").then((function(){t.c=e}))}))}))};var eh={name:"persistence",F:"session"};function nh(t){return{name:"authUser",F:t}}function rh(t,e){return ah(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ih(t){return ah(t,(function(){return ic(t.b,t.c,t.a)}))}function oh(t,e,n){return ah(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Ql(t||{})}))}))}function ah(t,e){return t.f=t.f.then(e,e),t.f}function sh(t){if(this.l=!1,Qr(this,"settings",new Xc),Qr(this,"app",t),!gh(this).options||!gh(this).options.apiKey)throw new T("invalid-api-key");t=en.SDK_VERSION?kr(en.SDK_VERSION):null,this.a=new Ya(gh(this).options&&gh(this).options.apiKey,A(S),t),this.P=[],this.s=[],this.N=[],this.Pa=en.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=en.INTERNAL.createSubscribe(b(this.Ac,this)),dh(this,null),this.i=new Zl(gh(this).options.apiKey+":"+gh(this).name),this.D=new Yl(gh(this).options.apiKey+":"+gh(this).name),this.$=_h(this,function(t){var e=gh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ql(t||{})}))}(t.D,gh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jl(t.D)}));return _h(t,e)}(t).then((function(){return oh(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ih(t.i)}))):null})).then((function(e){dh(t,e||null)}));return _h(t,n)}(this)),this.h=_h(this,function(t){return t.$.then((function(){return fh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=gh(t).options.authDomain,n=gh(t).options.apiKey;e&&Rr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Wc(e,n,gh(t).name,t.R),Oc(t.b,t),mh(t)&&Rl(mh(t)),t.m){Rl(t.m);var r=t.m;r.xa(t.la()),Il(r,t),El(r=t.m,t.J),Sl(r,t),wl(r=t.m,t.R),Tl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Un(this.R.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function uh(t){$e.call(this,"languageCodeChanged"),this.h=t}function ch(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function lh(t){$e.call(this,"frameworkChanged"),this.f=t}function hh(t){return t.Oa||ke(new T("auth-domain-config-required"))}function fh(t){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));var e=hh(t).then((function(){return t.b.ra()})).then((function(t){return t?Xr(t):null}));return _h(t,e)}function ph(t,e){var n={};return n.apiKey=gh(t).options.apiKey,n.authDomain=gh(t).options.authDomain,n.appName=gh(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new _l(t,e);return n&&(i.ha=n),r&&El(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return mh(t)&&e.uid==mh(t).uid?(jl(mh(t),e),t.da(e)):(dh(t,e),Rl(e),t.da(e))})).then((function(){bh(t)}))}function dh(t,e){mh(t)&&(function(t,e){G(t.W,(function(t){return t==e}))}(mh(t),t.Ba),hn(mh(t),"tokenChanged",t.qa),hn(mh(t),"userDeleted",t.za),hn(mh(t),"userInvalidated",t.Aa),Nl(mh(t))),e&&(e.W.push(t.Ba),un(e,"tokenChanged",t.qa),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&kl(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),Il(e,t),El(e,t.J),Sl(e,t),wl(e,t.R),Tl(e,t))}function vh(t,e){var n=null,r=null;return _h(t,e.then((function(e){return n=Uo(e),r=Qi(e),ph(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Xr({user:mh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gh(t){return t.app}function mh(t){return t.currentUser}function yh(t){return mh(t)&&mh(t)._lat||null}function bh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](yh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](yh(t))}}function _h(t,e){return t.P.push(e),e.oa((function(){z(t.P,e)})),e}function wh(){}function Ih(){this.a={},this.b=1e12}Zl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),ah(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,th(n,t)})).then((function(){if(n.c=nh(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},w(sh,_n),w(uh,$e),w(ch,$e),w(lh,$e),(t=sh.prototype).yb=function(t){return _h(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new uh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&mr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,is(this.a,this.R),this.dispatchEvent(new ch(this.R))}},t.Gc=function(t){this.J.push(t),as(this.a,en.SDK_VERSION?kr(en.SDK_VERSION,this.J):null),this.dispatchEvent(new lh(this.J))},t.Ga=function(){return Q(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:gh(this).options.apiKey,authDomain:gh(this).options.authDomain,appName:gh(this).name,currentUser:mh(this)&&mh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vh(i,_s(i.a,o))}))},t.Xc=function(t){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Ur(),i=null;(!Or()||br())&&gh(this).options.authDomain&&t.isOAuthProvider&&(i=yu(gh(this).options.authDomain,gh(this).options.apiKey,gh(this).name,"signInViaPopup",t,null,r,en.SDK_VERSION||null,null,null,this.T(),this.R));var o=dr(i,n&&n.va,n&&n.ua);return _h(this,n=hh(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new be((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Vc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Xr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));var e=this,n=hh(this).then((function(){return function(t){return ah(t,(function(){return t.b.set(eh,t.c.F,t.a)}))}(e.i)})).then((function(){return qc(e.b,"signInViaRedirect",t,void 0,e.T())}));return _h(this,n)},t.ra=function(){var t=this;return fh(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},t.dd=function(t){if(!t)return ke(new T("null-user"));if(this.S!=t.tenantId)return ke(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=gh(this).options.apiKey,n.authDomain=gh(this).options.authDomain,n.appName=gh(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Ja]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new _l(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&El(e,r),jl(e,t),e}(t,n,e.D,e.Ga());return _h(this,this.h.then((function(){if(gh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return mh(e)&&t.uid==mh(e).uid?(jl(mh(e),t),e.da(t)):(dh(e,r),Rl(r),e.da(r))})).then((function(){bh(e)})))},t.Bb=function(){var t=this;return _h(this,this.h.then((function(){return t.b&&Gc(t.b.b),mh(t)?(dh(t,null),ih(t.i).then((function(){bh(t)}))):Ce()})))},t.Zc=function(){var t=this;return oh(this.i,gh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=mh(t)&&e){n=mh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jl(mh(t),e),mh(t).I();(mh(t)||e)&&(dh(t,e),e&&(Rl(e),e.ha=t.D),t.b&&Oc(t.b,t),bh(t))}}))},t.da=function(t){return rh(this.i,t)},t.mc=function(){bh(this),this.da(mh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vh(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(mh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),_h(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(yh(t)))})))}(this,(function(){t.next(mh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(mh(r)):"function"==typeof t.next&&t.next(mh(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(mh(r)):"function"==typeof t.next&&t.next(mh(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return _h(this,this.h.then((function(){return mh(e)?mh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vh(e,ru(e.a,Xs,{token:t}))})).then((function(t){var n=t.user;return Ul(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Cs,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vh(e,t.ka(e.a))}))},t.Sc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=mh(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vh(t,t.a.Ab()).then((function(e){var n=e.user;return Ul(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return mh(this)&&mh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&mh(this)&&kl(mh(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&mh(this)&&Nl(mh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),_h(this,this.h.then((function(){e.l||H(e.s,t)&&t(yh(e))})))},t.removeAuthTokenListener=function(t){G(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nh("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return _h(this,function(t,e){return ru(t,ks,{identifier:e,continueUri:xr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.xb=function(t,e){var n=this;return _h(this,Ce().then((function(){var t=new Ai(e);if(!t.c)throw new T("argument-error",xi+" must be true when sending sign in link to email");return ji(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return _h(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return _h(this,this.a.Sa(t).then((function(t){return new ai(t)})))},t.kb=function(t){return _h(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return _h(this,Ce().then((function(){return void 0===e||ht(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return _h(this,Zc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return _h(this,Ce().then((function(){var r=e||cr(),i=Ro(t,r);if(!(r=xo(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},wh.prototype.render=function(){},wh.prototype.reset=function(){},wh.prototype.getResponse=function(){},wh.prototype.execute=function(){};var Th=null;function Eh(t,e){return(e=Sh(e))&&t.a[e]||null}function Sh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ch(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function kh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nh(){}function Ah(){}Ih.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ch(t,e),this.b++},Ih.prototype.reset=function(t){var e=Eh(this,t);t=Sh(t),e&&t&&(e.delete(),delete this.a[t])},Ih.prototype.getResponse=function(t){return(t=Eh(this,t))?t.getResponse():null},Ih.prototype.execute=function(t){(t=Eh(this,t))&&t.execute()},Ch.prototype.getResponse=function(){return kh(this),this.b},Ch.prototype.execute=function(){kh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Ch.prototype.delete=function(){kh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Qr(Nh,"FACTOR_ID","phone"),Ah.prototype.g=function(){return Th||(Th=new Ih),Ce(Th)},Ah.prototype.c=function(){};var Ph=null;function Rh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xh=new gt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dh=new Vr(3e4,6e4);Rh.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Dh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete a[e.a]},Ce(Ka(Et(xh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Rh.prototype.c=function(){this.b--};var Oh=null;function Lh(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Ph||(Ph=new Ah),s=Ph):(Oh||(Oh=new Rh),s=Oh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jh],!a.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Mh];this.a[Mh]=function(t){if(qh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,a);"function"==typeof e&&e(t)}};var l=this.a[Fh];this.a[Fh]=function(){if(qh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,a);"function"==typeof t&&t()}}}var Mh="callback",Fh="expired-callback",Uh="sitekey",jh="size";function qh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Vh(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function Bh(t){if(t.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kh(t,e,n){var r=!1;try{this.b=n||en.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=en.SDK_VERSION?kr(en.SDK_VERSION,o):null,Lh.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,A(S),r)}function Wh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Lh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vh(this,Ce().then((function(){if(xr()&&!_r())return mr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,qs,{})})).then((function(e){t.a[Uh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Bh(this);var t=this;return Vh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ae&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Vt(a.name),'"'),a.type){o.push(' type="',Vt(a.type),'"');var s={};dt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=pe(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ue(o,a)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bh(this);var t=this;return Vh(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){G(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},w(Kh,Lh);var Hh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function zh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Gh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function $h(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Qh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Yh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zh(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Wh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(sh.prototype,{kb:{name:"applyActionCode",j:[zh("code")]},Sa:{name:"checkActionCode",j:[zh("code")]},ob:{name:"confirmPasswordReset",j:[zh("code"),zh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[zh("email"),zh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[zh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[zh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf($h(),Qh(),"nextOrObserver"),Qh("opt_error",!0),Qh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf($h(),Qh(),"nextOrObserver"),Qh("opt_error",!0),Qh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[zh("email"),tf($h("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[zh("email"),$h("actionCodeSettings")]},yb:{name:"setPersistence",j:[zh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Xh()]},Tc:{name:"signInWithCustomToken",j:[zh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[zh("email"),zh("password")]},Vc:{name:"signInWithEmailLink",j:[zh("email"),zh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof _l)}},Yh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[zh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[zh("url"),$h("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[zh("code")]}}),nf(sh.prototype,{lc:{name:"languageCode",lb:tf(zh(),Yh(),"languageCode")},ti:{name:"tenantId",lb:tf(zh(),Yh(),"tenantId")}}),sh.Persistence=Zu,sh.Persistence.LOCAL="local",sh.Persistence.SESSION="session",sh.Persistence.NONE="none",ef(_l.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Gh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xh()]},rb:{name:"linkWithCredential",j:[Xh()]},Dc:{name:"linkWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xh()]},ub:{name:"reauthenticateWithCredential",j:[Xh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf($h("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[zh(null,!0)]},cd:{name:"unlink",j:[zh("provider")]},Cb:{name:"updateEmail",j:[zh("email")]},Db:{name:"updatePassword",j:[zh("password")]},ed:{name:"updatePhoneNumber",j:[Xh("phone")]},Eb:{name:"updateProfile",j:[$h("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[zh("email"),tf($h("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Ih.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(wh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Gh("appVerificationDisabledForTesting")}}),ef(Jc.prototype,{confirm:{name:"confirm",j:[zh("verificationCode")]}}),rf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Ao,Oo,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf(zh(),$h(),"json")]),rf(Po,"credential",(function(t,e){return new No(t,e)}),[zh("email"),zh("password")]),ef(No.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(_o.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),rf(_o,"credential",wo,[tf(zh(),$h(),"token")]),rf(Po,"credentialWithLink",Ro,[zh("email"),zh("emailLink")]),ef(Io.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),rf(Io,"credential",To,[tf(zh(),$h(),"token")]),ef(Eo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),rf(Eo,"credential",So,[tf(zh(),tf($h(),Yh()),"idToken"),tf(zh(),Yh(),"accessToken",!0)]),ef(Co.prototype,{Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),rf(Co,"credential",ko,[tf(zh(),$h(),"token"),zh("secret",!0)]),ef(bo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},credential:{name:"credential",j:[tf(zh(),tf($h(),Yh()),"optionsOrIdToken"),tf(zh(),Yh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),ef(po.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(lo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),rf(Mo,"credential",Fo,[zh("verificationId"),zh("verificationCode")]),ef(Mo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf(zh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jh(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jh(t.session,so)&&Zh(t.multiFactorHint):t.session&&t.multiFactorUid?Jh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(Do.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(T.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(zo.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(il.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(el.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(ll.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},zh("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zh},zh(),"multiFactorInfoIdentifier")]}}),ef(Kh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(_i,"parseLink",Ni,[zh("link")]),rf(Nh,"assertion",(function(t){return new ul(t)}),[Xh("phone")]),function(){if(void 0===en||!en.INTERNAL||!en.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:sh,AuthCredential:uo,Error:T};rf(t,"EmailAuthProvider",Po,[]),rf(t,"FacebookAuthProvider",_o,[]),rf(t,"GithubAuthProvider",Io,[]),rf(t,"GoogleAuthProvider",Eo,[]),rf(t,"TwitterAuthProvider",Co,[]),rf(t,"OAuthProvider",bo,[zh("providerId")]),rf(t,"SAMLAuthProvider",yo,[zh("providerId")]),rf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof sh)}}]),rf(t,"RecaptchaVerifier",Kh,[tf(zh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),$h("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof en.app.App)}}]),rf(t,"ActionCodeURL",_i,[]),rf(t,"PhoneMultiFactorGenerator",Nh,[]),en.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new sh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),en.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),en.registerVersion("@firebase/auth","0.16.8"),en.INTERNAL.extendNamespace({User:_l})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var rn="";function on(t){rn=t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var an=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ee(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:te(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),sn=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return oe(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),un=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new an(e)}}catch(t){}return new sn},cn=un("localStorage"),ln=un("sessionStorage"),hn=new Ue("@firebase/database"),fn=function(){var t=1;return function(){return t++}}(),pn=function(t){var e=be(t),n=new he;n.update(e);var r=n.digest();return Nt.encodeByteArray(r)},dn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=dn.apply(null,i):n+="object"==typeof i?ee(i):i,n+=" "}return n},vn=null,gn=!0,mn=function(t,e){St(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(hn.logLevel=xe.VERBOSE,vn=hn.log.bind(hn),e&&ln.set("logging_enabled",!0)):"function"==typeof t?vn=t:(vn=null,ln.remove("logging_enabled"))},yn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===gn&&(gn=!1,null===vn&&!0===ln.get("logging_enabled")&&mn(!0)),vn){var n=dn.apply(null,t);vn(n)}},bn=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];yn.apply(void 0,_t([t],bt(e)))}},_n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+dn.apply(void 0,_t([],bt(t)));hn.error(n)},wn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+dn.apply(void 0,_t([],bt(t)));throw hn.error(n),new Error(n)},In=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+dn.apply(void 0,_t([],bt(t)));hn.warn(n)},Tn=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},En="[MIN_NAME]",Sn="[MAX_NAME]",Cn=function(t,e){if(t===e)return 0;if(t===En||e===Sn)return-1;if(e===En||t===Sn)return 1;var n=Mn(t),r=Mn(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},kn=function(t,e){return t===e?0:t<e?-1:1},Nn=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ee(e))},An=function(t){if("object"!=typeof t||null===t)return ee(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=ee(e[i]),r+=":",r+=An(t[e[i]]);return r+="}"},Pn=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rn(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var xn=function(t){St(!Tn(t),"Invalid JSON number");var e,n,r,i,o,a=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),a))+a,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Dn=new RegExp("^-?(0*)\\d{1,10}$"),On=-2147483648,Ln=2147483647,Mn=function(t){if(Dn.test(t)){var e=Number(t);if(e>=On&&e<=Ln)return e}return null},Fn=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw In("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Un=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},jn=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){In('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),qn=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',In(t)},t}(),Vn=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Bn="5",Kn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wn="websocket",Hn="long_polling",zn=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cn.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&cn.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function Gn(t,e,n){var r;if(St("string"==typeof e,"typeof type must == string"),St("object"==typeof n,"typeof params must == object"),e===Wn)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Hn)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return Rn(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $n=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),oe(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return xt(this.counters_)},t}(),Qn={},Yn={};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xn(t){var e=t.toString();return Qn[e]||(Qn[e]=new $n),Qn[e]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Jn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Fn((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),Zn="start",tr="close",er=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bn(t),this.stats_=Xn(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),Gn(e,Hn,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Jn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Ht()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new nr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=bt(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Zn)n.id=o,n.password=a;else{if(i!==tr)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=bt(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v=Bn,n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Kn.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Ht()&&(!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=ee(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=At(e),r=Pn(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Ht()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=ee(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),nr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ht())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=fn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){yn("frame writing exception"),t.stack&&yn(t.stack),yn(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||yn("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Ht()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){yn("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),rr=null;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */"undefined"!=typeof MozWebSocket?rr=MozWebSocket:"undefined"!=typeof WebSocket&&(rr=WebSocket);var ir=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bn(this.connId),this.stats_=Xn(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={};return i.v=Bn,!Ht()&&"undefined"!=typeof location&&location.hostname&&Kn.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Gn(t,Wn,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cn.set("previous_websocket_failure",!0);try{if(Ht()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+rn+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new rr(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new rr(this.connURL,[],i)}}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rr&&!t.forceDisallow_},t.previouslyFailed=function(){return cn.isInMemoryStorage||!0===cn.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){cn.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=te(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(St(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=ee(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Pn(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),or=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[er,ir]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ir&&ir.isAvailable(),o=i&&!ir.previouslyFailed();if(e.webSocketOnly&&(i||In("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ir];else{var a=this.transports_=[];try{for(var s=yt(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ar=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bn("c:"+this.id+":"),this.transportManager_=new or(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Un((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Nn("t",t),n=Nn("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Nn("t",t),n=Nn("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Nn("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?_n("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_n("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Bn!==n&&In("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Un((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Un((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),sr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ur=function(){function t(t){this.allowedEvents_=t,this.listeners_={},St(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=_t([],bt(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){St(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),cr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Ft()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return pt(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return St("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ur),lr=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hr(){return new lr("")}function fr(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pr(t){return t.pieces_.length-t.pieceNum_}function dr(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lr(t.pieces_,e)}function vr(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function gr(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function mr(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lr(e,0)}function yr(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lr)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lr(n,0)}function br(t){return t.pieceNum_>=t.pieces_.length}function _r(t,e){var n=fr(t),r=fr(e);if(null===n)return e;if(n===r)return _r(dr(t),dr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wr(t,e){for(var n=gr(t,0),r=gr(e,0),i=0;i<n.length&&i<r.length;i++){var o=Cn(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ir(t,e){if(pr(t)!==pr(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tr(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pr(t)>pr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Er=function(t,e){this.errorPrefix_=e,this.parts_=gr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=_e(this.parts_[n]);Sr(this)};function Sr(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Cr(t))}function Cr(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var kr,Nr,Ar=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return pt(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return St("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ur),Pr=1e3,Rr=function(t){function e(n,r,i,o,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=bn("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Pr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ht())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ar.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&cr.getInstance().on("online",l.onOnline_,l),l}return pt(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(ee(i)),St(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new Ot,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),St(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),St(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&oe(t,"w")){var n=ae(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();In("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||ie(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=re(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),St(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+ee(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):_n("Unrecognized action received from server: "+ee(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;St(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pr),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return vt(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,p,d,v=this;return gt(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},c=function(t){St(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)},this.realtime_={close:u,sendRequest:c},l=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)])];case 2:return h=bt.apply(void 0,[g.sent(),2]),f=h[0],p=h[1],a?yn("getToken() completed but was canceled"):(yn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,s=new ar(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){In(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),o)),[3,4];case 3:return d=g.sent(),this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&In(d),u()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){yn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){yn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],se(this.interruptReasons_)&&(this.reconnectDelay_=Pr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return An(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lr(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){yn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){yn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=yt(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,yt(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Ht()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+rn.replace(/\./g,"-")]=1,Ft()?t["framework.cordova"]=1:Vt()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=cr.getInstance().currentlyOnline();return se(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(sr),xr=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Dr=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new xr(En,t),r=new xr(En,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return xr.MIN},t}(),Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return kr},set:function(t){kr=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Cn(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Ct("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return xr.MIN},e.prototype.maxPost=function(){return new xr(Sn,kr)},e.prototype.makePost=function(t,e){return St("string"==typeof t,"KeyIndex indexValue must always be a string."),new xr(t,kr)},e.prototype.toString=function(){return".key"},e}(Dr),Lr=new Or,Mr=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Fr=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:jr.EMPTY_NODE,this.right=null!=o?o:jr.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return jr.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return jr.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ur=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Fr(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),jr=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Fr.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fr.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mr(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mr(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mr(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mr(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ur,t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function qr(t,e){return Cn(t.name,e.name)}function Vr(t,e){return Cn(t,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Br,Kr,Wr,Hr=function(t){return"number"==typeof t?"number:"+xn(t):"string:"+t},zr=function(t){if(t.isLeafNode()){var e=t.val();St("string"==typeof e||"number"==typeof e||"object"==typeof e&&oe(e,".sv"),"Priority must be a string or number.")}else St(t===Nr||t.isEmpty(),"priority of unexpected type.");St(t===Nr||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Gr=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,St(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),zr(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Br},set:function(t){Br=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return br(e)?this:".priority"===fr(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=fr(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(St(".priority"!==r||1===pr(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(dr(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Hr(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?xn(this.value_):this.value_,this.lazyHash_=pn(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(St(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return St(i>=0,"Unknown leaf type: "+n),St(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var $r,Qr,Yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Cn(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return xr.MIN},e.prototype.maxPost=function(){return new xr(Sn,new Gr("[PRIORITY-POST]",Wr))},e.prototype.makePost=function(t,e){var n=Kr(t);return new xr(e,new Gr("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Dr),Xr=new Yr,Jr=Math.log(2),Zr=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Jr,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ti=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Fr(a,o.node,Fr.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Fr(a,o.node,Fr.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Fr(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Fr.BLACK):(s(h,Fr.BLACK),s(h,Fr.RED))}return o}(new Zr(t.length));return new jr(r||e,o)},ei={},ni=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return St(ei&&Xr,"ChildrenNode.ts has not been loaded"),$r=$r||new t({".priority":ei},{".priority":Xr})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=ae(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof jr?e:null},t.prototype.hasIndex=function(t){return oe(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){St(e!==Lr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(xr.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?ti(i,e.getCompare()):ei;var u=e.toString(),c=dt({},this.indexSet_);c[u]=e;var l=dt({},this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(ue(this.indexes_,(function(t,i){var o=ae(r.indexSet_,i);if(St(o,"Missing index implementation for "+i),t===ei){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(xr.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),ti(a,o.getCompare())}return ei}var c=n.get(e.name),l=t;return c&&(l=l.remove(new xr(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(ue(this.indexes_,(function(t){if(t===ei)return t;var r=n.get(e.name);return r?t.remove(new xr(e.name,r)):t})),this.indexSet_)},t}(),ri=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&zr(this.priorityNode_),this.children_.isEmpty()&&St(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Qr||(Qr=new t(new jr(Vr),null,ni.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Qr},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Qr:e},t.prototype.getChild=function(t){var e=fr(t);return null===e?this:this.getImmediateChild(e).getChild(dr(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(St(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new xr(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Qr:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=fr(t);if(null===n)return e;St(".priority"!==fr(t)||1===pr(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(dr(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xr,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Hr(this.getPriority().val())+":"),this.forEachChild(Xr,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":pn(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new xr(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new xr(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new xr(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,xr.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,xr.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ii?-1:0},t.prototype.withIndex=function(e){if(e===Lr||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Lr||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xr),r=e.getIterator(Xr),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Lr?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ii=new(function(t){function e(){return t.call(this,new jr(Vr),ri.EMPTY_NODE,ni.Default)||this}return pt(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ri.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ri));Object.defineProperties(xr,{MIN:{value:new xr(En,ri.EMPTY_NODE)},MAX:{value:new xr(Sn,ii)}}),Or.__EMPTY_NODE=ri.EMPTY_NODE,Gr.__childrenNodeConstructor=ri,Nr=ii,function(t){Wr=t}(ii);function oi(t,e){if(void 0===e&&(e=null),null===t)return ri.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),St(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Gr(t,oi(e));if(t instanceof Array){var n=ri.EMPTY_NODE;return Rn(t,(function(e,r){if(oe(t,e)&&"."!==e.substring(0,1)){var i=oi(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(oi(e))}var r=[],i=!1;if(Rn(t,(function(t,e){if("."!==t.substring(0,1)){var n=oi(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new xr(t,n)))}})),0===r.length)return ri.EMPTY_NODE;var o=ti(r,qr,(function(t){return t.name}),Vr);if(i){var a=ti(r,Xr.getCompare());return new ri(o,oi(e),new ni({".priority":a},{".priority":Xr}))}return new ri(o,oi(e),ni.Default)}!function(t){Kr=t}(oi);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ai,si,ui=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,St(!br(e)&&".priority"!==fr(e),"Can't create PathIndex with empty path or .priority key"),n}return pt(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Cn(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oi(t),r=ri.EMPTY_NODE.updateChild(this.indexPath_,n);return new xr(e,r)},e.prototype.maxPost=function(){var t=ri.EMPTY_NODE.updateChild(this.indexPath_,ii);return new xr(Sn,t)},e.prototype.toString=function(){return gr(this.indexPath_,0).join("/")},e}(Dr),ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Cn(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return xr.MIN},e.prototype.maxPost=function(){return xr.MAX},e.prototype.makePost=function(t,e){var n=oi(t);return new xr(e,n)},e.prototype.toString=function(){return".value"},e}(Dr),li=new ci,hi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fi=(ai=0,si=[],function(t){var e,n=t===ai;ai=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=hi.charAt(t%64),t=Math.floor(t/64);St(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===si[e];e--)si[e]=0;si[e]++}else for(e=0;e<12;e++)si[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=hi.charAt(si[e]);return St(20===i.length,"nextPushId: Length should be 20."),i}),pi=function(t){if("2147483647"===t)return"-";var e=Mn(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Sn;var o=n[i],a=hi.charAt(hi.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},di=function(t){if("-2147483648"===t)return En;var e=Mn(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=hi.charAt(hi.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function vi(t){return{type:"value",snapshotNode:t}}function gi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function mi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function yi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var bi=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){St(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(mi(e,a)):St(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(gi(e,n)):o.trackChildChange(yi(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xr,(function(t,r){e.hasChild(t)||n.trackChildChange(mi(t,r))})),e.isLeafNode()||e.forEachChild(Xr,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(yi(e,r,i))}else n.trackChildChange(gi(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ri.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_i=function(){function t(e){this.indexedFilter_=new bi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new xr(e,n))||(n=ri.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ri.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ri.EMPTY_NODE);var i=this;return e.forEachChild(Xr,(function(t,e){i.matches(new xr(t,e))||(r=r.updateImmediateChild(t,ri.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),wi=function(){function t(t){this.rangedFilter_=new _i(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new xr(e,n))||(n=ri.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ri.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ri.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ri.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,ri.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;St(s.numChildren()===this.limit_,"");var u=new xr(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(yi(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(mi(e,h));var d=s.updateImmediateChild(e,ri.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(gi(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(mi(c.name,c.node)),i.trackChildChange(gi(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,ri.EMPTY_NODE)):t},t}(),Ii=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xr}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return St(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return St(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:En},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return St(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return St(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sn},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return St(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xr},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ti(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ei(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Si(t,e){var n=t.copy();return n.index_=e,n}function Ci(t){var e,n={};return t.isDefault()||(t.index_===Xr?e="$priority":t.index_===li?e="$value":t.index_===Lr?e="$key":(St(t.index_ instanceof ui,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=ee(e),t.startSet_&&(n.startAt=ee(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+ee(t.indexStartName_))),t.endSet_&&(n.endAt=ee(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+ee(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function ki(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xr&&(e.i=t.index_.toString()),e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ni=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=bn("p:rest:"),o.listens_={},o}return pt(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(St(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=Ci(t._queryParams);this.restRequest_(a+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),ae(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ci(t._queryParams),r=t._path.toString(),i=new Ot;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=bt(i,2),a=o[0],s=o[1];a&&a.accessToken&&(e.auth=a.accessToken),s&&s.token&&(e.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+le(e);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=te(c.responseText)}catch(t){In("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&In("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()}))},e}(sr),Ai=function(){function t(){this.rootNode_=ri.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Pi(){return{value:null,children:new Map}}function Ri(t,e,n){if(br(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=fr(e);t.children.has(r)||t.children.set(r,Pi()),Ri(t.children.get(r),e=dr(e),n)}}function xi(t,e){if(br(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xr,(function(e,n){Ri(t,new lr(e),n)})),xi(t,e)}if(t.children.size>0){var r=fr(e);if(e=dr(e),t.children.has(r))xi(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function Di(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,(function(t,r){Di(r,new lr(e.toString()+"/"+t),n)}))}var Oi,Li=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=dt({},t);return this.last_&&Rn(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Mi=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Li(t);var n=1e4+2e4*Math.random();Un(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Rn(e,(function(e,i){i>0&&oe(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Un(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fi(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Oi||(Oi={}));var Ui,ji=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Oi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(br(this.path)){if(null!=this.affectedTree.value)return St(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lr(e));return new t(hr(),n,this.revert)}return St(fr(this.path)===e,"operationForChild called for unrelated child."),new t(dr(this.path),this.affectedTree,this.revert)},t}(),qi=function(){function t(t,e){this.source=t,this.path=e,this.type=Oi.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return br(this.path)?new t(this.source,hr()):new t(this.source,dr(this.path))},t}(),Vi=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Oi.OVERWRITE}return t.prototype.operationForChild=function(e){return br(this.path)?new t(this.source,hr(),this.snap.getImmediateChild(e)):new t(this.source,dr(this.path),this.snap)},t}(),Bi=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Oi.MERGE}return t.prototype.operationForChild=function(e){if(br(this.path)){var n=this.children.subtree(new lr(e));return n.isEmpty()?null:n.value?new Vi(this.source,hr(),n.value):new t(this.source,hr(),n)}return St(fr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,dr(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ki=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(br(t))return this.isFullyInitialized()&&!this.filtered_;var e=fr(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Wi=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hi(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Ct("Should only compare child_ events.");var r=new xr(e.childName,e.snapshotNode),i=new xr(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function zi(t,e){return{eventCache:t,serverCache:e}}function Gi(t,e,n,r){return zi(new Ki(e,n,r),t.serverCache)}function $i(t,e,n,r){return zi(t.eventCache,new Ki(e,n,r))}function Qi(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Yi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xi=function(){function t(t,e){void 0===e&&(Ui||(Ui=new jr(kn)),e=Ui),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return Rn(e,(function(t,e){n=n.set(new lr(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:hr(),value:this.value};if(br(t))return null;var n=fr(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(dr(t),e);return null!=i?{path:yr(new lr(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(br(e))return this;var n=fr(e),r=this.children.get(n);return null!==r?r.subtree(dr(e)):new t(null)},t.prototype.set=function(e,n){if(br(e))return new t(n,this.children);var r=fr(e),i=(this.children.get(r)||new t(null)).set(dr(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(br(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=fr(e),r=this.children.get(n);if(r){var i=r.remove(dr(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(br(t))return this.value;var e=fr(t),n=this.children.get(e);return n?n.get(dr(t)):null},t.prototype.setTree=function(e,n){if(br(e))return n;var r=fr(e),i=(this.children.get(r)||new t(null)).setTree(dr(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(hr(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(yr(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,hr(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(br(t))return null;var i=fr(t),o=this.children.get(i);return o?o.findOnPath_(dr(t),yr(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,hr(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(br(e))return this;this.value&&r(n,this.value);var i=fr(e),o=this.children.get(i);return o?o.foreachOnPath_(dr(e),yr(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(hr(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(yr(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Ji=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Xi(null))},t}();function Zi(t,e,n){if(br(e))return new Ji(new Xi(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=_r(i,e);return o=o.updateChild(a,n),new Ji(t.writeTree_.set(i,o))}var s=new Xi(n),u=t.writeTree_.setTree(e,s);return new Ji(u)}function to(t,e,n){var r=t;return Rn(n,(function(t,n){r=Zi(r,yr(e,t),n)})),r}function eo(t,e){if(br(e))return Ji.empty();var n=t.writeTree_.setTree(e,new Xi(null));return new Ji(n)}function no(t,e){return null!=ro(t,e)}function ro(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(_r(n.path,e)):null}function io(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xr,(function(t,n){e.push(new xr(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new xr(t,n.value))})),e}function oo(t,e){if(br(e))return t;var n=ro(t,e);return new Ji(null!=n?new Xi(n):t.writeTree_.subtree(e))}function ao(t){return t.writeTree_.isEmpty()}function so(t,e){return uo(hr(),t.writeTree_,e)}function uo(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(St(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=uo(yr(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(yr(t,".priority"),r)),n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function co(t,e){return To(e,t)}function lo(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));St(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=t.allWrites.length-1;i&&a>=0;){var s=t.allWrites[a];s.visible&&(a>=n&&ho(s,r.path)?i=!1:Tr(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(t){t.visibleWrites=po(t.allWrites,fo,hr()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=eo(t.visibleWrites,r.path):Rn(r.children,(function(e){t.visibleWrites=eo(t.visibleWrites,yr(r.path,e))}));return!0}return!1}function ho(t,e){if(t.snap)return Tr(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Tr(yr(t.path,n),e))return!0;return!1}function fo(t){return t.visible}function po(t,e,n){for(var r=Ji.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)Tr(n,a)?r=Zi(r,s=_r(n,a),o.snap):Tr(a,n)&&(s=_r(a,n),r=Zi(r,hr(),o.snap.getChild(s)));else{if(!o.children)throw Ct("WriteRecord should have .snap or .children");if(Tr(n,a))r=to(r,s=_r(n,a),o.children);else if(Tr(a,n))if(br(s=_r(a,n)))r=to(r,hr(),o.children);else{var u=ae(o.children,fr(s));if(u){var c=u.getChild(dr(s));r=Zi(r,hr(),c)}}}}}return r}function vo(t,e,n,r,i){if(r||i){var o=oo(t.visibleWrites,e);if(!i&&ao(o))return n;if(i||null!=n||no(o,hr())){var a=po(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Tr(t.path,e)||Tr(e,t.path))}),e);return so(a,n||ri.EMPTY_NODE)}return null}var s=ro(t.visibleWrites,e);if(null!=s)return s;var u=oo(t.visibleWrites,e);return ao(u)?n:null!=n||no(u,hr())?so(u,n||ri.EMPTY_NODE):null}function go(t,e,n,r){return vo(t.writeTree,t.treePath,e,n,r)}function mo(t,e){return function(t,e,n){var r=ri.EMPTY_NODE,i=ro(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xr,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=oo(t.visibleWrites,e);return n.forEachChild(Xr,(function(t,e){var n=so(oo(o,new lr(t)),e);r=r.updateImmediateChild(t,n)})),io(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return io(oo(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function yo(t,e,n,r){return function(t,e,n,r,i){St(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=yr(e,n);if(no(t.visibleWrites,o))return null;var a=oo(t.visibleWrites,o);return ao(a)?i.getChild(n):so(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function bo(t,e){return function(t,e){return ro(t.visibleWrites,e)}(t.writeTree,yr(t.treePath,e))}function _o(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=oo(t.visibleWrites,e),c=ro(u,hr());if(null!=c)s=c;else{if(null==n)return[];s=so(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),p=f.getNext();p&&l.length<i;)0!==h(p,r)&&l.push(p),p=f.getNext();return l}(t.writeTree,t.treePath,e,n,r,i,o)}function wo(t,e,n){return function(t,e,n,r){var i=yr(e,n),o=ro(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?so(oo(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Io(t,e){return To(yr(t.treePath,e),t.writeTree)}function To(t,e){return{treePath:t,writeTree:e}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Eo=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;St("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),St(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,yi(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,mi(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,gi(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Ct("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,yi(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),So=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Co=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ki(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wo(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yi(this.viewCache_),i=_o(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ko(t,e,n,r,i){var o,a,s=new Eo;if(n.type===Oi.OVERWRITE){var u=n;u.source.fromUser?o=Po(t,e,u.path,u.snap,r,i,s):(St(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!br(u.path),o=Ao(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Oi.MERGE){var c=n;c.source.fromUser?o=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=yr(n,r);Ro(e,fr(c))&&(s=Po(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=yr(n,r);Ro(e,fr(c))||(s=Po(t,s,c,u,i,o,a))})),s}(t,e,c.path,c.children,r,i,s):(St(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Do(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Oi.ACK_USER_WRITE){var l=n;o=l.revert?function(t,e,n,r,i,o){var a;if(null!=bo(r,n))return e;var s=new Co(r,e,i),u=e.eventCache.getNode(),c=void 0;if(br(n)||".priority"===fr(n)){var l=void 0;if(e.serverCache.isFullyInitialized())l=go(r,Yi(e));else{var h=e.serverCache.getNode();St(h instanceof ri,"serverChildren would be complete if leaf node"),l=mo(r,h)}l=l,c=t.filter.updateFullNode(u,l,o)}else{var f=fr(n),p=wo(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?t.filter.updateChild(u,f,p,dr(n),s,o):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,ri.EMPTY_NODE,dr(n),s,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=go(r,Yi(e))).isLeafNode()&&(c=t.filter.updateFullNode(c,a,o))}return a=e.serverCache.isFullyInitialized()||null!=bo(r,hr()),Gi(e,c,a,t.filter.filtersNodes())}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e,l.path,r,i,s):function(t,e,n,r,i,o,a){if(null!=bo(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(br(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ao(t,e,n,u.getNode().getChild(n),i,o,s,a);if(br(n)){var c=new Xi(null);return u.getNode().forEachChild(Lr,(function(t,e){c=c.set(new lr(t),e)})),Do(t,e,n,c,i,o,s,a)}return e}var l=new Xi(null);return r.foreach((function(t,e){var r=yr(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Do(t,e,n,l,i,o,s,a)}(t,e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Oi.LISTEN_COMPLETE)throw Ct("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache,a=$i(e,o.getNode(),o.isFullyInitialized()||br(n),o.isFiltered());return No(t,a,n,r,So,i)}(t,e,n.path,r,s)}var h=s.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qi(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(vi(Qi(e)))}}(e,o,h),{viewCache:o,changes:h}}function No(t,e,n,r,i,o){var a=e.eventCache;if(null!=bo(r,n))return e;var s=void 0,u=void 0;if(br(n))if(St(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var c=Yi(e),l=mo(r,c instanceof ri?c:ri.EMPTY_NODE);s=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{var h=go(r,Yi(e));s=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var f=fr(n);if(".priority"===f){St(1===pr(n),"Can't have a priority with additional path components");var p=a.getNode(),d=yo(r,n,p,u=e.serverCache.getNode());s=null!=d?t.filter.updatePriority(p,d):a.getNode()}else{var v=dr(n),g=void 0;if(a.isCompleteForChild(f)){u=e.serverCache.getNode();var m=yo(r,n,a.getNode(),u);g=null!=m?a.getNode().getImmediateChild(f).updateChild(v,m):a.getNode().getImmediateChild(f)}else g=wo(r,f,e.serverCache);s=null!=g?t.filter.updateChild(a.getNode(),f,g,v,i,o):a.getNode()}}return Gi(e,s,a.isFullyInitialized()||br(n),t.filter.filtersNodes())}function Ao(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(br(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=fr(n);if(!c.isCompleteForPath(n)&&pr(n)>1)return e;var p=dr(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),d):l.updateChild(c.getNode(),f,d,p,So,null)}var v=$i(e,u,c.isFullyInitialized()||br(n),l.filtersNodes());return No(t,v,n,i,new Co(i,v,o),s)}function Po(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new Co(i,e,o);if(br(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=Gi(e,u,!0,t.filter.filtersNodes());else{var h=fr(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=Gi(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=dr(n),p=c.getNode().getImmediateChild(h),d=void 0;if(br(f))d=r;else{var v=l.getCompleteChild(h);d=null!=v?".priority"===vr(f)&&v.getChild(mr(f)).isEmpty()?v:v.updateChild(f,r):ri.EMPTY_NODE}if(p.equals(d))s=e;else s=Gi(e,t.filter.updateChild(c.getNode(),h,d,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function Ro(t,e){return t.eventCache.isCompleteForChild(e)}function xo(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Do(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=br(n)?r:new Xi(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=xo(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ao(t,c,new lr(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=xo(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ao(t,c,new lr(n),h,i,o,a,s)}})),c}var Oo,Lo=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new bi(r.getIndex()),o=(n=r).loadsAllData()?new bi(n.getIndex()):n.hasLimit()?new wi(n):new _i(n);this.processor_=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(ri.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(ri.EMPTY_NODE,s.getNode(),null),l=new Ki(u,a.isFullyInitialized(),i.filtersNodes()),h=new Ki(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=zi(h,l),this.eventGenerator_=new Wi(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Mo(t,e){var n=Yi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!br(e)&&!n.getImmediateChild(fr(e)).isEmpty())?n.getChild(e):null}function Fo(t){return 0===t.eventRegistrations_.length}function Uo(t,e,n){var r=[];if(n){St(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function jo(t,e,n,r){e.type===Oi.MERGE&&null!==e.source.queryId&&(St(Yi(t.viewCache_),"We should always have a full cache before handling merges"),St(Qi(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=t.viewCache_,s=ko(t.processor_,a,e,n,r);return i=t.processor_,o=s.viewCache,St(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),St(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),St(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,qo(t,s.changes,s.viewCache.eventCache.getNode(),null)}function qo(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Hi(t,i,"child_removed",e,r,n),Hi(t,i,"child_added",e,r,n),Hi(t,i,"child_moved",o,r,n),Hi(t,i,"child_changed",e,r,n),Hi(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vo,Bo=function(){this.views=new Map};function Ko(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return St(null!=s,"SyncTree gave us an op for an invalid query."),jo(s,e,n,r)}var u=[];try{for(var c=yt(t.views.values()),l=c.next();!l.done;l=c.next()){s=l.value;u=u.concat(jo(s,e,n,r))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function Wo(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=go(n,i?r:null),u=!1;s?u=!0:r instanceof ri?(s=mo(n,r),u=!1):(s=ri.EMPTY_NODE,u=!1);var c=zi(new Ki(s,u,!1),new Ki(r,i,!1));return new Lo(e,c)}return a}function Ho(t,e,n,r,i,o){var a=Wo(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xr,(function(t,e){r.push(gi(t,e))})),n.isFullyInitialized()&&r.push(vi(n.getNode())),qo(t,r,n.getNode(),e)}(a,n)}function zo(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=Xo(t);if("default"===a)try{for(var l=yt(t.views.entries()),h=l.next();!h.done;h=l.next()){var f=bt(h.value,2),p=f[0],d=f[1];u=u.concat(Uo(d,n,r)),Fo(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(Uo(d,n,r)),Fo(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return c&&!Xo(t)&&s.push(new(St(Oo,"Reference.ts has not been loaded"),Oo)(e._repo,e._path)),{removed:s,events:u}}function Go(t){var e,n,r=[];try{for(var i=yt(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function $o(t,e){var n,r,i=null;try{for(var o=yt(t.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||Mo(s,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Qo(t,e){if(e._queryParams.loadsAllData())return Jo(t);var n=e._queryIdentifier;return t.views.get(n)}function Yo(t,e){return null!=Qo(t,e)}function Xo(t){return null!=Jo(t)}function Jo(t){var e,n;try{for(var r=yt(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zo=1,ta=function(t){this.listenProvider_=t,this.syncPointTree_=new Xi(null),this.pendingWriteTree_={visibleWrites:Ji.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function ea(t,e,n,r,i){return function(t,e,n,r,i){St(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zi(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?ca(t,new Vi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function na(t,e,n,r){!function(t,e,n,r){St(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=to(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Xi.fromObject(n);return ca(t,new Bi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function ra(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(lo(t.pendingWriteTree_,e)){var i=new Xi(null);return null!=r.snap?i=i.set(hr(),!0):Rn(r.children,(function(t){i=i.set(new lr(t),!0)})),ca(t,new ji(r.path,i,n))}return[]}function ia(t,e,n){return ca(t,new Vi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function oa(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||Yo(o,e))){var s=zo(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return Xo(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&Xo(e))return[Jo(e)];var r=[];return e&&(r=Go(e)),Rn(n,(function(t,e){r=r.concat(e)})),r}))}(h),p=0;p<f.length;++p){var d=f[p],v=d.query,g=fa(t,d);t.listenProvider_.startListening(ya(v),pa(t,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(ya(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(da(e));t.listenProvider_.stopListening(ya(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=da(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function aa(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=_r(t,r);i=i||$o(e,n),o=o||Xo(e)}));var a,s=t.syncPointTree_.get(r);(s?(o=o||Xo(s),i=i||$o(s,hr())):(s=new Bo,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=ri.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=$o(e,hr());n&&(i=i.updateImmediateChild(t,n))})));var u=Yo(s,e);if(!u&&!e._queryParams.loadsAllData()){var c=da(e);St(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=Zo++;t.queryToTagMap.set(c,l),t.tagToQueryMap.set(l,c)}var h=Ho(s,e,n,co(t.pendingWriteTree_,r),i,a);if(!u&&!o){var f=Qo(s,e);h=h.concat(function(t,e,n){var r=e._path,i=pa(t,e),o=fa(t,n),a=t.listenProvider_.startListening(ya(e),i,o.hashFn,o.onComplete),s=t.syncPointTree_.subtree(r);if(i)St(!Xo(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!br(t)&&e&&Xo(e))return[Jo(e).query];var r=[];return e&&(r=r.concat(Go(e).map((function(t){return t.query})))),Rn(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];t.listenProvider_.stopListening(ya(l),pa(t,l))}return a}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e,f))}return h}function sa(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=$o(n,_r(t,e));if(r)return r}));return vo(r,e,i,n,!0)}function ua(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=_r(t,n);r=r||$o(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||$o(i,hr()):(i=new Bo,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Ki(r,!0,!1):null;return function(t){return Qi(t.viewCache_)}(Wo(i,e,co(t.pendingWriteTree_,e._path),o?a.getNode():ri.EMPTY_NODE,o))}function ca(t,e){return la(e,t.syncPointTree_,null,co(t.pendingWriteTree_,hr()))}function la(t,e,n,r){if(br(t.path))return ha(t,e,n,r);var i=e.get(hr());null==n&&null!=i&&(n=$o(i,hr()));var o=[],a=fr(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=Io(r,a);o=o.concat(la(s,u,c,l))}return i&&(o=o.concat(Ko(i,t,r,n))),o}function ha(t,e,n,r){var i=e.get(hr());null==n&&null!=i&&(n=$o(i,hr()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=Io(r,e),u=t.operationForChild(e);u&&(o=o.concat(ha(u,i,a,s)))})),i&&(o=o.concat(Ko(i,t,r,n))),o}function fa(t,e){var n=e.query,r=pa(t,n);return{hashFn:function(){var t=function(t){return t.viewCache_.serverCache.getNode()}(e)||ri.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=va(t,n);if(r){var i=ga(r),o=i.path,a=i.queryId,s=_r(o,e);return ma(t,o,new qi(Fi(a),s))}return[]}(t,n._path,r):function(t,e){return ca(t,new qi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return oa(t,n,null,i)}}}function pa(t,e){var n=da(e);return t.queryToTagMap.get(n)}function da(t){return t._path.toString()+"$"+t._queryIdentifier}function va(t,e){return t.tagToQueryMap.get(e)}function ga(t){var e=t.indexOf("$");return St(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lr(t.substr(0,e))}}function ma(t,e,n){var r=t.syncPointTree_.get(e);return St(r,"Missing sync point for query tag that we're tracking"),Ko(r,n,co(t.pendingWriteTree_,e),null)}function ya(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(St(Vo,"Reference.ts has not been loaded"),Vo)(t._repo,t._path):t}var ba=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),_a=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=yr(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return sa(this.syncTree_,this.path_)},t}(),wa=function(t,e,n){return t&&"object"==typeof t?(St(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Ia(t[".sv"],e,n):"object"==typeof t[".sv"]?Ta(t[".sv"],e):void St(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Ia=function(t,e,n){if("timestamp"===t)return n.timestamp;St(!1,"Unexpected server value: "+t)},Ta=function(t,e,n){t.hasOwnProperty("increment")||St(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&St(!1,"Unexpected increment value: "+r);var i=e.node();if(St(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},Ea=function(t,e,n,r){return Ca(e,new _a(n,t),r)},Sa=function(t,e,n){return Ca(t,new ba(e),n)};function Ca(t,e,n){var r,i=t.getPriority().val(),o=wa(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=wa(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Gr(s,oi(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Gr(o))),u.forEachChild(Xr,(function(t,i){var o=Ca(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ka=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Na(t,e){for(var n=e instanceof lr?e:new lr(e),r=t,i=fr(n);null!==i;){var o=ae(r.node.children,i)||{children:{},childCount:0};r=new ka(i,r,o),i=fr(n=dr(n))}return r}function Aa(t){return t.node.value}function Pa(t,e){t.node.value=e,La(t)}function Ra(t){return t.node.childCount>0}function xa(t,e){Rn(t.node.children,(function(n,r){e(new ka(n,t,r))}))}function Da(t,e,n,r){n&&!r&&e(t),xa(t,(function(t){Da(t,e,!0,r)})),n&&r&&e(t)}function Oa(t){return new lr(null===t.parent?t.name:Oa(t.parent)+"/"+t.name)}function La(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Aa(t)&&!Ra(t)}(n),i=oe(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,La(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,La(t))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t.parent,t.name,t)}var Ma=/[\[\].#$\/\u0000-\u001F\u007F]/,Fa=/[\[\].#$\u0000-\u001F\u007F]/,Ua=10485760,ja=function(t){return"string"==typeof t&&0!==t.length&&!Ma.test(t)},qa=function(t){return"string"==typeof t&&0!==t.length&&!Fa.test(t)},Va=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Tn(t)||t&&"object"==typeof t&&oe(t,".sv")},Ba=function(t,e,n,r){r&&void 0===e||Ka(ge(t,"value"),e,n)},Ka=function(t,e,n){var r=n instanceof lr?new Er(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Cr(r));if("function"==typeof e)throw new Error(t+"contains a function "+Cr(r)+" with contents = "+e.toString());if(Tn(e))throw new Error(t+"contains "+e.toString()+" "+Cr(r));if("string"==typeof e&&e.length>Ua/3&&_e(e)>Ua)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Cr(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Rn(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ja(e)))throw new Error(t+" contains an invalid key ("+e+") "+Cr(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=_e(e),Sr(t)}(r,e),Ka(t,n,r),s=(a=r).parts_.pop(),a.byteLength_-=_e(s),a.parts_.length>0&&(a.byteLength_-=1)})),i&&o)throw new Error(t+' contains ".value" child '+Cr(r)+" in addition to actual children.")}},Wa=function(t,e,n,r){if(!r||void 0!==e){var i=ge(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];Rn(e,(function(t,e){var r=new lr(t);if(Ka(i,e,yr(n,r)),".priority"===vr(r)&&!Va(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=gr(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ja(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(wr);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&Tr(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},Ha=function(t,e,n){if(!n||void 0!==e){if(Tn(e))throw new Error(ge(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Va(e))throw new Error(ge(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},za=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ge(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ga=function(t,e,n,r){if(!(r&&void 0===n||ja(n)))throw new Error(ge(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},$a=function(t,e,n,r){if(!(r&&void 0===n||qa(n)))throw new Error(ge(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qa=function(t,e){if(".info"===fr(e))throw new Error(t+" failed = Can't modify data under /.info/")},Ya=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ja(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qa(t)}(n))throw new Error(ge(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Xa=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(ge(t,e)+"must be a boolean.")},Ja=function(){this.eventLists_=[],this.recursionDepth_=0};function Za(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ir(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function ts(t,e,n){Za(t,n),ns(t,(function(t){return Ir(t,e)}))}function es(t,e,n){Za(t,n),ns(t,(function(t){return Tr(t,e)||Tr(e,t)}))}function ns(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(rs(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function rs(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();vn&&yn("event: "+n.toString()),Fn(r)}}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var is="repo_interrupt",os=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ja,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pi(),this.transactionQueueTree_=new ka,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function as(t,e,n){if(t.stats_=Xn(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ni(t.repoInfo_,(function(e,n,r,i){cs(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return ls(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ee(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Rr(t.repoInfo_,e,(function(e,n,r,i){cs(t,e,n,r,i)}),(function(e){ls(t,e)}),(function(e){!function(t,e){Rn(e,(function(e,n){hs(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new Mi(t.stats_,t.server_)},o=r.toString(),Yn[o]||(Yn[o]=i()),Yn[o]),t.infoData_=new Ai,t.infoSyncTree_=new ta({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=ia(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),hs(t,"connected",!1),t.serverSyncTree_=new ta({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);es(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function ss(t){var e=t.infoData_.getNode(new lr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function us(t){return(e=(e={timestamp:ss(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function cs(t,e,n,r,i){t.dataUpdateCount++;var o=new lr(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var s=ue(n,(function(t){return oi(t)}));a=function(t,e,n,r){var i=va(t,r);if(i){var o=ga(i),a=o.path,s=o.queryId,u=_r(a,e),c=Xi.fromObject(n);return ma(t,a,new Bi(Fi(s),u,c))}return[]}(t.serverSyncTree_,o,s,i)}else{var u=oi(n);a=function(t,e,n,r){var i=va(t,r);if(null!=i){var o=ga(i),a=o.path,s=o.queryId,u=_r(a,e);return ma(t,a,new Vi(Fi(s),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var c=ue(n,(function(t){return oi(t)}));a=function(t,e,n){var r=Xi.fromObject(n);return ca(t,new Bi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{var l=oi(n);a=ia(t.serverSyncTree_,o,l)}var h=o;a.length>0&&(h=Is(t,o)),es(t.eventQueue_,h,a)}function ls(t,e){hs(t,"connected",e),!1===e&&function(t){ys(t,"onDisconnectEvents");var e=us(t),n=Pi();Di(t.onDisconnect_,hr(),(function(r,i){var o=Ea(r,i,t.serverSyncTree_,e);Ri(n,r,o)}));var r=[];Di(n,hr(),(function(e,n){r=r.concat(ia(t.serverSyncTree_,e,n));var i=ks(t,e);Is(t,i)})),t.onDisconnect_=Pi(),es(t.eventQueue_,hr(),r)}(t)}function hs(t,e,n){var r=new lr("/.info/"+e),i=oi(n);t.infoData_.updateSnapshot(r,i);var o=ia(t.infoSyncTree_,r,i);es(t.eventQueue_,r,o)}function fs(t){return t.nextWriteId_++}function ps(t,e,n,r,i){ys(t,"set",{path:e.toString(),value:n,priority:r});var o=us(t),a=oi(n,r),s=sa(t.serverSyncTree_,e),u=Sa(a,s,o),c=fs(t),l=ea(t.serverSyncTree_,e,u,c,!0);Za(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||In("set at "+e+" failed: "+n);var a=ra(t.serverSyncTree_,c,!o);es(t.eventQueue_,e,a),bs(t,i,n,r)}));var h=ks(t,e);Is(t,h),es(t.eventQueue_,h,[])}function ds(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&xi(t.onDisconnect_,e),bs(t,n,r,i)}))}function vs(t,e,n,r){var i=oi(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Ri(t.onDisconnect_,e,i),bs(t,r,n,o)}))}function gs(t,e,n){var r;r=".info"===fr(e._path)?oa(t.infoSyncTree_,e,n):oa(t.serverSyncTree_,e,n),ts(t.eventQueue_,e._path,r)}function ms(t){t.persistentConnection_&&t.persistentConnection_.interrupt(is)}function ys(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),yn.apply(void 0,_t([r],bt(e)))}function bs(t,e,n,r){e&&Fn((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function _s(t,e,n){return sa(t.serverSyncTree_,e,n)||ri.EMPTY_NODE}function ws(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Cs(t,e),Aa(e)){var n=Es(t,e);St(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=_s(t,e,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];St(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=_r(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;t.server_.put(h.toString(),l,(function(r){ys(t,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(ra(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);Cs(t,Na(t.transactionQueueTree_,e)),ws(t,t.transactionQueueTree_),es(t.eventQueue_,e,i);for(s=0;s<o.length;s++)Fn(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{In("transaction at "+h.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}Is(t,e)}}),a)}(t,Oa(e),n)}else Ra(e)&&xa(e,(function(e){ws(t,e)}))}function Is(t,e){var n=Ts(t,e),r=Oa(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})),a=o.map((function(t){return t.currentWriteId})),s=function(o){var s,u,c=e[o],l=_r(n,c.path),h=!1;if(St(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(ra(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,s="maxretry",i=i.concat(ra(t.serverSyncTree_,c.currentWriteId,!0));else{var f=_s(t,c.path,a);c.currentInputSnapshot=f;var p=e[o].update(f.val());if(void 0!==p){Ka("transaction failed: Data returned ",p,c.path);var d=oi(p);"object"==typeof p&&null!=p&&oe(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=c.currentWriteId,g=us(t),m=Sa(d,f,g);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=m,c.currentWriteId=fs(t),a.splice(a.indexOf(v),1),i=(i=i.concat(ea(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(ra(t.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(ra(t.serverSyncTree_,c.currentWriteId,!0))}es(t.eventQueue_,n,i),i=[],h&&(e[o].status=2,u=e[o].unwatcher,setTimeout(u,Math.floor(0)),e[o].onComplete&&("nodata"===s?r.push((function(){return e[o].onComplete(null,!1,e[o].currentInputSnapshot)})):r.push((function(){return e[o].onComplete(new Error(s),!1,null)}))))},u=0;u<e.length;u++)s(u);Cs(t,t.transactionQueueTree_);for(u=0;u<r.length;u++)Fn(r[u]);ws(t,t.transactionQueueTree_)}(t,Es(t,n),r),r}function Ts(t,e){var n,r=t.transactionQueueTree_;for(n=fr(e);null!==n&&void 0===Aa(r);)r=Na(r,n),n=fr(e=dr(e));return r}function Es(t,e){var n=[];return Ss(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Ss(t,e,n){var r=Aa(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);xa(e,(function(e){Ss(t,e,n)}))}function Cs(t,e){var n=Aa(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Pa(e,n.length>0?n:void 0)}xa(e,(function(e){Cs(t,e)}))}function ks(t,e){var n=Oa(Ts(t,e)),r=Na(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){Ns(t,e)})),Ns(t,r),Da(r,(function(e){Ns(t,e)})),n}function Ns(t,e){var n=Aa(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(St(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(St(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(ra(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Pa(e,void 0):n.length=o+1,es(t.eventQueue_,Oa(e),i);for(a=0;a<r.length;a++)Fn(r[a])}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var As=function(t,e){var n=Ps(t),r=n.namespace;"firebase.com"===n.domain&&wn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||wn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&In("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new zn(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new lr(n.pathString)}},Ps=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=yt(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):In("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(c=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},Rs=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+ee(this.snapshot.exportVal())},t}(),xs=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ds=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return St(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Os=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new Ot;return ds(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Qa("OnDisconnect.remove",this._path);var t=new Ot;return vs(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Qa("OnDisconnect.set",this._path),Ba("OnDisconnect.set",t,this._path,!1);var e=new Ot;return vs(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Qa("OnDisconnect.setWithPriority",this._path),Ba("OnDisconnect.setWithPriority",t,this._path,!1),Ha("OnDisconnect.setWithPriority",e,!1);var n=new Ot;return function(t,e,n,r,i){var o=oi(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Ri(t.onDisconnect_,e,o),bs(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Qa("OnDisconnect.update",this._path),Wa("OnDisconnect.update",t,this._path,!1);var e=new Ot;return function(t,e,n,r){if(se(n))return yn("onDisconnect().update() called with empty data.  Don't do anything."),void bs(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&Rn(n,(function(n,r){var i=oi(r);Ri(t.onDisconnect_,yr(e,n),i)})),bs(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),Ls=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return br(this._path)?null:vr(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new js(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=ki(this._queryParams),e=An(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return ki(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Te(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ir(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ms(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Fs(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lr){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==En)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Sn)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Xr){if(null!=e&&!Va(e)||null!=n&&!Va(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(St(t.getIndex()instanceof ui||t.getIndex()===li,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Us(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var js=function(t){function e(e,n){return t.call(this,e,n,new Ii,!1)||this}return pt(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=mr(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ls),qs=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new lr(e),r=Ks(this.ref,e);return new t(this._node.getChild(n),r,Xr)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Ks(n.ref,r),Xr))}))},t.prototype.hasChild=function(t){var e=new lr(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Vs(t,e){return(t=Te(t))._checkNotDeleted("ref"),void 0!==e?Ks(t._root,e):t._root}function Bs(t,e){(t=Te(t))._checkNotDeleted("refFromURL");var n=As(e,t._repo.repoInfo_.nodeAdmin);Ya("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||wn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Vs(t,n.path.toString())}function Ks(t,e){var n,r,i,o;return null===fr((t=Te(t))._path)?(n="child",r="path",o=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),$a(n,r,i,o)):$a("child","path",e,!1),new js(t._repo,yr(t._path,e))}function Ws(t,e){t=Te(t),Qa("push",t._path),Ba("push",e,t._path,!0);var n,r=ss(t._repo),i=fi(r),o=Ks(t,i),a=Ks(t,i);return n=null!=e?zs(a,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function Hs(t){return Qa("remove",t._path),zs(t,null)}function zs(t,e){t=Te(t),Qa("set",t._path),Ba("set",e,t._path,!1);var n=new Ot;return ps(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Gs(t,e){t=Te(t),Qa("setPriority",t._path),Ha("setPriority",e,!1);var n=new Ot;return ps(t._repo,yr(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function $s(t,e,n){if(Qa("setWithPriority",t._path),Ba("setWithPriority",e,t._path,!1),Ha("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new Ot;return ps(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Qs(t,e){Wa("update",e,t._path,!1);var n=new Ot;return function(t,e,n,r){ys(t,"update",{path:e.toString(),value:n});var i=!0,o=us(t),a={};if(Rn(n,(function(n,r){i=!1,a[n]=Ea(yr(e,n),oi(r),t.serverSyncTree_,o)})),i)yn("update() called with empty data.  Don't do anything."),bs(0,r,"ok",void 0);else{var s=fs(t),u=na(t.serverSyncTree_,e,a,s);Za(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||In("update at "+e+" failed: "+n);var a=ra(t.serverSyncTree_,s,!o),u=a.length>0?Is(t,e):e;es(t.eventQueue_,u,a),bs(0,r,n,i)})),Rn(n,(function(n){var r=ks(t,yr(e,n));Is(t,r)})),es(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Ys(t){return function(t,e){var n=ua(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=oi(n).withIndex(e._queryParams.getIndex()),i=ia(t.serverSyncTree_,e._path,r);return ts(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return ys(t,"get for query "+ee(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Te(t))._repo,t).then((function(e){return new qs(e,new js(t._repo,t._path),t._queryParams.getIndex())}))}var Xs=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Rs("value",this,new qs(t.snapshotNode,new js(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new xs(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Js=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new xs(this,t,e):null},t.prototype.createEvent=function(t,e){St(null!=t.childName,"Child events should have a childName.");var n=Ks(new js(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Rs(t.type,this,new qs(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Zs(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){gs(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Ds(n,o||void 0),c="value"===e?new Xs(u):new Js(e,u);return function(t,e,n){var r;r=".info"===fr(e._path)?aa(t.infoSyncTree_,e,n):aa(t.serverSyncTree_,e,n),ts(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return gs(t._repo,t,c)}}function tu(t,e,n,r){return Zs(t,"value",e,n,r)}function eu(t,e,n,r){return Zs(t,"child_added",e,n,r)}function nu(t,e,n,r){return Zs(t,"child_changed",e,n,r)}function ru(t,e,n,r){return Zs(t,"child_moved",e,n,r)}function iu(t,e,n,r){return Zs(t,"child_removed",e,n,r)}function ou(t,e,n){var r=null,i=n?new Ds(n):null;"value"===e?r=new Xs(i):e&&(r=new Js(e,i)),gs(t._repo,t,r)}var au=function(){},su=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Ba("endAt",this._value,t._path,!0);var e=Ei(t._queryParams,this._value,this._key);if(Us(e),Fs(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ls(t._repo,t._path,e,t._orderByCalled)},e}(au);function uu(t,e){return Ga("endAt","key",e,!0),new su(t,e)}var cu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Ba("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===Lr?("string"==typeof n&&(n=di(n)),i=Ei(e,n,r)):i=Ei(e,n,null==r?En:di(r)),i.endBeforeSet_=!0,i);if(Us(o),Fs(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ls(t._repo,t._path,o,t._orderByCalled)},e}(au);function lu(t,e){return Ga("endBefore","key",e,!0),new cu(t,e)}var hu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Ba("startAt",this._value,t._path,!0);var e=Ti(t._queryParams,this._value,this._key);if(Us(e),Fs(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ls(t._repo,t._path,e,t._orderByCalled)},e}(au);function fu(t,e){return void 0===t&&(t=null),Ga("startAt","key",e,!0),new hu(t,e)}var pu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){Ba("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===Lr?("string"==typeof e&&(e=pi(e)),r=Ti(t,e,n)):r=Ti(t,e,null==n?Sn:pi(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Us(e),Fs(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ls(t._repo,t._path,e,t._orderByCalled)},e}(au);function du(t,e){return Ga("startAfter","key",e,!0),new pu(t,e)}var vu=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return pt(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ls(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(au);function gu(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vu(t)}var mu=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return pt(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ls(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(au);function yu(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new mu(t)}var bu=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return pt(e,t),e.prototype._apply=function(t){Ms(t,"orderByChild");var e=new lr(this._path);if(br(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ui(e),r=Si(t._queryParams,n);return Fs(r),new Ls(t._repo,t._path,r,!0)},e}(au);function _u(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return $a("orderByChild","path",t,!1),new bu(t)}var wu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._apply=function(t){Ms(t,"orderByKey");var e=Si(t._queryParams,Lr);return Fs(e),new Ls(t._repo,t._path,e,!0)},e}(au);function Iu(){return new wu}var Tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._apply=function(t){Ms(t,"orderByPriority");var e=Si(t._queryParams,Xr);return Fs(e),new Ls(t._repo,t._path,e,!0)},e}(au);function Eu(){return new Tu}var Su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._apply=function(t){Ms(t,"orderByValue");var e=Si(t._queryParams,li);return Fs(e),new Ls(t._repo,t._path,e,!0)},e}(au);function Cu(){return new Su}var ku=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return pt(e,t),e.prototype._apply=function(t){if(Ba("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new su(this._value,this._key)._apply(new hu(this._value,this._key)._apply(t))},e}(au);function Nu(t,e){return Ga("equalTo","key",e,!0),new ku(t,e)}function Au(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=Te(t);try{for(var a=yt(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}!function(t){St(!Oo,"__referenceConstructor has already been defined"),Oo=t}(js),function(t){St(!Vo,"__referenceConstructor has already been defined"),Vo=t}(js);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Pu={},Ru=!1;function xu(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||wn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yn("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=As(o,i),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=As(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new Vn(Vn.OWNER):new qn(t.name,t.options,e);Ya("Invalid Firebase Database URL",s),br(s.path)||wn("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=Pu[e.name];i||(i={},Pu[e.name]=i);var o=i[t.toURLString()];o&&wn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new os(t,Ru,n,r),i[t.toURLString()]=o,o}(u,t,l,new jn(t.name,n));return new Du(h,t)}var Du=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(as(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new js(this._repo,hr())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=Pu[e])&&n[t.key]===t||wn("Database "+e+"("+t.repoInfo_+") has already been deleted."),ms(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&wn("Cannot call "+t+" on a deleted database.")},t}();function Ou(t,e,n,r){void 0===r&&(r={}),(t=Te(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&wn("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&wn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Vn(Vn.OWNER);else if(r.mockUserToken){var a="string"==typeof r.mockUserToken?r.mockUserToken:Lt(r.mockUserToken,t.app.options.projectId);o=new Vn(a)}!function(t,e,n,r){t.repoInfo_=new zn(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,o)}function Lu(t){(t=Te(t))._checkNotDeleted("goOffline"),ms(t._repo)}function Mu(t){var e;(t=Te(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(is)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fu={".sv":"timestamp"};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Uu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function ju(t,e,n){var r;if(t=Te(t),Qa("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new Ot,a=tu(t,(function(){}));return function(t,e,n,r,i,o){ys(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:fn(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=_s(t,e,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Ka("transaction failed: Data returned ",u,a.path),a.status=0;var c=Na(t.transactionQueueTree_,e),l=Aa(c)||[];l.push(a),Pa(c,l);var h=void 0;"object"==typeof u&&null!==u&&oe(u,".priority")?(h=ae(u,".priority"),St(Va(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(sa(t.serverSyncTree_,e)||ri.EMPTY_NODE).getPriority().val();var f=us(t),p=oi(u,h),d=Sa(p,s,f);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=d,a.currentWriteId=fs(t);var v=ea(t.serverSyncTree_,e,d,a.currentWriteId,a.applyLocally);es(t.eventQueue_,e,v),ws(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?o.reject(e):(i=new qs(r,new js(t._repo,t._path),Xr),o.resolve(new Uu(n,i)))}),a,i),o.promise}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qu=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){ve("OnDisconnect.cancel",0,1,arguments.length),me("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){ve("OnDisconnect.remove",0,1,arguments.length),me("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){ve("OnDisconnect.set",1,2,arguments.length),me("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){ve("OnDisconnect.setWithPriority",2,3,arguments.length),me("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(ve("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,In("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}me("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Vu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return ve("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Bu=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return ve("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return ve("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return ve("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return ve("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return ve("DataSnapshot.child",0,1,arguments.length),e=String(e),$a("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return ve("DataSnapshot.hasChild",1,1,arguments.length),$a("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return ve("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return ve("DataSnapshot.forEach",1,1,arguments.length),me("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return ve("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return ve("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return ve("DataSnapshot.ref",0,0,arguments.length),new Wu(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ku=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var o,a=this;ve("Query.on",2,4,arguments.length),me("Query.on","callback",n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i),u=function(t,e){n.call(s.context,new Bu(a.database,t),e)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return tu(this._delegate,u,c),n;case"child_added":return eu(this._delegate,u,c),n;case"child_removed":return iu(this._delegate,u,c),n;case"child_changed":return nu(this._delegate,u,c),n;case"child_moved":return ru(this._delegate,u,c),n;default:throw new Error(ge("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(ve("Query.off",0,3,arguments.length),za("Query.off",t,!0),me("Query.off","callback",e,!0),ye("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,ou(this._delegate,t,r)}else ou(this._delegate,t)},t.prototype.get=function(){var t=this;return Ys(this._delegate).then((function(e){return new Bu(t.database,e)}))},t.prototype.once=function(e,n,r,i){var o=this;ve("Query.once",1,4,arguments.length),me("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=new Ot,u=function(t,e){var r=new Bu(o.database,t);n&&n.call(a.context,r,e),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)};switch(e){case"value":tu(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":eu(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":iu(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":nu(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":ru(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ge("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},t.prototype.limitToFirst=function(e){return ve("Query.limitToFirst",1,1,arguments.length),new t(this.database,Au(this._delegate,gu(e)))},t.prototype.limitToLast=function(e){return ve("Query.limitToLast",1,1,arguments.length),new t(this.database,Au(this._delegate,yu(e)))},t.prototype.orderByChild=function(e){return ve("Query.orderByChild",1,1,arguments.length),new t(this.database,Au(this._delegate,_u(e)))},t.prototype.orderByKey=function(){return ve("Query.orderByKey",0,0,arguments.length),new t(this.database,Au(this._delegate,Iu()))},t.prototype.orderByPriority=function(){return ve("Query.orderByPriority",0,0,arguments.length),new t(this.database,Au(this._delegate,Eu()))},t.prototype.orderByValue=function(){return ve("Query.orderByValue",0,0,arguments.length),new t(this.database,Au(this._delegate,Cu()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),ve("Query.startAt",0,2,arguments.length),new t(this.database,Au(this._delegate,fu(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),ve("Query.startAfter",0,2,arguments.length),new t(this.database,Au(this._delegate,du(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),ve("Query.endAt",0,2,arguments.length),new t(this.database,Au(this._delegate,uu(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),ve("Query.endBefore",0,2,arguments.length),new t(this.database,Au(this._delegate,lu(e,n)))},t.prototype.equalTo=function(e,n){return ve("Query.equalTo",1,2,arguments.length),new t(this.database,Au(this._delegate,Nu(e,n)))},t.prototype.toString=function(){return ve("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return ve("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(ve("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,me(t,"cancel",r.cancel,!0),r.context=n,ye(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ge(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Wu(this.database,new js(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Wu=function(t){function e(e,n){var r=t.call(this,e,new Ls(n._repo,n._path,new Ii,!1))||this;return r.database=e,r._delegate=n,r}return pt(e,t),e.prototype.getKey=function(){return ve("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return ve("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ks(this._delegate,t))},e.prototype.getParent=function(){ve("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return ve("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){ve("Reference.set",1,2,arguments.length),me("Reference.set","onComplete",e,!0);var n=zs(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(ve("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,In("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qa("Reference.update",this._delegate._path),me("Reference.update","onComplete",e,!0);var i=Qs(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){ve("Reference.setWithPriority",2,3,arguments.length),me("Reference.setWithPriority","onComplete",n,!0);var r=$s(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){ve("Reference.remove",0,1,arguments.length),me("Reference.remove","onComplete",t,!0);var e=Hs(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;ve("Reference.transaction",1,3,arguments.length),me("Reference.transaction","transactionUpdate",t,!1),me("Reference.transaction","onComplete",e,!0),Xa("Reference.transaction","applyLocally",n,!0);var i=ju(this._delegate,t,{applyLocally:n}).then((function(t){return new Vu(t.committed,new Bu(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){ve("Reference.setPriority",1,2,arguments.length),me("Reference.setPriority","onComplete",e,!0);var n=Gs(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;ve("Reference.push",0,2,arguments.length),me("Reference.push","onComplete",n,!0);var i=Ws(this._delegate,t),o=i.then((function(t){return new e(r.database,t)}));n&&o.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},e.prototype.onDisconnect=function(){return Qa("Reference.onDisconnect",this._delegate._path),new qu(new Os(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ku),Hu=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Ou(this._delegate,t,e,n)},t.prototype.ref=function(t){if(ve("database.ref",0,1,arguments.length),t instanceof Wu){var e=Bs(this._delegate,t.toString());return new Wu(this,e)}e=Vs(this._delegate,t);return new Wu(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";ve(e,1,1,arguments.length);var n=Bs(this._delegate,t);return new Wu(this,n)},t.prototype.goOffline=function(){return ve("database.goOffline",0,0,arguments.length),Lu(this._delegate)},t.prototype.goOnline=function(){return ve("database.goOnline",0,0,arguments.length),Mu(this._delegate)},t.ServerValue={TIMESTAMP:Fu,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zu=Object.freeze({__proto__:null,forceLongPolling:function(){ir.forceDisallow(),er.forceAllow()},forceWebSockets:function(){er.forceDisallow()},isWebSocketsAvailable:function(){return ir.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Li(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);Rn(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;on(r);var u=new ke("auth-internal",new Ae("database-standalone"));return u.setComponent(new Se("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Hu(xu(e,u,void 0,n,s),e),namespace:o}}}),Gu=Rr;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Rr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var $u=ar,Qu=zn,Yu=Object.freeze({__proto__:null,DataConnection:Gu,RealTimeConnection:$u,hijackHash:function(t){var e=Rr.prototype.put;return Rr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rr.prototype.put=e}},ConnectionTarget:Qu,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Ru=t}(t)}}),Xu=Hu.ServerValue;!function(t){on(t.SDK_VERSION);var e=t.INTERNAL.registerComponent(new Se("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Hu(xu(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Wu,Query:Ku,Database:Hu,DataSnapshot:Bu,enableLogging:mn,INTERNAL:zu,ServerValue:Xu,TEST_ACCESS:Yu}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.11.0"),Ht()&&(module.exports=e)}(en);
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Ju=function(t,e){return Ju=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Ju(t,e)};function Zu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var tc,ec="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nc=nc||{},rc=ec||self;function ic(){}function oc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ac(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var sc="closure_uid_"+(1e9*Math.random()>>>0),uc=0;function cc(t,e,n){return t.call.apply(t.bind,arguments)}function lc(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function hc(t,e,n){return(hc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cc:lc).apply(null,arguments)}function fc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function pc(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function dc(){this.s=this.s,this.o=this.o}var vc={};dc.prototype.s=!1,dc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,sc)&&t[sc]||(t[sc]=++uc)}(this);delete vc[t]}},dc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var gc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},mc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function yc(t){return Array.prototype.concat.apply([],arguments)}function bc(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function _c(t){return/^[\s\xa0]*$/.test(t)}var wc,Ic=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Tc(t,e){return-1!=t.indexOf(e)}function Ec(t,e){return t<e?-1:t>e?1:0}t:{var Sc=rc.navigator;if(Sc){var Cc=Sc.userAgent;if(Cc){wc=Cc;break t}}wc=""}function kc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Nc(t){var e={};for(var n in t)e[n]=t[n];return e}var Ac="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pc(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ac.length;o++)n=Ac[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Rc(t){return Rc[" "](t),t}Rc[" "]=ic;var xc,Dc,Oc=Tc(wc,"Opera"),Lc=Tc(wc,"Trident")||Tc(wc,"MSIE"),Mc=Tc(wc,"Edge"),Fc=Mc||Lc,Uc=Tc(wc,"Gecko")&&!(Tc(wc.toLowerCase(),"webkit")&&!Tc(wc,"Edge"))&&!(Tc(wc,"Trident")||Tc(wc,"MSIE"))&&!Tc(wc,"Edge"),jc=Tc(wc.toLowerCase(),"webkit")&&!Tc(wc,"Edge");function qc(){var t=rc.document;return t?t.documentMode:void 0}t:{var Vc="",Bc=(Dc=wc,Uc?/rv:([^\);]+)(\)|;)/.exec(Dc):Mc?/Edge\/([\d\.]+)/.exec(Dc):Lc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Dc):jc?/WebKit\/(\S+)/.exec(Dc):Oc?/(?:Version)[ \/]?(\S+)/.exec(Dc):void 0);if(Bc&&(Vc=Bc?Bc[1]:""),Lc){var Kc=qc();if(null!=Kc&&Kc>parseFloat(Vc)){xc=String(Kc);break t}}xc=Vc}var Wc,Hc={};function zc(){return function(t){var e=Hc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Ic(String(xc)).split("."),n=Ic("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=Ec(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Ec(0==o[2].length,0==a[2].length)||Ec(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(rc.document&&Lc){var Gc=qc();Wc=Gc||(parseInt(xc,10)||void 0)}else Wc=void 0;var $c=Wc,Qc=function(){if(!rc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{rc.addEventListener("test",ic,e),rc.removeEventListener("test",ic,e)}catch(t){}return t}();function Yc(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Xc(t,e){if(Yc.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Uc){t:{try{Rc(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jc[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xc.Z.h.call(this)}}Yc.prototype.h=function(){this.defaultPrevented=!0},pc(Xc,Yc);var Jc={2:"touch",3:"pen",4:"mouse"};Xc.prototype.h=function(){Xc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zc="closure_listenable_"+(1e6*Math.random()|0),tl=0;function el(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++tl,this.ca=this.fa=!1}function nl(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function rl(t){this.src=t,this.g={},this.h=0}function il(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=gc(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(nl(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ol(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}rl.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=ol(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new el(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var al="closure_lm_"+(1e6*Math.random()|0),sl={};function ul(t,e,n,r,i){if(r&&r.once)return ll(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ul(t,e[o],n,r,i);return null}return n=ml(n),t&&t[Zc]?t.N(e,n,ac(r)?!!r.capture:!!r,i):cl(t,e,n,!1,r,i)}function cl(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=ac(i)?!!i.capture:!!i,s=vl(t);if(s||(t[al]=s=new rl(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=dl;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qc||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pl(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ll(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ll(t,e[o],n,r,i);return null}return n=ml(n),t&&t[Zc]?t.O(e,n,ac(r)?!!r.capture:!!r,i):cl(t,e,n,!0,r,i)}function hl(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hl(t,e[o],n,r,i);else r=ac(r)?!!r.capture:!!r,n=ml(n),t&&t[Zc]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=ol(o=t.g[e],n,r,i))&&(nl(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=vl(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ol(e,n,r,i)),(n=-1<t?e[t]:null)&&fl(n))}function fl(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Zc])il(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vl(e))?(il(n,t),0==n.h&&(n.src=null,e[al]=null)):nl(t)}}}function pl(t){return t in sl?sl[t]:sl[t]="on"+t}function dl(t,e){if(t.ca)t=!0;else{e=new Xc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&fl(t),t=n.call(r,e)}return t}function vl(t){return(t=t[al])instanceof rl?t:null}var gl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ml(t){return"function"==typeof t?t:(t[gl]||(t[gl]=function(e){return t.handleEvent(e)}),t[gl])}function yl(){dc.call(this),this.i=new rl(this),this.P=this,this.I=null}function bl(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Yc(e,t);else if(e instanceof Yc)e.target=e.target||t;else{var i=e;Pc(e=new Yc(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=_l(a,r,!0,e)&&i}if(i=_l(a=e.g=t,r,!0,e)&&i,i=_l(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=_l(a=e.g=n[o],r,!1,e)&&i}function _l(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&il(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}pc(yl,dc),yl.prototype[Zc]=!0,yl.prototype.removeEventListener=function(t,e,n,r){hl(this,t,e,n,r)},yl.prototype.M=function(){if(yl.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)nl(n[r]);delete e.g[t],e.h--}}this.I=null},yl.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},yl.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var wl=rc.JSON.stringify;function Il(){var t=Pl,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Tl,El=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Sl.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Sl=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Cl}),(function(t){return t.reset()})),Cl=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function kl(t){rc.setTimeout((function(){throw t}),0)}function Nl(t,e){Tl||function(){var t=rc.Promise.resolve(void 0);Tl=function(){t.then(Rl)}}(),Al||(Tl(),Al=!0),Pl.add(t,e)}var Al=!1,Pl=new El;function Rl(){for(var t;t=Il();){try{t.h.call(t.g)}catch(t){kl(t)}var e=Sl;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Al=!1}function xl(t,e){yl.call(this),this.h=t||1,this.g=e||rc,this.j=hc(this.kb,this),this.l=Date.now()}function Dl(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ol(t,e,n){if("function"==typeof t)n&&(t=hc(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=hc(t.handleEvent,t)}return 2147483647<Number(e)?-1:rc.setTimeout(t,e||0)}function Ll(t){t.g=Ol((function(){t.g=null,t.i&&(t.i=!1,Ll(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}pc(xl,yl),(tc=xl.prototype).da=!1,tc.S=null,tc.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),bl(this,"tick"),this.da&&(Dl(this),this.start()))}},tc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tc.M=function(){xl.Z.M.call(this),Dl(this),delete this.g};var Ml=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ju(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Ll(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(rc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(dc);function Fl(t){dc.call(this),this.h=t,this.g={}}pc(Fl,dc);var Ul=[];function jl(t,e,n,r){Array.isArray(n)||(n&&(Ul[0]=n.toString()),n=Ul);for(var i=0;i<n.length;i++){var o=ul(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function ql(t){kc(t.g,(function(t,e){this.g.hasOwnProperty(e)&&fl(t)}),t),t.g={}}function Vl(){this.g=!0}function Bl(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return wl(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Fl.prototype.M=function(){Fl.Z.M.call(this),ql(this)},Fl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vl.prototype.Aa=function(){this.g=!1},Vl.prototype.info=function(){};var Kl={},Wl=null;function Hl(){return Wl=Wl||new yl}function zl(t){Yc.call(this,Kl.Ma,t)}function Gl(t){var e=Hl();bl(e,new zl(e,t))}function $l(t,e){Yc.call(this,Kl.STAT_EVENT,t),this.stat=e}function Ql(t){var e=Hl();bl(e,new $l(e,t))}function Yl(t,e){Yc.call(this,Kl.Na,t),this.size=e}function Xl(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return rc.setTimeout((function(){t()}),e)}Kl.Ma="serverreachability",pc(zl,Yc),Kl.STAT_EVENT="statevent",pc($l,Yc),Kl.Na="timingevent",pc(Yl,Yc);var Jl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function th(){}function eh(t){return t.h||(t.h=t.i())}function nh(){}th.prototype.h=null;var rh,ih={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function oh(){Yc.call(this,"d")}function ah(){Yc.call(this,"c")}function sh(){}function uh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Fl(this),this.P=lh,t=Fc?125:void 0,this.W=new xl(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ch}function ch(){this.i=null,this.g="",this.h=!1}pc(oh,Yc),pc(ah,Yc),pc(sh,th),sh.prototype.g=function(){return new XMLHttpRequest},sh.prototype.i=function(){return{}},rh=new sh;var lh=45e3,hh={},fh={};function ph(t,e,n){t.K=1,t.v=Mh(Ph(e)),t.s=n,t.U=!0,dh(t,null)}function dh(t,e){t.F=Date.now(),yh(t),t.A=Ph(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Qh(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ch,t.g=Xf(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ml(hc(t.Ia,t,t.g),t.O)),jl(t.V,t.g,"readystatechange",t.gb),e=t.H?Nc(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Gl(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function vh(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function gh(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=mh(t,n))==fh){4==e&&(t.o=4,Ql(14),i=!1),Bl(t.j,t.m,null,"[Incomplete Response]");break}if(r==hh){t.o=4,Ql(15),Bl(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Bl(t.j,t.m,r,null),Th(t,r)}vh(t)&&r!=fh&&r!=hh&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ql(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kf(e),e.L=!0,Ql(11))):(Bl(t.j,t.m,n,"[Invalid Chunked Response]"),Ih(t),wh(t))}function mh(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?fh:(n=Number(e.substring(n,r)),isNaN(n)?hh:(r+=1)+n>e.length?fh:(e=e.substr(r,n),t.C=r+n,e))}function yh(t){t.Y=Date.now()+t.P,bh(t,t.P)}function bh(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Xl(hc(t.eb,t),e)}function _h(t){t.B&&(rc.clearTimeout(t.B),t.B=null)}function wh(t){0==t.l.G||t.I||zf(t.l,t)}function Ih(t){_h(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Dl(t.W),ql(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Th(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||nf(n.i,t)))if(n.I=t.N,!t.J&&nf(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Hf(n),Of(n)}Bf(n),Ql(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Xl(hc(n.ab,n),6e3));if(1>=ef(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else $f(n,11)}else if((t.J||n.g==t)&&Hf(n),!_c(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Tc(l,"spdy")||Tc(l,"quic")||Tc(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(rf(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Lh(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Yf(r,r.H?r.la:null,r.W),p.J){of(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(_h(d),yh(d)),r.g=p}else Vf(r);0<n.l.length&&Ff(n)}else"stop"!=o[0]&&"close"!=o[0]||$f(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?$f(n,7):Df(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Gl(4)}catch(o){}}function Eh(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(oc(t)||"string"==typeof t)mc(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(oc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(oc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Sh(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Sh)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ch(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];kh(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)kh(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function kh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(tc=uh.prototype).setTimeout=function(t){this.P=t},tc.gb=function(t){t=t.target;var e=this.L;e&&3==Nf(t)?e.l():this.Ia(t)},tc.Ia=function(t){try{if(t==this.g)t:{var e=Nf(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Fc||this.g&&(this.h.h||this.g.ga()||Af(this.g)))){this.I||4!=e||7==n||Gl(8==n||0>=r?3:2),_h(this);var i=this.g.ba();this.N=i;e:if(vh(this)){var o=Af(this.g);t="";var a=o.length,s=4==Nf(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ih(this),wh(this);var u="";break e}this.h.i=new rc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_c(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Ql(12),Ih(this),wh(this);break t}Bl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Th(this,i)}this.U?(gh(this,e,u),Fc&&this.i&&3==e&&(jl(this.V,this.W,"tick",this.fb),this.W.start())):(Bl(this.j,this.m,u,null),Th(this,u)),4==e&&Ih(this),this.i&&!this.I&&(4==e?zf(this.l,this):(this.i=!1,yh(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ql(12)):(this.o=0,Ql(13)),Ih(this),wh(this)}}}catch(e){}},tc.fb=function(){if(this.g){var t=Nf(this.g),e=this.g.ga();this.C<e.length&&(_h(this),gh(this,t,e),this.i&&4!=t&&yh(this))}},tc.cancel=function(){this.I=!0,Ih(this)},tc.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Gl(3),Ql(17)),Ih(this),this.o=2,wh(this)):bh(this,this.Y-t)},(tc=Sh.prototype).R=function(){Ch(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},tc.T=function(){return Ch(this),this.g.concat()},tc.get=function(t,e){return kh(this.h,t)?this.h[t]:e},tc.set=function(t,e){kh(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},tc.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ah(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ah){this.g=void 0!==e?e:t.g,Rh(this,t.j),this.s=t.s,xh(this,t.i),Dh(this,t.m),this.l=t.l,e=t.h;var n=new Hh;n.i=e.i,e.g&&(n.g=new Sh(e.g),n.h=e.h),Oh(this,n),this.o=t.o}else t&&(n=String(t).match(Nh))?(this.g=!!e,Rh(this,n[1]||"",!0),this.s=Fh(n[2]||""),xh(this,n[3]||"",!0),Dh(this,n[4]),this.l=Fh(n[5]||"",!0),Oh(this,n[6]||"",!0),this.o=Fh(n[7]||"")):(this.g=!!e,this.h=new Hh(null,this.g))}function Ph(t){return new Ah(t)}function Rh(t,e,n){t.j=n?Fh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xh(t,e,n){t.i=n?Fh(e,!0):e}function Dh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Oh(t,e,n){e instanceof Hh?(t.h=e,function(t,e){e&&!t.j&&(zh(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Gh(this,e),Qh(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Uh(e,Kh)),t.h=new Hh(e,t.g))}function Lh(t,e,n){t.h.set(e,n)}function Mh(t){return Lh(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,jh),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jh(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ah.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Uh(e,qh,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Uh(e,qh,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Uh(n,"/"==n.charAt(0)?Bh:Vh,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Uh(n,Wh)),t.join("")};var qh=/[#\/\?@]/g,Vh=/[#\?:]/g,Bh=/[#\?]/g,Kh=/[#\?@]/g,Wh=/#/g;function Hh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zh(t){t.g||(t.g=new Sh,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Gh(t,e){zh(t),e=Yh(t,e),kh(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,kh((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ch(t)))}function $h(t,e){return zh(t),e=Yh(t,e),kh(t.g.h,e)}function Qh(t,e,n){Gh(t,e),0<n.length&&(t.i=null,t.g.set(Yh(t,e),bc(n)),t.h+=n.length)}function Yh(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(tc=Hh.prototype).add=function(t,e){zh(this),this.i=null,t=Yh(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},tc.forEach=function(t,e){zh(this),this.g.forEach((function(n,r){mc(n,(function(n){t.call(e,n,r,this)}),this)}),this)},tc.T=function(){zh(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},tc.R=function(t){zh(this);var e=[];if("string"==typeof t)$h(this,t)&&(e=yc(e,this.g.get(Yh(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=yc(e,t[n])}return e},tc.set=function(t,e){return zh(this),this.i=null,$h(this,t=Yh(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},tc.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},tc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var Xh=function(t,e){this.h=t,this.g=e};function Jh(t){this.l=t||Zh,rc.PerformanceNavigationTiming?t=0<(t=rc.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(rc.g&&rc.g.Ea&&rc.g.Ea()&&rc.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zh=10;function tf(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ef(t){return t.h?1:t.g?t.g.size:0}function nf(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function rf(t,e){t.g?t.g.add(e):t.h=e}function of(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function af(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Zu(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return bc(t.i)}function sf(){}function uf(){this.g=new sf}function cf(t,e,n){var r=n||"";try{Eh(t,(function(t,n){var i=t;ac(t)&&(i=wl(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function lf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function hf(t){this.l=t.$b||null,this.j=t.ib||!1}function ff(t,e){yl.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=pf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jh.prototype.cancel=function(){var t,e;if(this.i=af(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Zu(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},sf.prototype.stringify=function(t){return rc.JSON.stringify(t,void 0)},sf.prototype.parse=function(t){return rc.JSON.parse(t,void 0)},pc(hf,th),hf.prototype.g=function(){return new ff(this.l,this.j)},hf.prototype.i=function(t){return function(){return t}}({}),pc(ff,yl);var pf=0;function df(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function vf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,gf(t)}function gf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(tc=ff.prototype).open=function(t,e){if(this.readyState!=pf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,gf(this)},tc.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||rc).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vf(this)),this.readyState=pf},tc.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,gf(this)),this.g&&(this.readyState=3,gf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==rc.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;df(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},tc.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?vf(this):gf(this),3==this.readyState&&df(this)}},tc.Ua=function(t){this.g&&(this.response=this.responseText=t,vf(this))},tc.Ta=function(t){this.g&&(this.response=t,vf(this))},tc.ha=function(){this.g&&vf(this)},tc.setRequestHeader=function(t,e){this.v.append(t,e)},tc.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},tc.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ff.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var mf=rc.JSON.parse;function yf(t){yl.call(this),this.headers=new Sh,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bf,this.K=this.L=!1}pc(yf,yl);var bf="",_f=/^https?$/i,wf=["POST","PUT"];function If(t){return"content-type"==t.toLowerCase()}function Tf(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ef(t),Cf(t)}function Ef(t){t.D||(t.D=!0,bl(t,"complete"),bl(t,"error"))}function Sf(t){if(t.h&&void 0!==nc&&(!t.C[1]||4!=Nf(t)||2!=t.ba()))if(t.v&&4==Nf(t))Ol(t.Fa,0,t);else if(bl(t,"readystatechange"),4==Nf(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Nh)[1]||null;if(!o&&rc.self&&rc.self.location){var a=rc.self.location.protocol;o=a.substr(0,a.length-1)}i=!_f.test(o?o.toLowerCase():"")}e=i}if(e)bl(t,"complete"),bl(t,"success");else{t.m=6;try{var s=2<Nf(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",Ef(t)}}finally{Cf(t)}}}function Cf(t,e){if(t.g){kf(t);var n=t.g,r=t.C[0]?ic:null;t.g=null,t.C=null,e||bl(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function kf(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(rc.clearTimeout(t.A),t.A=null)}function Nf(t){return t.g?t.g.readyState:0}function Af(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case bf:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Pf(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return kc(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Lh(t,e,n))}function Rf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xf(t){this.za=0,this.l=[],this.h=new Vl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rf("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rf("baseRetryDelayMs",5e3,t),this.$a=Rf("retryDelaySeedMs",1e4,t),this.Ya=Rf("forwardChannelMaxRetries",2,t),this.ra=Rf("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Jh(t&&t.concurrentRequestLimit),this.Ca=new uf,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Df(t){if(Lf(t),3==t.G){var e=t.V++,n=Ph(t.F);Lh(n,"SID",t.J),Lh(n,"RID",e),Lh(n,"TYPE","terminate"),jf(t,n),(e=new uh(t,t.h,e,void 0)).K=2,e.v=Mh(Ph(n)),n=!1,rc.navigator&&rc.navigator.sendBeacon&&(n=rc.navigator.sendBeacon(e.v.toString(),"")),!n&&rc.Image&&((new Image).src=e.v,n=!0),n||(e.g=Xf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yh(e)}Qf(t)}function Of(t){t.g&&(Kf(t),t.g.cancel(),t.g=null)}function Lf(t){Of(t),t.u&&(rc.clearTimeout(t.u),t.u=null),Hf(t),t.i.cancel(),t.m&&("number"==typeof t.m&&rc.clearTimeout(t.m),t.m=null)}function Mf(t,e){t.l.push(new Xh(t.Za++,e)),3==t.G&&Ff(t)}function Ff(t){tf(t.i)||t.m||(t.m=!0,Nl(t.Ha,t),t.C=0)}function Uf(t,e){var n;n=e?e.m:t.V++;var r=Ph(t.F);Lh(r,"SID",t.J),Lh(r,"RID",n),Lh(r,"AID",t.U),jf(t,r),t.o&&t.s&&Pf(r,t.o,t.s),n=new uh(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=qf(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),rf(t.i,n),ph(n,r,e)}function jf(t,e){t.j&&Eh({},(function(t,n){Lh(e,n,t)}))}function qf(t,e,n){n=Math.min(t.l.length,n);var r=t.j?hc(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{cf(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Vf(t){t.g||t.u||(t.Y=1,Nl(t.Ga,t),t.A=0)}function Bf(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Xl(hc(t.Ga,t),Gf(t,t.A)),t.A++,!0)}function Kf(t){null!=t.B&&(rc.clearTimeout(t.B),t.B=null)}function Wf(t){t.g=new uh(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ph(t.oa);Lh(e,"RID","rpc"),Lh(e,"SID",t.J),Lh(e,"CI",t.N?"0":"1"),Lh(e,"AID",t.U),jf(t,e),Lh(e,"TYPE","xmlhttp"),t.o&&t.s&&Pf(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Mh(Ph(e)),n.s=null,n.U=!0,dh(n,t)}function Hf(t){null!=t.v&&(rc.clearTimeout(t.v),t.v=null)}function zf(t,e){var n=null;if(t.g==e){Hf(t),Kf(t),t.g=null;var r=2}else{if(!nf(t.i,e))return;n=e.D,of(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;bl(r=Hl(),new Yl(r,n,e,i)),Ff(t)}else Vf(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ef(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Xl(hc(t.Ha,t,e),Gf(t,t.C)),t.C++,0)))}(t,e)||2==r&&Bf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:$f(t,5);break;case 4:$f(t,10);break;case 3:$f(t,6);break;default:$f(t,2)}}function Gf(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function $f(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=hc(t.jb,t);n||(n=new Ah("//www.google.com/images/cleardot.gif"),rc.location&&"http"==rc.location.protocol||Rh(n,"https"),Mh(n)),function(t,e){var n=new Vl;if(rc.Image){var r=new Image;r.onload=fc(lf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fc(lf,n,r,"TestLoadImage: error",!1,e),r.onabort=fc(lf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fc(lf,n,r,"TestLoadImage: timeout",!1,e),rc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ql(2);t.G=0,t.j&&t.j.va(e),Qf(t),Lf(t)}function Qf(t){t.G=0,t.I=-1,t.j&&(0==af(t.i).length&&0==t.l.length||(t.i.i.length=0,bc(t.l),t.l.length=0),t.j.ua())}function Yf(t,e,n){var r=function(t){return t instanceof Ah?Ph(t):new Ah(t,void 0)}(n);if(""!=r.i)e&&xh(r,e+"."+r.i),Dh(r,r.m);else{var i=rc.location;r=function(t,e,n,r){var i=new Ah(null,void 0);return t&&Rh(i,t),e&&xh(i,e),n&&Dh(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&kc(t.aa,(function(t,e){Lh(r,e,t)})),e=t.D,n=t.sa,e&&n&&Lh(r,e,n),Lh(r,"VER",t.ma),jf(t,r),r}function Xf(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new yf(new hf({ib:!0})):new yf(t.qa)).L=t.H,e}function Jf(){}function Zf(){if(Lc&&!(10<=Number($c)))throw Error("Environmental error: no available transport.")}function tp(t,e){yl.call(this),this.g=new xf(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!_c(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_c(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new rp(this)}function ep(t){oh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function np(){ah.call(this),this.status=1}function rp(t){this.g=t}(tc=yf.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rh.g(),this.C=this.u?eh(this.u):eh(rh),this.g.onreadystatechange=hc(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Tf(this,t)}t=n||"";var i=new Sh(this.headers);r&&Eh(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=If,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=rc.FormData&&t instanceof rc.FormData,!(0<=gc(wf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kf(this),0<this.B&&((this.K=function(t){return Lc&&zc()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hc(this.pa,this)):this.A=Ol(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Tf(this,t)}},tc.pa=function(){void 0!==nc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bl(this,"timeout"),this.abort(8))},tc.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bl(this,"complete"),bl(this,"abort"),Cf(this))},tc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cf(this,!0)),yf.Z.M.call(this)},tc.Fa=function(){this.s||(this.F||this.v||this.l?Sf(this):this.cb())},tc.cb=function(){Sf(this)},tc.ba=function(){try{return 2<Nf(this)?this.g.status:-1}catch(t){return-1}},tc.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},tc.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),mf(e)}},tc.Da=function(){return this.m},tc.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tc=xf.prototype).ma=8,tc.G=1,tc.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},tc.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new uh(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Pc(n=Nc(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=qf(this,e,r),Lh(i=Ph(this.F),"RID",t),Lh(i,"CVER",22),this.D&&Lh(i,"X-HTTP-Session-Id",this.D),jf(this,i),this.o&&n&&Pf(i,this.o,n),rf(this.i,e),this.Ra&&Lh(i,"TYPE","init"),this.ja?(Lh(i,"$req",r),Lh(i,"SID","null"),e.$=!0,ph(e,i,null)):ph(e,i,r),this.G=2}}else 3==this.G&&(t?Uf(this,t):0==this.l.length||tf(this.i)||Uf(this))},tc.Ga=function(){if(this.u=null,Wf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Xl(hc(this.bb,this),t)}},tc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ql(10),Of(this),Wf(this))},tc.ab=function(){null!=this.v&&(this.v=null,Of(this),Bf(this),Ql(19))},tc.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ql(2)):(this.h.info("Failed to ping google.com"),Ql(1))},(tc=Jf.prototype).xa=function(){},tc.wa=function(){},tc.va=function(){},tc.ua=function(){},tc.Oa=function(){},Zf.prototype.g=function(t,e){return new tp(t,e)},pc(tp,yl),tp.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Nl(hc(t.hb,t,e))),Ql(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Yf(t,null,t.W),Ff(t)},tp.prototype.close=function(){Df(this.g)},tp.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Mf(this.g,e)}else this.v?((e={}).__data__=wl(t),Mf(this.g,e)):Mf(this.g,t)},tp.prototype.M=function(){this.g.j=null,delete this.j,Df(this.g),delete this.g,tp.Z.M.call(this)},pc(ep,oh),pc(np,ah),pc(rp,Jf),rp.prototype.xa=function(){bl(this.g,"a")},rp.prototype.wa=function(t){bl(this.g,new ep(t))},rp.prototype.va=function(t){bl(this.g,new np(t))},rp.prototype.ua=function(){bl(this.g,"b")},Zf.prototype.createWebChannel=Zf.prototype.g,tp.prototype.send=tp.prototype.u,tp.prototype.open=tp.prototype.m,tp.prototype.close=tp.prototype.close,Jl.NO_ERROR=0,Jl.TIMEOUT=8,Jl.HTTP_ERROR=6,Zl.COMPLETE="complete",nh.EventType=ih,ih.OPEN="a",ih.CLOSE="b",ih.ERROR="c",ih.MESSAGE="d",yl.prototype.listen=yl.prototype.N,yf.prototype.listenOnce=yf.prototype.O,yf.prototype.getLastError=yf.prototype.La,yf.prototype.getLastErrorCode=yf.prototype.Da,yf.prototype.getStatus=yf.prototype.ba,yf.prototype.getResponseJson=yf.prototype.Qa,yf.prototype.getResponseText=yf.prototype.ga,yf.prototype.send=yf.prototype.ea;var ip=Jl,op=Zl,ap=Kl,sp=10,up=11,cp=hf,lp=nh,hp=yf,fp=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();fp.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var pp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return pt(e,t),e}(Error),vp=new Ue("@firebase/firestore");function gp(){return vp.logLevel}function mp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vp.logLevel<=xe.DEBUG){var r=e.map(_p);vp.debug.apply(vp,_t(["Firestore (8.10.0): "+t],r))}}function yp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vp.logLevel<=xe.ERROR){var r=e.map(_p);vp.error.apply(vp,_t(["Firestore (8.10.0): "+t],r))}}function bp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vp.logLevel<=xe.WARN){var r=e.map(_p);vp.warn.apply(vp,_t(["Firestore (8.10.0): "+t],r))}}function _p(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wp(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw yp(e),new Error(e)}function Ip(t,e){t||wp()}function Tp(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ep(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Sp=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ep(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Cp(t,e){return t<e?-1:t>e?1:0}function kp(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Np(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ap=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new dp(pp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new dp(pp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new dp(pp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dp(pp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Cp(this.nanoseconds,t.nanoseconds):Cp(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Pp=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ap(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rp(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xp(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Op=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&wp(),void 0===n?n=t.length-e:n>t.length-e&&wp(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new dp(pp.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Op),Mp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Mp.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new dp(pp.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new dp(pp.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new dp(pp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new dp(pp.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Op),Up=function(){function t(t){this.fields=t,t.sort(Fp.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return kp(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),jp=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Cp(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();jp.EMPTY_BYTE_STRING=new jp("");var qp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vp(t){if(Ip(!!t),"string"==typeof t){var e=0,n=qp.exec(t);if(Ip(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bp(t.seconds),nanos:Bp(t.nanos)}}function Bp(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Kp(t){return"string"==typeof t?jp.fromBase64String(t):jp.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hp(t){var e=t.mapValue.fields.__previous_value__;return Wp(e)?Hp(e):e}function zp(t){var e=Vp(t.mapValue.fields.__local_write_time__.timestampValue);return new Ap(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gp(t){return null==t}function $p(t){return 0===t&&1/t==-1/0}function Qp(t){return"number"==typeof t&&Number.isInteger(t)&&!$p(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yp=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Lp.fromString(e))},t.fromName=function(e){return new t(Lp.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Lp.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Lp.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Lp(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wp(t)?4:10:wp()}function Jp(t,e){var n=Xp(t);if(n!==Xp(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zp(t).isEqual(zp(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Vp(t.timestampValue),r=Vp(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Kp(t.bytesValue).isEqual(Kp(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Bp(t.geoPointValue.latitude)===Bp(e.geoPointValue.latitude)&&Bp(t.geoPointValue.longitude)===Bp(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Bp(t.integerValue)===Bp(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Bp(t.doubleValue),r=Bp(e.doubleValue);return n===r?$p(n)===$p(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return kp(t.arrayValue.values||[],e.arrayValue.values||[],Jp);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Rp(n)!==Rp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jp(n[i],r[i])))return!1;return!0}(t,e);default:return wp()}}function Zp(t,e){return void 0!==(t.values||[]).find((function(t){return Jp(t,e)}))}function td(t,e){var n=Xp(t),r=Xp(e);if(n!==r)return Cp(n,r);switch(n){case 0:return 0;case 1:return Cp(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Bp(t.integerValue||t.doubleValue),r=Bp(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ed(t.timestampValue,e.timestampValue);case 4:return ed(zp(t),zp(e));case 5:return Cp(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Kp(t),r=Kp(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Cp(n[i],r[i]);if(0!==o)return o}return Cp(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Cp(Bp(t.latitude),Bp(e.latitude));return 0!==n?n:Cp(Bp(t.longitude),Bp(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=td(n[i],r[i]);if(o)return o}return Cp(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Cp(r[a],o[a]);if(0!==s)return s;var u=td(n[r[a]],i[o[a]]);if(0!==u)return u}return Cp(r.length,o.length)}(t.mapValue,e.mapValue);default:throw wp()}}function ed(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Cp(t,e);var n=Vp(t),r=Vp(e),i=Cp(n.seconds,r.seconds);return 0!==i?i:Cp(n.nanos,r.nanos)}function nd(t){return rd(t)}function rd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Vp(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Kp(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Yp.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=rd(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+rd(t.fields[o])}return e+"}"}(t.mapValue):wp();var e,n}function id(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function od(t){return!!t&&"integerValue"in t}function ad(t){return!!t&&"arrayValue"in t}function sd(t){return!!t&&"nullValue"in t}function ud(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cd(t){return!!t&&"mapValue"in t}function ld(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return xp(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ld(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ld(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hd=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!cd(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ld(e)},t.prototype.setAll=function(t){var e=this,n=Fp.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ld(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());cd(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Jp(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];cd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){xp(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ld(this.value))},t}();function fd(t){var e=[];return xp(t.fields,(function(t,n){var r=new Fp([t]);if(cd(n)){var i=fd(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Up(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var pd=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Pp.min(),hd.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,hd.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,hd.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=hd.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=hd.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),dd=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vd(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new dd(t,e,n,r,i,o,a)}function gd(t){var e=Tp(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+nd(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Gp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ad(e.startAt)),e.endAt&&(n+="|ub:",n+=Ad(e.endAt)),e.h=n}return e.h}function md(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Rd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Jp(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dd(t.startAt,e.startAt)&&Dd(t.endAt,e.endAt)}function yd(t){return Yp.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var bd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return pt(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new _d(t,n,r):"array-contains"===n?new Ed(t,r):"in"===n?new Sd(t,r):"not-in"===n?new Cd(t,r):"array-contains-any"===n?new kd(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new wd(t,n):new Id(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(td(e,this.value)):null!==e&&Xp(this.value)===Xp(e)&&this.m(td(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return wp()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),_d=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Yp.fromName(r.referenceValue),i}return pt(e,t),e.prototype.matches=function(t){var e=Yp.comparator(t.key,this.key);return this.m(e)},e}(bd),wd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Td("in",n),r}return pt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bd),Id=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Td("not-in",n),r}return pt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bd);function Td(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Yp.fromName(t.referenceValue)}))}var Ed=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return pt(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ad(e)&&Zp(e.arrayValue,this.value)},e}(bd),Sd=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return pt(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Zp(this.value.arrayValue,e)},e}(bd),Cd=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return pt(e,t),e.prototype.matches=function(t){if(Zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Zp(this.value.arrayValue,e)},e}(bd),kd=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return pt(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ad(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Zp(e.value.arrayValue,t)}))},e}(bd),Nd=function(t,e){this.position=t,this.before=e};function Ad(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return nd(t)})).join(",")}var Pd=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Rd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function xd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Yp.comparator(Yp.fromName(a.referenceValue),n.key):td(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Dd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Jp(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Od=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Ld(t,e,n,r,i,o,a,s){return new Od(t,e,n,r,i,o,a,s)}function Md(t){return new Od(t)}function Fd(t){return!Gp(t.limit)&&"F"===t.limitType}function Ud(t){return!Gp(t.limit)&&"L"===t.limitType}function jd(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function qd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Vd(t){return null!==t.collectionGroup}function Bd(t){var e=Tp(t);if(null===e.p){e.p=[];var n=qd(e),r=jd(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Pd(n)),e.p.push(new Pd(Fp.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Pd(Fp.keyField(),u))}}}return e.p}function Kd(t){var e=Tp(t);if(!e.T)if("F"===e.limitType)e.T=vd(e.path,e.collectionGroup,Bd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Bd(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Pd(o.field,a))}var s=e.endAt?new Nd(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Nd(e.startAt.position,!e.startAt.before):null;e.T=vd(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Wd(t,e,n){return new Od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hd(t,e){return md(Kd(t),Kd(e))&&t.limitType===e.limitType}function zd(t){return gd(Kd(t))+"|lt:"+t.limitType}function Gd(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+nd(e.value);var e})).join(", ")+"]"),Gp(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ad(t.startAt)),t.endAt&&(e+=", endAt: "+Ad(t.endAt)),"Target("+e+")"}(Kd(t))+"; limitType="+t.limitType+")"}function $d(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Yp.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!xd(t.startAt,Bd(t),e)||t.endAt&&xd(t.endAt,Bd(t),e))}(t,e)}function Qd(t){return function(e,n){for(var r=!1,i=0,o=Bd(t);i<o.length;i++){var a=o[i],s=Yd(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Yd(t,e,n){var r=t.field.isKeyField()?Yp.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?td(r,i):wp()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return wp()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xd(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$p(e)?"-0":e}}function Jd(t){return{integerValue:""+t}}function Zd(t,e){return Qp(e)?Jd(e):Xd(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tv=function(){this._=void 0};function ev(t,e,n){return t instanceof iv?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ov?av(t,e):t instanceof sv?uv(t,e):function(t,e){var n=rv(t,e),r=lv(n)+lv(t.A);return od(n)&&od(t.A)?Jd(r):Xd(t.R,r)}(t,e)}function nv(t,e,n){return t instanceof ov?av(t,e):t instanceof sv?uv(t,e):n}function rv(t,e){return t instanceof cv?od(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e}(tv),ov=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return pt(e,t),e}(tv);function av(t,e){for(var n=hv(e),r=function(t){n.some((function(e){return Jp(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var sv=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return pt(e,t),e}(tv);function uv(t,e){for(var n=hv(e),r=function(t){n=n.filter((function(e){return!Jp(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var cv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return pt(e,t),e}(tv);function lv(t){return Bp(t.integerValue||t.doubleValue)}function hv(t){return ad(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fv=function(t,e){this.field=t,this.transform=e},pv=function(t,e){this.version=t,this.transformResults=e},dv=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function vv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var gv=function(){};function mv(t,e,n){t instanceof Iv?function(t,e,n){var r=t.value.clone(),i=Sv(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Tv?function(t,e,n){if(vv(t.precondition,e)){var r=Sv(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ev(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function yv(t,e,n){t instanceof Iv?function(t,e,n){if(vv(t.precondition,e)){var r=t.value.clone(),i=Cv(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(wv(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Tv?function(t,e,n){if(vv(t.precondition,e)){var r=Cv(t.fieldTransforms,n,e),i=e.data;i.setAll(Ev(t)),i.setAll(r),e.convertToFoundDocument(wv(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){vv(t.precondition,e)&&e.convertToNoDocument(Pp.min())}(t,e)}function bv(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=rv(o.transform,a||null);null!=s&&(null==n&&(n=hd.empty()),n.set(o.field,s))}return n||null}function _v(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&kp(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ov&&e instanceof ov||t instanceof sv&&e instanceof sv?kp(t.elements,e.elements,Jp):t instanceof cv&&e instanceof cv?Jp(t.A,e.A):t instanceof iv&&e instanceof iv}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function wv(t){return t.isFoundDocument()?t.version:Pp.min()}var Iv=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return pt(e,t),e}(gv),Tv=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return pt(e,t),e}(gv);function Ev(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Sv(t,e,n){var r=new Map;Ip(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,nv(a,s,n[i]))}return r}function Cv(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,ev(s,u,e))}return r}var kv,Nv,Av=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return pt(e,t),e}(gv),Pv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return pt(e,t),e}(gv),Rv=function(t){this.count=t};function xv(t){switch(t){default:return wp();case pp.CANCELLED:case pp.UNKNOWN:case pp.DEADLINE_EXCEEDED:case pp.RESOURCE_EXHAUSTED:case pp.INTERNAL:case pp.UNAVAILABLE:case pp.UNAUTHENTICATED:return!1;case pp.INVALID_ARGUMENT:case pp.NOT_FOUND:case pp.ALREADY_EXISTS:case pp.PERMISSION_DENIED:case pp.FAILED_PRECONDITION:case pp.ABORTED:case pp.OUT_OF_RANGE:case pp.UNIMPLEMENTED:case pp.DATA_LOSS:return!0}}function Dv(t){if(void 0===t)return yp("GRPC error has no .code"),pp.UNKNOWN;switch(t){case kv.OK:return pp.OK;case kv.CANCELLED:return pp.CANCELLED;case kv.UNKNOWN:return pp.UNKNOWN;case kv.DEADLINE_EXCEEDED:return pp.DEADLINE_EXCEEDED;case kv.RESOURCE_EXHAUSTED:return pp.RESOURCE_EXHAUSTED;case kv.INTERNAL:return pp.INTERNAL;case kv.UNAVAILABLE:return pp.UNAVAILABLE;case kv.UNAUTHENTICATED:return pp.UNAUTHENTICATED;case kv.INVALID_ARGUMENT:return pp.INVALID_ARGUMENT;case kv.NOT_FOUND:return pp.NOT_FOUND;case kv.ALREADY_EXISTS:return pp.ALREADY_EXISTS;case kv.PERMISSION_DENIED:return pp.PERMISSION_DENIED;case kv.FAILED_PRECONDITION:return pp.FAILED_PRECONDITION;case kv.ABORTED:return pp.ABORTED;case kv.OUT_OF_RANGE:return pp.OUT_OF_RANGE;case kv.UNIMPLEMENTED:return pp.UNIMPLEMENTED;case kv.DATA_LOSS:return pp.DATA_LOSS;default:return wp()}}(Nv=kv||(kv={}))[Nv.OK=0]="OK",Nv[Nv.CANCELLED=1]="CANCELLED",Nv[Nv.UNKNOWN=2]="UNKNOWN",Nv[Nv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nv[Nv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nv[Nv.NOT_FOUND=5]="NOT_FOUND",Nv[Nv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nv[Nv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nv[Nv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nv[Nv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nv[Nv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nv[Nv.ABORTED=10]="ABORTED",Nv[Nv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nv[Nv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nv[Nv.INTERNAL=13]="INTERNAL",Nv[Nv.UNAVAILABLE=14]="UNAVAILABLE",Nv[Nv.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ov=function(){function t(t,e){this.comparator=t,this.root=e||Mv.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mv.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mv.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Lv(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Lv(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Lv(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Lv(this.root,t,this.comparator,!0)},t}(),Lv=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Mv=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw wp();if(this.right.isRed())throw wp();var t=this.left.check();if(t!==this.right.check())throw wp();return t+(this.isRed()?0:1)},t}();Mv.EMPTY=null,Mv.RED=!0,Mv.BLACK=!1,Mv.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw wp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw wp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw wp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw wp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw wp()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Mv(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Fv=function(){function t(t){this.comparator=t,this.data=new Ov(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Uv(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Uv(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Uv=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),jv=new Ov(Yp.comparator);function qv(){return jv}var Vv=new Ov(Yp.comparator);function Bv(){return Vv}var Kv=new Ov(Yp.comparator);function Wv(){return Kv}var Hv=new Fv(Yp.comparator);function zv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Hv,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Gv=new Fv(Cp);function $v(){return Gv}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qv=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Yv.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Pp.min(),r,$v(),qv(),zv())},t}(),Yv=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(jp.EMPTY_BYTE_STRING,n,zv(),zv(),zv())},t}(),Xv=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Jv=function(t,e){this.targetId=t,this.V=e},Zv=function(t,e,n,r){void 0===n&&(n=jp.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},tg=function(){function t(){this.S=0,this.D=rg(),this.C=jp.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=zv(),e=zv(),n=zv();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:wp()}})),new Yv(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=rg()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),eg=function(){function t(t){this.W=t,this.G=new Map,this.H=qv(),this.J=ng(),this.Y=new Fv(Cp)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:wp()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(yd(i))if(0===n){var o=new Yp(i.path);this.tt(e,o,pd.newNoDocument(o,Pp.min()))}else Ip(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&yd(o.target)){var a=new Yp(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,pd.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=zv();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Qv(t,n,this.Y,this.H,r);return this.H=qv(),this.J=ng(),this.Y=new Fv(Cp),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new tg,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Fv(Cp),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||mp("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new tg),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ng(){return new Ov(Yp.comparator)}function rg(){return new Ov(Yp.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ig={asc:"ASCENDING",desc:"DESCENDING"},og={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ag=function(t,e){this.databaseId=t,this.I=e};function sg(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ug(t,e){return t.I?e.toBase64():e.toUint8Array()}function cg(t,e){return sg(t,e.toTimestamp())}function lg(t){return Ip(!!t),Pp.fromTimestamp(function(t){var e=Vp(t);return new Ap(e.seconds,e.nanos)}(t))}function hg(t,e){return function(t){return new Lp(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function fg(t){var e=Lp.fromString(t);return Ip(Mg(e)),e}function pg(t,e){return hg(t.databaseId,e.path)}function dg(t,e){var n=fg(e);if(n.get(1)!==t.databaseId.projectId)throw new dp(pp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new dp(pp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Yp(yg(n))}function vg(t,e){return hg(t.databaseId,e)}function gg(t){var e=fg(t);return 4===e.length?Lp.emptyPath():yg(e)}function mg(t){return new Lp(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yg(t){return Ip(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function bg(t,e,n){return{name:pg(t,e),fields:n.value.mapValue.fields}}function _g(t,e,n){var r=dg(t,e.name),i=lg(e.updateTime),o=new hd({mapValue:{fields:e.fields}}),a=pd.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function wg(t,e){var n;if(e instanceof Iv)n={update:bg(t,e.key,e.value)};else if(e instanceof Av)n={delete:pg(t,e.key)};else if(e instanceof Tv)n={update:bg(t,e.key,e.data),updateMask:Lg(e.fieldMask)};else{if(!(e instanceof Pv))return wp();n={verify:pg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof iv)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ov)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof sv)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cv)return{fieldPath:e.field.canonicalString(),increment:n.A};throw wp()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:cg(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:wp()}(t,e.precondition)),n}function Ig(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?dv.updateTime(lg(t.updateTime)):void 0!==t.exists?dv.exists(t.exists):dv.none()}(e.currentDocument):dv.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ip("REQUEST_TIME"===e.setToServerValue),n=new iv;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ov(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new sv(i)}else"increment"in e?n=new cv(t,e.increment):wp();var o=Fp.fromServerFormat(e.fieldPath);return new fv(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=dg(t,e.update.name),o=new hd({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Up(e.map((function(t){return Fp.fromServerFormat(t)})))}(e.updateMask);return new Tv(i,o,a,n,r)}return new Iv(i,o,n,r)}if(e.delete){var s=dg(t,e.delete);return new Av(s,n)}if(e.verify){var u=dg(t,e.verify);return new Pv(u,n)}return wp()}function Tg(t,e){return{documents:[vg(t,e.path)]}}function Eg(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=vg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=vg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ud(t.value))return{unaryFilter:{field:Rg(t.field),op:"IS_NAN"}};if(sd(t.value))return{unaryFilter:{field:Rg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ud(t.value))return{unaryFilter:{field:Rg(t.field),op:"IS_NOT_NAN"}};if(sd(t.value))return{unaryFilter:{field:Rg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rg(t.field),op:Pg(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Rg(t.field),direction:Ag(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Gp(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=kg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=kg(e.endAt)),n}function Sg(t){var e=gg(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ip(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Cg(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Pd(xg(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Gp(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ng(n.startAt));var l=null;return n.endAt&&(l=Ng(n.endAt)),Ld(e,i,s,a,u,"F",c,l)}function Cg(t){return t?void 0!==t.unaryFilter?[Og(t)]:void 0!==t.fieldFilter?[Dg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Cg(t)})).reduce((function(t,e){return t.concat(e)})):wp():[]}function kg(t){return{before:t.before,values:t.position}}function Ng(t){var e=!!t.before,n=t.values||[];return new Nd(n,e)}function Ag(t){return ig[t]}function Pg(t){return og[t]}function Rg(t){return{fieldPath:t.canonicalString()}}function xg(t){return Fp.fromServerFormat(t.fieldPath)}function Dg(t){return bd.create(xg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wp()}}(t.fieldFilter.op),t.fieldFilter.value)}function Og(t){switch(t.unaryFilter.op){case"IS_NAN":var e=xg(t.unaryFilter.field);return bd.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=xg(t.unaryFilter.field);return bd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=xg(t.unaryFilter.field);return bd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=xg(t.unaryFilter.field);return bd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wp()}}function Lg(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Mg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=jg(e)),e=Ug(t.get(n),e);return jg(e)}function Ug(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function jg(t){return t+""}function qg(t){var e=t.length;if(Ip(e>=2),2===e)return Ip(""===t.charAt(0)&&""===t.charAt(1)),Lp.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&wp(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:wp()}o=a+2}return new Lp(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vg=function(t,e){this.seconds=t,this.nanoseconds=e},Bg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Bg.store="owner",Bg.key="owner";var Kg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Kg.store="mutationQueues",Kg.keyPath="userId";var Wg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Wg.store="mutations",Wg.keyPath="batchId",Wg.userMutationsIndex="userMutationsIndex",Wg.userMutationsKeyPath=["userId","batchId"];var Hg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Fg(e)]},t.key=function(t,e,n){return[t,Fg(e),n]},t}();Hg.store="documentMutations",Hg.PLACEHOLDER=new Hg;var zg=function(t,e){this.path=t,this.readTime=e},Gg=function(t,e){this.path=t,this.version=e},$g=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};$g.store="remoteDocuments",$g.readTimeIndex="readTimeIndex",$g.readTimeIndexPath="readTime",$g.collectionReadTimeIndex="collectionReadTimeIndex",$g.collectionReadTimeIndexPath=["parentPath","readTime"];var Qg=function(t){this.byteSize=t};Qg.store="remoteDocumentGlobal",Qg.key="remoteDocumentGlobalKey";var Yg=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Yg.store="targets",Yg.keyPath="targetId",Yg.queryTargetsIndexName="queryTargetsIndex",Yg.queryTargetsKeyPath=["canonicalId","targetId"];var Xg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Xg.store="targetDocuments",Xg.keyPath=["targetId","path"],Xg.documentTargetsIndex="documentTargetsIndex",Xg.documentTargetsKeyPath=["path","targetId"];var Jg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Jg.key="targetGlobalKey",Jg.store="targetGlobal";var Zg=function(t,e){this.collectionId=t,this.parent=e};Zg.store="collectionParents",Zg.keyPath=["collectionId","parent"];var tm=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};tm.store="clientMetadata",tm.keyPath="clientId";var em=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};em.store="bundles",em.keyPath="bundleId";var nm=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};nm.store="namedQueries",nm.keyPath="name";var rm=_t(_t([],_t(_t([],_t(_t([],_t(_t([],[Kg.store,Wg.store,Hg.store,$g.store,Yg.store,Bg.store,Jg.store,Xg.store]),[tm.store])),[Qg.store])),[Zg.store])),[em.store,nm.store]),im="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",om=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),am=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},sm=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&wp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),um=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new am,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new hm(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=gm(e.target.error);n.ft.reject(new hm(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new hm(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(mp("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new pm(e)},t}(),cm=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Mt())&&yp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return mp("SimpleDb","Removing database:",t),dm(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Mt(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(mp("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new hm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new dp(pp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new hm(t,n))},i.onupgradeneeded=function(t){mp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){mp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return gt(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=um.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),sm.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,mp("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),lm=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return dm(this.Pt.delete())},t}(),hm=function(t){function e(e,n){var r=this;return(r=t.call(this,pp.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return pt(e,t),e}(dp);function fm(t){return"IndexedDbTransactionError"===t.name}var pm=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(mp("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(mp("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),dm(n)},t.prototype.add=function(t){return mp("SimpleDb","ADD",this.store.name,t,t),dm(this.store.add(t))},t.prototype.get=function(t){var e=this;return dm(this.store.get(t)).next((function(n){return void 0===n&&(n=null),mp("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return mp("SimpleDb","DELETE",this.store.name,t),dm(this.store.delete(t))},t.prototype.count=function(){return mp("SimpleDb","COUNT",this.store.name),dm(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){mp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new sm((function(n,r){e.onerror=function(t){var e=gm(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new sm((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new lm(i),a=e(i.primaryKey,i.value,o);if(a instanceof sm){var s=a.catch((function(t){return o.done(),sm.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return sm.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function dm(t){return new sm((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=gm(t.target.error);n(e)}}))}var vm=!1;function gm(t){var e=cm._t(Mt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new dp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return vm||(vm=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return pt(e,t),e}(om);function ym(t,e){var n=Tp(t);return cm.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bm=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&mv(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&yv(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&yv(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Pp.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),zv())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&kp(this.mutations,t.mutations,(function(t,e){return _v(t,e)}))&&kp(this.baseMutations,t.baseMutations,(function(t,e){return _v(t,e)}))},t}(),_m=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ip(e.mutations.length===r.length);for(var i=Wv(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),wm=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Pp.min()),void 0===o&&(o=Pp.min()),void 0===a&&(a=jp.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Im=function(t){this.Lt=t};function Tm(t,e){if(e.document)return _g(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Yp.fromSegments(e.noDocument.path),r=Nm(e.noDocument.readTime),i=pd.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Yp.fromSegments(e.unknownDocument.path);return r=Nm(e.unknownDocument.version),pd.newUnknownDocument(o,r)}return wp()}function Em(t,e,n){var r=Sm(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:pg(t,e.key),fields:e.data.value.mapValue.fields,updateTime:sg(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new $g(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=km(e.version);return a=e.hasCommittedMutations,new $g(null,new zg(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=km(e.version);return new $g(new Gg(c,l),null,null,!0,r,i)}return wp()}function Sm(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Cm(t){var e=new Ap(t[0],t[1]);return Pp.fromTimestamp(e)}function km(t){var e=t.toTimestamp();return new Vg(e.seconds,e.nanoseconds)}function Nm(t){var e=new Ap(t.seconds,t.nanoseconds);return Pp.fromTimestamp(e)}function Am(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ig(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Ig(t.Lt,e)})),s=Ap.fromMillis(e.localWriteTimeMs);return new bm(e.batchId,s,n,a)}function Pm(t){var e,n,r=Nm(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Nm(t.lastLimboFreeSnapshotVersion):Pp.min();return void 0!==t.query.documents?(Ip(1===(n=t.query).documents.length),e=Kd(Md(gg(n.documents[0])))):e=function(t){return Kd(Sg(t))}(t.query),new wm(e,t.targetId,0,t.lastListenSequenceNumber,r,i,jp.fromBase64String(t.resumeToken))}function Rm(t,e){var n,r=km(e.snapshotVersion),i=km(e.lastLimboFreeSnapshotVersion);n=yd(e.target)?Tg(t.Lt,e.target):Eg(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Yg(e.targetId,gd(e.target),r,o,e.sequenceNumber,i,n)}function xm(t){var e=Sg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Wd(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dm=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Om(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Nm(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Om(t).put({bundleId:(n=e).id,createTime:km(lg(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Lm(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:xm(e.bundledQuery),readTime:Nm(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Lm(t).put(function(t){return{name:t.name,readTime:km(lg(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Om(t){return ym(t,em.store)}function Lm(t){return ym(t,nm.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Mm=function(){function t(){this.Bt=new Fm}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),sm.resolve()},t.prototype.getCollectionParents=function(t,e){return sm.resolve(this.Bt.getEntries(e))},t}(),Fm=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Fv(Lp.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Fv(Lp.comparator)).toArray()},t}(),Um=function(){function t(){this.qt=new Fm}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Fg(i)};return jm(t).put(o)}return sm.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Np(e),""],!1,!0);return jm(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(qg(o.parent))}return n}))},t}();function jm(t){return ym(t,Zg.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vm=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bm(t,e,n){var r=t.store(Wg.store),i=t.store(Hg.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Ip(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Hg.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return sm.waitFor(o).next((function(){return c}))}function Km(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw wp();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Vm.DEFAULT_COLLECTION_PERCENTILE=10,Vm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vm.DEFAULT=new Vm(41943040,Vm.DEFAULT_COLLECTION_PERCENTILE,Vm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vm.DISABLED=new Vm(-1,0,0);var Wm=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Ip(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zm(t).$t({index:Wg.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Gm(t),a=zm(t);return a.add({}).next((function(s){Ip("number"==typeof s);for(var u=new bm(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return wg(t.Lt,e)})),i=n.mutations.map((function(e){return wg(t.Lt,e)}));return new Wg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Fv((function(t,e){return Cp(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Hg.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Hg.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),sm.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return zm(t).get(e).next((function(t){return t?(Ip(t.userId===n.userId),Am(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?sm.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zm(t).$t({index:Wg.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ip(e.batchId>=r),o=Am(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zm(t).$t({index:Wg.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zm(t).Nt(Wg.userMutationsIndex,n).next((function(t){return t.map((function(t){return Am(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Hg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gm(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=qg(u);if(s===n.userId&&e.path.isEqual(l))return zm(t).get(c).next((function(t){if(!t)throw wp();Ip(t.userId===n.userId),o.push(Am(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Fv(Cp),i=[];return e.forEach((function(e){var o=Hg.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Gm(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=qg(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),sm.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Hg.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Fv(Cp);return Gm(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=qg(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(zm(t).get(e).next((function(t){if(null===t)throw wp();Ip(t.userId===n.userId),r.push(Am(n.R,t))})))})),sm.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Bm(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),sm.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return sm.resolve();var r=IDBKeyRange.lowerBound(Hg.prefixForUser(e.userId)),i=[];return Gm(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=qg(t[1]);i.push(o)}else r.done()})).next((function(){Ip(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Hm(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return $m(t).get(this.userId).next((function(t){return t||new Kg(e.userId,-1,"")}))},t}();function Hm(t,e,n){var r=Hg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Gm(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function zm(t){return ym(t,Wg.store)}function Gm(t){return ym(t,Hg.store)}function $m(t){return ym(t,Kg.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qm=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ym=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Qm(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Pp.fromTimestamp(new Ap(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Xm(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Ip(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Xm(t).$t((function(a,s){var u=Pm(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return sm.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Xm(t).$t((function(t,n){var r=Pm(n);e(r)}))},t.prototype.Xt=function(t){return Jm(t).get(Jg.key).next((function(t){return Ip(null!==t),t}))},t.prototype.Zt=function(t,e){return Jm(t).put(Jg.key,e)},t.prototype.te=function(t,e){return Xm(t).put(Rm(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=gd(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Xm(t).$t({range:r,index:Yg.queryTargetsIndexName},(function(t,n,r){var o=Pm(n);md(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Zm(t);return e.forEach((function(e){var a=Fg(e.path);i.push(o.put(new Xg(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),sm.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Zm(t);return sm.forEach(e,(function(e){var o=Fg(e.path);return sm.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Zm(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Zm(t),i=zv();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=qg(t[1]),o=new Yp(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Fg(e.path),r=IDBKeyRange.bound([n],[Np(n)],!1,!0),i=0;return Zm(t).$t({index:Xg.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Xm(t).get(e).next((function(t){return t?Pm(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xm(t){return ym(t,Yg.store)}function Jm(t){return ym(t,Jg.store)}function Zm(t){return ym(t,Xg.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ty(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){if(t.code!==pp.FAILED_PRECONDITION||t.message!==im)throw t;return mp("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ey(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Cp(n,i);return 0===a?Cp(r,o):a}var ny=function(){function t(t){this.ne=t,this.buffer=new Fv(ey),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ey(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ry=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;mp("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return vt(e,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return fm(e=n.sent())?(mp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ty(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),iy=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return sm.resolve(fp.o);var r=new ny(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(mp("LruGarbageCollector","Garbage collection skipped; disabled"),sm.resolve(qm)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(mp("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),qm):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(mp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),gp()<=xe.DEBUG&&mp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),sm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),oy=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new iy(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ay(t,n)},t.prototype.removeReference=function(t,e,n){return ay(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ay(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return $m(t).Ot((function(r){return Hm(t,r,e).next((function(t){return t&&(n=!0),sm.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Zm(t).delete([0,Fg(a.path)])}))}));i.push(u)}})).next((function(){return sm.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ay(t,e)},t.prototype.we=function(t,e){var n,r=Zm(t),i=fp.o;return r.$t({index:Xg.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==fp.o&&e(new Yp(qg(n)),i),i=s,n=a):i=fp.o})).next((function(){i!==fp.o&&e(new Yp(qg(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ay(t,e){return Zm(t).put(function(t,e){return new Xg(0,Fg(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sy=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){xp(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Dp(this.inner)},t}(),uy=function(){function t(){this.changes=new sy((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Pp.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:pd.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?sm.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),cy=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return fy(t).put(py(e),n)},t.prototype.removeEntry=function(t,e){var n=fy(t),r=py(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return fy(t).get(py(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return fy(t).get(py(e)).next((function(t){return{document:n.ye(e,t),size:Km(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=qv();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=qv(),i=new Ov(Yp.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Km(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return sm.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return fy(t).$t({range:r},(function(t,e,r){for(var a=Yp.fromSegments(t);o&&Yp.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=qv(),o=e.path.length+1,a={};if(n.isEqual(Pp.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Sm(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=$g.collectionReadTimeIndex}return fy(t).$t(a,(function(t,n,a){if(t.length===o){var s=Tm(r.R,n);e.path.isPrefixOf(s.key.path)?$d(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ly(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return hy(t).get(Qg.key).next((function(t){return Ip(!!t),t}))},t.prototype.me=function(t,e){return hy(t).put(Qg.key,e)},t.prototype.ye=function(t,e){if(e){var n=Tm(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Pp.min()))return n}return pd.newInvalidDocument(t)},t}(),ly=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new sy((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return pt(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Fv((function(t,e){return Cp(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Em(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Km(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Em(e.Ie.R,pd.newNoDocument(o,Pp.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),sm.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(uy);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hy(t){return ym(t,Qg.store)}function fy(t){return ym(t,$g.store)}function py(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dy=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ip(n<r&&n>=0&&r<=11);var o=new um("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Bg.store)}(t),function(t){t.createObjectStore(Kg.store,{keyPath:Kg.keyPath}),t.createObjectStore(Wg.store,{keyPath:Wg.keyPath,autoIncrement:!0}).createIndex(Wg.userMutationsIndex,Wg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Hg.store)}(t),vy(t),function(t){t.createObjectStore($g.store)}(t));var a=sm.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Xg.store),t.deleteObjectStore(Yg.store),t.deleteObjectStore(Jg.store)}(t),vy(t)),a=a.next((function(){return function(t){var e=t.store(Jg.store),n=new Jg(0,0,Pp.min().toTimestamp(),0);return e.put(Jg.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Wg.store).Nt().next((function(n){t.deleteObjectStore(Wg.store),t.createObjectStore(Wg.store,{keyPath:Wg.keyPath,autoIncrement:!0}).createIndex(Wg.userMutationsIndex,Wg.userMutationsKeyPath,{unique:!0});var r=e.store(Wg.store),i=n.map((function(t){return r.put(t)}));return sm.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(tm.store,{keyPath:tm.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Qg.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore($g.store);e.createIndex($g.readTimeIndex,$g.readTimeIndexPath,{unique:!1}),e.createIndex($g.collectionReadTimeIndex,$g.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(em.store,{keyPath:em.keyPath})}(t),function(t){t.createObjectStore(nm.store,{keyPath:nm.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store($g.store).$t((function(t,n){e+=Km(n)})).next((function(){var n=new Qg(e);return t.store(Qg.store).put(Qg.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Kg.store),r=t.store(Wg.store);return n.Nt().next((function(n){return sm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Wg.userMutationsIndex,i).next((function(r){return sm.forEach(r,(function(r){Ip(r.userId===n.userId);var i=Am(e.R,r);return Bm(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Xg.store),n=t.store($g.store);return t.store(Jg.store).get(Jg.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Lp(n),a=function(t){return[0,Fg(t)]}(o);r.push(e.get(a).next((function(n){return n?sm.resolve():function(n){return e.put(new Xg(0,Fg(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return sm.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Zg.store,{keyPath:Zg.keyPath});var n=e.store(Zg.store),r=new Fm,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Fg(i)})}};return e.store($g.store).$t({Ft:!0},(function(t,e){var n=new Lp(t);return i(n.popLast())})).next((function(){return e.store(Hg.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=qg(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Yg.store);return n.$t((function(t,r){var i=Pm(r),o=Rm(e.R,i);return n.put(o)}))},t}();function vy(t){t.createObjectStore(Xg.store,{keyPath:Xg.keyPath}).createIndex(Xg.documentTargetsIndex,Xg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Yg.store,{keyPath:Yg.keyPath}).createIndex(Yg.queryTargetsIndexName,Yg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Jg.store)}var gy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",my=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new dp(pp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oy(this,i),this.Le=n+"main",this.R=new Im(u),this.Be=new cm(this.Le,11,new dy(this.R)),this.qe=new Ym(this.referenceDelegate,this.R),this.Ut=new Um,this.Ue=function(t,e){return new cy(t,e)}(this.R,this.Ut),this.Ke=new Dm,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&yp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new dp(pp.FAILED_PRECONDITION,gy);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new fp(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return vt(e,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return by(e).put(new tm(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(fm(e))return mp("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return mp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return yy(t).get(Bg.key).next((function(t){return sm.resolve(e.tn(t))}))},t.prototype.en=function(t){return by(t).delete(this.clientId)},t.prototype.nn=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i=this;return gt(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=ym(t,tm.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return sm.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?sm.resolve(!0):yy(t).get(Bg.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new dp(pp.FAILED_PRECONDITION,gy);return!1}}return!(!e.networkEnabled||!e.inForeground)||by(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&mp("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return vt(this,void 0,void 0,(function(){var t=this;return gt(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Bg.store,tm.store],(function(e){var n=new mm(e,fp.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return by(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Wm.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;mp("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,rm,(function(o){return i=new mm(o,r.Ne?r.Ne.next():fp.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw yp("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new dp(pp.FAILED_PRECONDITION,im);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return yy(t).get(Bg.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new dp(pp.FAILED_PRECONDITION,gy)}))},t.prototype.Ze=function(t){var e=new Bg(this.clientId,this.allowTabSynchronization,Date.now());return yy(t).put(Bg.key,e)},t.yt=function(){return cm.yt()},t.prototype.Xe=function(t){var e=this,n=yy(t);return n.get(Bg.key).next((function(t){return e.tn(t)?(mp("IndexedDbPersistence","Releasing primary lease."),n.delete(Bg.key)):sm.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(yp("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),zt()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return mp("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return yp("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){yp("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function yy(t){return ym(t,Bg.store)}function by(t){return ym(t,tm.store)}function _y(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var wy=function(t,e){this.progress=t,this.wn=e},Iy=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Yp.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Vd(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Yp(e)).next((function(t){var e=Bv();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Bv();return this.Ut.getCollectionParents(t,i).next((function(a){return sm.forEach(a,(function(a){var s=function(t,e){return new Od(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=pd.newInvalidDocument(c),r=r.insert(c,l)),yv(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){$d(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=zv(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Tv&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Ty=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=zv(),i=zv(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ey=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Pp.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Fd(e)||Ud(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(gp()<=xe.DEBUG&&mp("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Gd(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Fv(Qd(t));return e.forEach((function(e,r){$d(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return gp()<=xe.DEBUG&&mp("QueryEngine","Using full collection scan to execute query:",Gd(e)),this.Sn.getDocumentsMatchingQuery(t,e,Pp.min())},t}(),Sy=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Ov(Cp),this.Fn=new sy((function(t){return gd(t)}),md),this.$n=Pp.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Iy(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cy(t,e,n,r){return new Sy(t,e,n,r)}function ky(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return n=Tp(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Iy(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=zv(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Ny(t,e){var n=Tp(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=sm.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Ip(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Ay(t){var e=Tp(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Py(t,e){var n=Tp(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ip(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=qv();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ry(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Pp.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return sm.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function Ry(t,e,n,r,i){var o=zv();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=qv();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Pp.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):mp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function xy(t,e){var n=Tp(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Dy(t,e){var n=Tp(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,sm.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new wm(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Oy(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:r=Tp(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!fm(a=s.sent()))throw a;return mp("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function Ly(t,e,n){var r=Tp(t),i=Pp.min(),o=zv();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Tp(t),i=r.Fn.get(n);return void 0!==i?sm.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Kd(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Pp.min(),n?o:zv())})).next((function(t){return{documents:t,Bn:o}}))}))}function My(t,e){var n=Tp(t),r=Tp(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Fy(t){var e=Tp(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Tp(t),i=qv(),o=Sm(n),a=fy(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:$g.readTimeIndex,range:s},(function(t,e){var n=Tm(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Cm(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Uy(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){return[2,(e=Tp(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=fy(t),n=Pp.min();return e.$t({index:$g.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Cm(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function jy(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,p;return gt(this,(function(d){switch(d.label){case 0:for(i=Tp(t),o=zv(),a=qv(),s=Wv(),u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Dy(i,function(t){return Kd(Md(Lp.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ry(t,f,a,Pp.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function qy(t,e,n){return void 0===n&&(n=zv()),vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,Dy(t,Kd(xm(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Tp(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=lg(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(jp.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Vy=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return sm.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:lg(n.createTime)}),sm.resolve()},t.prototype.getNamedQuery=function(t,e){return sm.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:xm(t.bundledQuery),readTime:lg(t.readTime)}}(e)),sm.resolve()},t}(),By=function(){function t(){this.Wn=new Fv(Ky.Gn),this.zn=new Fv(Ky.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ky(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Ky(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Yp(new Lp([])),r=new Ky(n,t),i=new Ky(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Yp(new Lp([])),n=new Ky(e,t),r=new Ky(e,t+1),i=zv();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Ky(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ky=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Yp.comparator(t.key,e.key)||Cp(t.ns,e.ns)},t.Hn=function(t,e){return Cp(t.ns,e.ns)||Yp.comparator(t.key,e.key)},t}(),Wy=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Fv(Ky.Gn)}return t.prototype.checkEmpty=function(t){return sm.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new bm(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Ky(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return sm.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return sm.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return sm.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return sm.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return sm.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ky(e,0),i=new Ky(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),sm.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Fv(Cp);return e.forEach((function(t){var e=new Ky(t,0),i=new Ky(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),sm.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Yp.isDocumentKey(i)||(i=i.child(""));var o=new Ky(new Yp(i),0),a=new Fv(Cp);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),sm.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ip(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return sm.forEach(e.mutations,(function(i){var o=new Ky(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ky(e,0),r=this.rs.firstAfterOrEqual(n);return sm.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,sm.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Hy=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ov(Yp.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return sm.resolve(n?n.document.clone():pd.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=qv();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():pd.newInvalidDocument(t))})),sm.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=qv(),i=new Yp(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||$d(e,c)&&(r=r.insert(c.key,c.clone()))}return sm.resolve(r)},t.prototype.fs=function(t,e){return sm.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new zy(this)},t.prototype.getSize=function(t){return sm.resolve(this.size)},t}(),zy=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return pt(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),sm.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(uy),Gy=function(){function t(t){this.persistence=t,this.ds=new sy((function(t){return gd(t)}),md),this.lastRemoteSnapshotVersion=Pp.min(),this.highestTargetId=0,this.ws=0,this._s=new By,this.targetCount=0,this.ys=Qm.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),sm.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return sm.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return sm.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),sm.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),sm.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Qm(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,sm.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),sm.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,sm.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),sm.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return sm.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return sm.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),sm.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),sm.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),sm.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return sm.resolve(n)},t.prototype.containsKey=function(t,e){return sm.resolve(this._s.containsKey(e))},t}(),$y=function(){function t(t,e){var n=this;this.gs={},this.Ne=new fp(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Gy(this),this.Ut=new Mm,this.Ue=function(t,e){return new Hy(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Im(e),this.Ke=new Vy(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Wy(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;mp("MemoryPersistence","Starting transaction:",t);var i=new Qy(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return sm.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Qy=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return pt(e,t),e}(om),Yy=function(){function t(t){this.persistence=t,this.As=new By,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw wp()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),sm.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),sm.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),sm.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sm.forEach(this.vs,(function(r){var i=Yp.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return sm.or([function(){return sm.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Xy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jy(t,e){return"firestore_clients_"+t+"_"+e}function Zy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function tb(t,e){return"firestore_targets_"+t+"_"+e}Xy.UNAUTHENTICATED=new Xy(null),Xy.GOOGLE_CREDENTIALS=new Xy("google-credentials-uid"),Xy.FIRST_PARTY=new Xy("first-party-uid"),Xy.MOCK_USER=new Xy("mock-user");var eb=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new dp(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(yp("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),nb=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new dp(i.error.code,i.error.message)),o?new t(e,i.state,r):(yp("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),rb=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=$v(),a=0;i&&a<r.activeTargetIds.length;++a)i=Qp(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(yp("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ib=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(yp("SharedClientState","Failed to parse online state: "+e),null)},t}(),ob=function(){function t(){this.activeTargetIds=$v()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ab=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ov(Cp),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Jy(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new ob),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return gt(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Jy(this.persistenceKey,r)))&&(o=rb.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)l=c[u],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(tb(this.persistenceKey,t));if(n){var r=nb.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(tb(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return mp("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){mp("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){mp("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(mp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void yp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return vt(e,void 0,void 0,(function(){var t,e,r,i,o,a;return gt(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=fp.o;if(null!=t)try{var n=JSON.parse(t);Ip("number"==typeof n),e=n}catch(t){yp("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==fp.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new eb(this.currentUser,t,e,n),i=Zy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Zy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=tb(this.persistenceKey,t),i=new nb(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return rb.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return eb.Vs(new Xy(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return nb.Vs(r,e)},t.prototype.js=function(t){return ib.Vs(t)},t.prototype.ii=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(mp("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=$v();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),sb=function(){function t(){this.li=new ob,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new ob,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ub=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),cb=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){mp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){mp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),lb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},hb=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),fb=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return pt(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new hp;a.listenOnce(op.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case ip.NO_ERROR:var e=a.getResponseJson();mp("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ip.TIMEOUT:mp("Connection",'RPC "'+t+'" timed out'),o(new dp(pp.DEADLINE_EXCEEDED,"Request time out"));break;case ip.HTTP_ERROR:var n=a.getStatus();if(mp("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(pp).indexOf(e)>=0?e:pp.UNKNOWN}(r.status);o(new dp(s,r.message))}else o(new dp(pp.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new dp(pp.UNAVAILABLE,"Connection failed."));break;default:wp()}}finally{mp("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Zf,i=Hl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new cp({})),this.ki(o.initMessageHeaders,e),Ft()||Vt()||Bt()||Kt()||Wt()||qt()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");mp("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new hb({Ei:function(t){c?mp("Connection","Not sending because WebChannel is closed:",t):(u||(mp("Connection","Opening WebChannel transport."),s.open(),u=!0),mp("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(s,lp.EventType.OPEN,(function(){c||mp("Connection","WebChannel transport opened.")})),h(s,lp.EventType.CLOSE,(function(){c||(c=!0,mp("Connection","WebChannel transport closed"),l.Vi())})),h(s,lp.EventType.ERROR,(function(t){c||(c=!0,bp("Connection","WebChannel transport errored:",t),l.Vi(new dp(pp.UNAVAILABLE,"The operation could not be completed")))})),h(s,lp.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ip(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){mp("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=kv[t];if(void 0!==e)return Dv(e)}(o),u=i.message;void 0===a&&(a=pp.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.Vi(new dp(a,u)),s.close()}else mp("Connection","WebChannel received:",n),l.Si(n)}})),h(i,ap.STAT_EVENT,(function(t){t.stat===sp?mp("Connection","Detected buffering proxy"):t.stat===up&&mp("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);mp("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return mp("RestConnection","Received: ",t),t}),(function(e){throw bp("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=lb[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pb(){return"undefined"!=typeof window?window:null}function db(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vb(t){return new ag(t,!0)}var gb=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&mp("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),mb=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new gb(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return vt(this,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===pp.RESOURCE_EXHAUSTED?(yp(e.toString()),yp("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===pp.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new dp(pp.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return vt(t,void 0,void 0,(function(){return gt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return mp("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(mp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),yb=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return pt(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:wp()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ip(void 0===e||"string"==typeof e),jp.fromBase64String(e||"")):(Ip(void 0===e||e instanceof Uint8Array),jp.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?pp.UNKNOWN:Dv(t.code);return new dp(e,t.message||"")}(s);n=new Zv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=dg(t,r.document.name),o=lg(r.document.updateTime);var s=new hd({mapValue:{fields:r.document.fields}}),u=(a=pd.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Xv(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=dg(t,r.document),o=r.readTime?lg(r.readTime):Pp.min(),s=pd.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Xv([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=dg(t,r.document),o=r.removedTargetIds||[],n=new Xv([],o,i,null);else{if(!("filter"in e))return wp();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Rv(r),o=l.targetId,n=new Jv(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Pp.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Pp.min():e.readTime?lg(e.readTime):Pp.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=mg(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=yd(r)?{documents:Tg(t,r)}:{query:Eg(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ug(t,e.resumeToken):e.snapshotVersion.compareTo(Pp.min())>0&&(n.readTime=sg(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wp()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=mg(this.R),e.removeTarget=t,this.cr(e)},e}(mb),bb=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return pt(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Ip(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ip(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?lg(t.updateTime):lg(e);return n.isEqual(Pp.min())&&(n=lg(e)),new pv(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=lg(t.commitTime);return this.listener.Tr(n,e)}return Ip(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=mg(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return wg(e.R,t)}))};this.cr(n)},e}(mb),_b=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return pt(e,t),e.prototype.br=function(){if(this.Rr)throw new dp(pp.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===pp.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new dp(pp.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===pp.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new dp(pp.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),wb=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(yp(e),this.Vr=!1):mp("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Ib=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return vt(o,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return Rb(this)?(mp("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return(e=Tp(t)).Or.add(4),[4,Eb(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Tb(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new wb(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Tb(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:if(!Rb(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Eb(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Sb(t,e){var n=Tp(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Pb(n)?Ab(n):zb(n).er()&&kb(n,e))}function Cb(t,e){var n=Tp(t),r=zb(n);n.$r.delete(e),r.er()&&Nb(n,e),0===n.$r.size&&(r.er()?r.ir():Rb(n)&&n.Br.set("Unknown"))}function kb(t,e){t.qr.U(e.targetId),zb(t).mr(e)}function Nb(t,e){t.qr.U(e),zb(t).yr(e)}function Ab(t){t.qr=new eg({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),zb(t).start(),t.Br.Sr()}function Pb(t){return Rb(t)&&!zb(t).tr()&&t.$r.size>0}function Rb(t){return 0===Tp(t).Or.size}function xb(t){t.qr=void 0}function Db(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return t.$r.forEach((function(e,n){kb(t,e)})),[2]}))}))}function Ob(t,e){return vt(this,void 0,void 0,(function(){return gt(this,(function(n){return xb(t),Pb(t)?(t.Br.Nr(e),Ab(t)):t.Br.set("Unknown"),[2]}))}))}function Lb(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof Zv&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),mp("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Mb(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Xv?t.qr.X(e):e instanceof Jv?t.qr.rt(e):t.qr.et(e),n.isEqual(Pp.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Ay(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(jp.EMPTY_BYTE_STRING,n.snapshotVersion)),Nb(t,e);var r=new wm(n.target,e,1,n.sequenceNumber);kb(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return mp("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Mb(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Mb(t,e,n){return vt(this,void 0,void 0,(function(){var r=this;return gt(this,(function(i){switch(i.label){case 0:if(!fm(e))throw e;return t.Or.add(1),[4,Eb(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ay(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return mp("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Tb(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Fb(t,e){return e().catch((function(n){return Mb(t,n,e)}))}function Ub(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:e=Tp(t),n=Gb(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Rb(t)&&t.Fr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,xy(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=Gb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Mb(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return jb(e)&&qb(e),[2]}}))}))}function jb(t){return Rb(t)&&!Gb(t).tr()&&t.Fr.length>0}function qb(t){Gb(t).start()}function Vb(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return Gb(t).Ar(),[2]}))}))}function Bb(t){return vt(this,void 0,void 0,(function(){var e,n,r,i;return gt(this,(function(o){for(e=Gb(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Kb(t,e,n){return vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=_m.from(r,e,n),[4,Fb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Ub(t)];case 2:return o.sent(),[2]}}))}))}function Wb(t,e){return vt(this,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return e&&Gb(t).pr?[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return xv(r=e.code)&&r!==pp.ABORTED?(n=t.Fr.shift(),Gb(t).sr(),[4,Fb(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Ub(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return jb(t)&&qb(t),[2]}}))}))}function Hb(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return n=Tp(t),e?(n.Or.delete(2),[4,Tb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Eb(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function zb(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Tp(t);return r.br(),new yb(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Db.bind(null,t),Ri:Ob.bind(null,t),_r:Lb.bind(null,t)}),t.Mr.push((function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Pb(t)?Ab(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),xb(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Gb(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Tp(t);return r.br(),new bb(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Vb.bind(null,t),Ri:Wb.bind(null,t),Ir:Bb.bind(null,t),Tr:Kb.bind(null,t)}),t.Mr.push((function(n){return vt(e,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Ub(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(mp("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var $b=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new am,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dp(pp.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Qb(t,e){if(yp("AsyncQueue",e+": "+t),fm(t))return new dp(pp.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Yp.comparator(e.key,n.key)}:function(t,e){return Yp.comparator(t.key,e.key)},this.keyedMap=Bv(),this.sortedSet=new Ov(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Xb=function(){function t(){this.Qr=new Ov(Yp.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):wp():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Jb=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Yb.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Zb=function(){this.Wr=void 0,this.listeners=[]},t_=function(){this.queries=new sy((function(t){return zd(t)}),Hd),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function e_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:if(n=Tp(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Zb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=Qb(s,"Initialization of query '"+Gd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&o_(n),[2]}}))}))}function n_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){return n=Tp(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function r_(t,e){for(var n=Tp(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&o_(n)}function i_(t,e,n){var r=Tp(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function o_(t){t.Gr.forEach((function(t){t.next()}))}var a_=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Jb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Jb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),s_=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),u_=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return dg(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?_g(this.R,t.document,!1):pd.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return lg(t)},t}(),c_=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=l_(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new u_(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||zv()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,jy(this.localStore,new u_(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,qy(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new wy(Object.assign({},this.progress),t))]}}))}))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function l_(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var h_=function(t){this.key=t},f_=function(t){this.key=t},p_=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=zv(),this.mutatedKeys=zv(),this.lo=Qd(t),this.fo=new Yb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Xb,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Fd(this.query)&&i.size===this.query.limit?i.last():null,c=Ud(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=$d(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Fd(this.query)||Ud(this.query))for(;a.size>this.query.limit;){var l=Fd(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wp()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Jb(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Xb,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=zv(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new f_(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new h_(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=zv();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Jb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),d_=function(t,e,n){this.query=t,this.targetId=e,this.view=n},v_=function(t){this.key=t,this.bo=!1},g_=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new sy((function(t){return zd(t)}),Hd),this.Vo=new Map,this.So=new Set,this.Do=new Ov(Yp.comparator),this.Co=new Map,this.No=new By,this.xo={},this.ko=new Map,this.Fo=Qm.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function m_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return n=z_(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Dy(n.localStore,Kd(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,y_(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Sb(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function y_(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u,c;return gt(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a;return gt(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Ly(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(R_(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Ly(t.localStore,e,!0)];case 1:return i=l.sent(),o=new p_(e,i.Bn),a=o._o(i.documents),s=Yv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),R_(t,n,u.To),c=new d_(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function b_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return n=Tp(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Hd(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Oy(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Cb(n.remoteStore,r.targetId),A_(n,r.targetId)})).catch(ty)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return A_(n,r.targetId),[4,Oy(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function __(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:r=G_(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Tp(t),i=Ap.now(),o=e.reduce((function(t,e){return t.add(e.key)}),zv());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=bv(c,n.get(c.key));null!=l&&a.push(new Tv(c.key,l,fd(l.value.mapValue),dv.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ov(Cp)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,O_(r,i.changes)];case 3:return s.sent(),[4,Ub(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Qb(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function w_(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:n=Tp(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Py(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Ip(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ip(r.bo):t.removedDocuments.size>0&&(Ip(r.bo),r.bo=!1))})),[4,O_(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ty(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function I_(t,e,n){var r=Tp(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Tp(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&o_(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function T_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:return(r=Tp(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Ov(Yp.comparator)).insert(o,pd.newNoDocument(o,Pp.min())),s=zv().add(o),u=new Qv(Pp.min(),new Map,new Fv(Cp),a,s),[4,w_(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),D_(r),[3,4];case 2:return[4,Oy(r.localStore,e,!1).then((function(){return A_(r,e,n)})).catch(ty)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function E_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:n=Tp(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ny(n.localStore,e)];case 2:return i=o.sent(),N_(n,r,null),k_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,O_(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ty(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function S_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:r=Tp(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Tp(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Ip(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),N_(r,e,n),k_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,O_(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ty(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function C_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:Rb((n=Tp(t)).remoteStore)||mp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Tp(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=Qb(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function k_(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function N_(t,e,n){var r=Tp(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function A_(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||P_(t,e)}))}function P_(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Cb(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),D_(t))}function R_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof h_?(t.No.addReference(o.key,e),x_(t,o)):o instanceof f_?(mp("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||P_(t,o.key)):wp()}}function x_(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(mp("SyncEngine","New document in limbo: "+n),t.So.add(r),D_(t))}function D_(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Yp(Lp.fromString(e)),r=t.Fo.next();t.Co.set(r,new v_(n)),t.Do=t.Do.insert(n,r),Sb(t.remoteStore,new wm(Kd(Md(n.path)),r,2,fp.o))}}function O_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return r=Tp(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ty.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return gt(this,(function(h){switch(h.label){case 0:n=Tp(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return sm.forEach(e,(function(e){return sm.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return sm.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!fm(r=h.sent()))throw r;return mp("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.kn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function L_(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return(n=Tp(t)).currentUser.isEqual(e)?[3,3]:(mp("SyncEngine","User change. New user:",e.toKey()),[4,ky(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new dp(pp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,O_(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function M_(t,e){var n=Tp(t),r=n.Co.get(e);if(r&&r.bo)return zv().add(r.key);var i=zv(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function F_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,Ly((n=Tp(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&R_(n,e.targetId,i.To),i)]}}))}))}function U_(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){return[2,Fy((e=Tp(t)).localStore).then((function(t){return O_(e,t)}))]}))}))}function j_(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Tp(t),r=Tp(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):sm.resolve(null)}))}))}((i=Tp(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ub(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(N_(i,e,r||null),k_(i,e),function(t,e){Tp(Tp(t)._n).Gt(e)}(i.localStore,e)):wp(),a.label=4;case 4:return[4,O_(i,o)];case 5:return a.sent(),[3,7];case 6:mp("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function q_(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return gt(this,(function(l){switch(l.label){case 0:return z_(n=Tp(t)),G_(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,V_(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,Hb(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],Sb(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return A_(n,e),Oy(n.localStore,e,!0)})),Cb(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,V_(n,u)];case 5:return l.sent(),function(t){var e=Tp(t);e.Co.forEach((function(t,n){Cb(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ov(Yp.comparator)}(n),n.$o=!1,[4,Hb(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function V_(t,e,n){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,p,d,v;return gt(this,(function(g){switch(g.label){case 0:n=Tp(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Dy(n.localStore,Kd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,F_(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,My(n.localStore,s)];case 8:return v=g.sent(),[4,Dy(n.localStore,v)];case 9:return u=g.sent(),[4,y_(n,B_(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function B_(t){return Ld(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function K_(t){var e=Tp(t);return Tp(Tp(e.localStore).persistence).fn()}function W_(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a;return gt(this,(function(s){switch(s.label){case 0:return(i=Tp(t)).$o?(mp("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Fy(i.localStore)];case 3:return o=s.sent(),a=Qv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,O_(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Oy(i.localStore,e,!0)];case 6:return s.sent(),A_(i,e,r),[3,8];case 7:wp(),s.label=8;case 8:return[2]}}))}))}function H_(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return gt(this,(function(p){switch(p.label){case 0:if(!(r=z_(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(mp("SyncEngine","Adding an already active target "+a),[3,5]):[4,My(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,Dy(r.localStore,s)];case 3:return u=p.sent(),[4,y_(r,B_(s),u.targetId,!1)];case 4:p.sent(),Sb(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return gt(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Oy(r.localStore,t,!1).then((function(){Cb(r.remoteStore,t),A_(r,t)})).catch(ty)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function z_(t){var e=Tp(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=w_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T_.bind(null,e),e.vo._r=r_.bind(null,e.eventManager),e.vo.Mo=i_.bind(null,e.eventManager),e}function G_(t){var e=Tp(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S_.bind(null,e),e}function $_(t,e,n){var r=Tp(t);(function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Tp(t),r=lg(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(l_(r)),i=new c_(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,O_(t,s.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Tp(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return bp("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */)(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Q_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return this.R=vb(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Cy(this.persistence,new Ey,t.initialUser,this.R)},t.prototype.qo=function(t){return new $y(Yy.bs,this.R)},t.prototype.Bo=function(t){return new sb},t.prototype.terminate=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Y_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return pt(e,t),e.prototype.initialize=function(e){return vt(this,void 0,void 0,(function(){var n=this;return gt(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Uy(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,G_(this.Qo.syncEngine)];case 4:return r.sent(),[4,Ub(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Cy(this.persistence,new Ey,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new ry(e,t.asyncQueue)},e.prototype.qo=function(t){var e=_y(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vm.withCacheSize(this.cacheSizeBytes):Vm.DEFAULT;return new my(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,pb(),db(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new sb},e}(Q_),X_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return pt(e,t),e.prototype.initialize=function(e){return vt(this,void 0,void 0,(function(){var n,r=this;return gt(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof ab?(this.sharedClientState.syncEngine={ui:j_.bind(null,n),ai:W_.bind(null,n),hi:H_.bind(null,n),fn:K_.bind(null,n),ci:U_.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return[4,q_(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=pb();if(!ab.yt(e))throw new dp(pp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=_y(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ab(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Y_),J_=function(){function t(){}return t.prototype.initialize=function(t,e){return vt(this,void 0,void 0,(function(){var n=this;return gt(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return I_(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=L_.bind(null,this.syncEngine),[4,Hb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new t_},t.prototype.createDatastore=function(t){var e,n=vb(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new fb(e));return function(t,e,n){return new _b(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return I_(a.syncEngine,t,0)},o=cb.yt()?new cb:new ub,new Ib(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new g_(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=Tp(t),mp("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Eb(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Z_(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return vt(this,void 0,void 0,(function(){var r;return gt(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tw=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ew=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new am,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new s_(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),nw=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new dp(pp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return n=Tp(t),r=mg(n.R)+"/documents",i={documents:e.map((function(t){return pg(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ip(!!e.found),e.found.name,e.found.updateTime;var n=dg(t,e.found.name),r=lg(e.found.updateTime),i=new hd({mapValue:{fields:e.found.fields}});return pd.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ip(!!e.missing),Ip(!!e.readTime);var n=dg(t,e.missing),r=lg(e.readTime);return pd.newNoDocument(n,r)}(t,e):wp()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Ip(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Av(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return vt(this,void 0,void 0,(function(){var t,e=this;return gt(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Yp.fromPath(n);e.mutations.push(new Pv(r,e.precondition(r)))})),[4,function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return n=Tp(t),r=mg(n.R)+"/documents",i={writes:e.map((function(t){return wg(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw wp();e=Pp.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new dp(pp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?dv.updateTime(e):dv.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Pp.min()))throw new dp(pp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dv.updateTime(e)}return dv.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),rw=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new gb(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return vt(t,void 0,void 0,(function(){var t,e,n=this;return gt(this,(function(r){return t=new nw(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Gp(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!xv(e)}return!1},t}(),iw=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Xy.UNAUTHENTICATED,this.clientId=Sp.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return mp("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new dp(pp.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new am;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return vt(t,void 0,void 0,(function(){var t,n;return gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Qb(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ow(t,e){return vt(this,void 0,void 0,(function(){var n,r,i=this;return gt(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),mp("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return vt(i,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,ky(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function aw(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,sw(t)];case 1:return n=i.sent(),mp("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return(n=Tp(t)).asyncQueue.verifyOperationInProgress(),mp("RemoteStore","RemoteStore received new credentials"),r=Rb(n),n.Or.add(3),[4,Eb(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Tb(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function sw(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(mp("FirestoreClient","Using default OfflineComponentProvider"),[4,ow(t,new Q_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function uw(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(mp("FirestoreClient","Using default OnlineComponentProvider"),[4,aw(t,new J_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function cw(t){return sw(t).then((function(t){return t.persistence}))}function lw(t){return sw(t).then((function(t){return t.localStore}))}function hw(t){return uw(t).then((function(t){return t.remoteStore}))}function fw(t){return uw(t).then((function(t){return t.syncEngine}))}function pw(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,uw(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=m_.bind(null,e.syncEngine),n.onUnlisten=b_.bind(null,e.syncEngine),n)]}}))}))}function dw(t,e,n){var r=this;void 0===n&&(n={});var i=new am;return t.asyncQueue.enqueueAndForget((function(){return vt(r,void 0,void 0,(function(){var r;return gt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new tw({next:function(o){e.enqueueAndForget((function(){return n_(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new dp(pp.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new dp(pp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new a_(Md(n.path),o,{includeMetadataChanges:!0,so:!0});return e_(t,a)},[4,pw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function vw(t,e,n){var r=this;void 0===n&&(n={});var i=new am;return t.asyncQueue.enqueueAndForget((function(){return vt(r,void 0,void 0,(function(){var r;return gt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new tw({next:function(n){e.enqueueAndForget((function(){return n_(t,a)})),n.fromCache&&"server"===r.source?i.reject(new dp(pp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new a_(n,o,{includeMetadataChanges:!0,so:!0});return e_(t,a)},[4,pw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var gw=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},mw=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),yw=new Map,bw=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},_w=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Xy.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ww=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Iw=function(){function t(t){var e=this;this.currentUser=Xy.UNAUTHENTICATED,this.oc=new am,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){mp("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(mp("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(mp("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ip("string"==typeof n.accessToken),new bw(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return vt(n,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Ip(null===t||"string"==typeof t),new Xy(t)},t}(),Tw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Xy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Ew=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Tw(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Xy.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Sw(t,e,n){if(!n)throw new dp(pp.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Cw(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dp(pp.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function kw(t,e,n,r){if(!0===e&&!0===r)throw new dp(pp.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Nw(t){if(!Yp.isDocumentKey(t))throw new dp(pp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Aw(t){if(Yp.isDocumentKey(t))throw new dp(pp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Pw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":wp()}function Rw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new dp(pp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Pw(t);throw new dp(pp.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function xw(t,e){if(e<=0)throw new dp(pp.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new dp(pp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dp(pp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,kw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Ow=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dw({}),this._settingsFrozen=!1,t instanceof mw?(this._databaseId=t,this._credentials=new _w):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new dp(pp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mw(t.options.projectId)}(t),this._credentials=new Iw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new dp(pp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new dp(pp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new _w;switch(t.type){case"gapi":var e=t.client;return Ip(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ew(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new dp(pp.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=yw.get(this))&&(mp("ComponentProvider","Removing Datastore"),yw.delete(this),t.terminate()),Promise.resolve();var t},t}(),Lw=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Fw(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Mw=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Fw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Md(r))||this)._path=r,i.type="collection",i}return pt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Lw(this.firestore,null,new Yp(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Mw);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Uw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Te(t),Sw("collection","path",e),t instanceof Ow)return Aw(n=Lp.fromString.apply(Lp,_t([e],r))),new Fw(t,null,n);if(!(t instanceof Lw||t instanceof Fw))throw new dp(pp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Aw(n=Lp.fromString.apply(Lp,_t([t.path],r)).child(Lp.fromString(e))),new Fw(t.firestore,null,n)}function jw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Te(t),1===arguments.length&&(e=Sp.u()),Sw("doc","path",e),t instanceof Ow)return Nw(n=Lp.fromString.apply(Lp,_t([e],r))),new Lw(t,null,new Yp(n));if(!(t instanceof Lw||t instanceof Fw))throw new dp(pp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nw(n=t._path.child(Lp.fromString.apply(Lp,_t([e],r)))),new Lw(t.firestore,t instanceof Fw?t.converter:null,new Yp(n))}function qw(t,e){return t=Te(t),e=Te(e),(t instanceof Lw||t instanceof Fw)&&(e instanceof Lw||e instanceof Fw)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Vw(t,e){return t=Te(t),e=Te(e),t instanceof Mw&&e instanceof Mw&&t.firestore===e.firestore&&Hd(t._query,e._query)&&t.converter===e.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Bw=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new gb(this,"async_queue_retry"),this.Ic=function(){var e=db();e&&mp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=db();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=db();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new am;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return vt(this,void 0,void 0,(function(){var t,e=this;return gt(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!fm(t=n.sent()))throw t;return mp("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,yp("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=$b.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&wp()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Kw(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ww=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new am,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Hw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Bw,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return pt(e,t),e.prototype._terminate=function(){return this._firestoreClient||Gw(this),this._firestoreClient.terminate()},e}(Ow);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zw(t){return t._firestoreClient||Gw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Gw(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new gw(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new iw(t._credentials,t._queue,r)}function $w(t,e,n){var r=this,i=new am;return t.asyncQueue.enqueue((function(){return vt(r,void 0,void 0,(function(){var r;return gt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ow(t,n)];case 1:return o.sent(),[4,aw(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===pp.FAILED_PRECONDITION||t.code===pp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Qw(t){if(t._initialized||t._terminated)throw new dp(pp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new dp(pp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fp(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Xw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(jp.fromBase64String(e))}catch(e){throw new dp(pp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(jp.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Jw=function(t){this._methodName=t},Zw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new dp(pp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new dp(pp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Cp(this._lat,t._lat)||Cp(this._long,t._long)},t}(),tI=/^__.*__$/,eI=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Tv(t,this.data,this.fieldMask,e,this.fieldTransforms):new Iv(t,this.data,e,this.fieldTransforms)},t}(),nI=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Tv(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wp()}}var iI=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return EI(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(rI(this.Nc)&&tI.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),oI=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||vb(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new iI({Nc:t,methodName:e,qc:n,path:Fp.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function aI(t){var e=t._freezeSettings(),n=vb(t._databaseId);return new oI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sI(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);_I("Data must be an object, but it was:",a,r);var s,u,c=yI(r,a);if(o.merge)s=new Up(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=wI(e,f[h],n);if(!a.contains(p))throw new dp(pp.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");SI(l,p)||l.push(p)}s=new Up(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new eI(new hd(c),s,u)}var uI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Jw);function cI(t,e,n){return new iI({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var lI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype._toFieldTransform=function(t){return new fv(t.path,new iv)},e.prototype.isEqual=function(t){return t instanceof e},e}(Jw),hI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return pt(e,t),e.prototype._toFieldTransform=function(t){var e=cI(this,t,!0),n=this.Kc.map((function(t){return mI(t,e)})),r=new ov(n);return new fv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jw),fI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return pt(e,t),e.prototype._toFieldTransform=function(t){var e=cI(this,t,!0),n=this.Kc.map((function(t){return mI(t,e)})),r=new sv(n);return new fv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jw),pI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return pt(e,t),e.prototype._toFieldTransform=function(t){var e=new cv(t.R,Zd(t.R,this.Qc));return new fv(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Jw);function dI(t,e,n,r){var i=t.Uc(1,e,n);_I("Data must be an object, but it was:",i,r);var o=[],a=hd.empty();xp(r,(function(t,r){var s=TI(e,t,n);r=Te(r);var u=i.Oc(s);if(r instanceof uI)o.push(s);else{var c=mI(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Up(o);return new nI(a,s,i.fieldTransforms)}function vI(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[wI(e,r,n)],u=[i];if(o.length%2!=0)throw new dp(pp.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(wI(e,o[c])),u.push(o[c+1]);for(var l=[],h=hd.empty(),f=s.length-1;f>=0;--f)if(!SI(l,s[f])){var p=s[f],d=u[f];d=Te(d);var v=a.Oc(p);if(d instanceof uI)l.push(p);else{var g=mI(d,v);null!=g&&(l.push(p),h.set(p,g))}}var m=new Up(l);return new nI(h,m,a.fieldTransforms)}function gI(t,e,n,r){return void 0===r&&(r=!1),mI(n,t.Uc(r?4:3,e))}function mI(t,e){if(bI(t=Te(t)))return _I("Unsupported field value:",e,t),yI(t,e);if(t instanceof Jw)return function(t,e){if(!rI(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=mI(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Te(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zd(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ap.fromDate(t);return{timestampValue:sg(e.R,n)}}if(t instanceof Ap)return n=new Ap(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:sg(e.R,n)};if(t instanceof Zw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xw)return{bytesValue:ug(e.R,t._byteString)};if(t instanceof Lw){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:hg(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Pw(t))}(t,e)}function yI(t,e){var n={};return Dp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xp(t,(function(t,r){var i=mI(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function bI(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ap||t instanceof Zw||t instanceof Xw||t instanceof Lw||t instanceof Jw)}function _I(t,e,n){if(!bI(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Pw(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function wI(t,e,n){if((e=Te(e))instanceof Yw)return e._internalPath;if("string"==typeof e)return TI(t,e);throw EI("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var II=new RegExp("[~\\*/\\[\\]]");function TI(t,e,n){if(e.search(II)>=0)throw EI("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Yw.bind.apply(Yw,_t([void 0],e.split(".")))))._internalPath}catch(r){throw EI("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function EI(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new dp(pp.INVALID_ARGUMENT,(s+=". ")+t+u)}function SI(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var CI=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Lw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new kI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(NI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),kI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(CI);function NI(t,e){return"string"==typeof e?TI(t,e):e instanceof Yw?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var AI=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),PI=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return pt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new RI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(NI("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(CI),RI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(PI),xI=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new AI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new RI(n._firestore,n._userDataWriter,r.key,r,new AI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dp(pp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new RI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new AI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new RI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new AI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:DI(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function DI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wp()}}function OI(t,e){return t instanceof PI&&e instanceof PI?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof xI&&e instanceof xI&&t._firestore===e._firestore&&Vw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function LI(t){if(Ud(t)&&0===t.explicitOrderBy.length)throw new dp(pp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var MI=function(){};function FI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var UI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return pt(e,t),e.prototype._apply=function(t){var e=aI(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new dp(pp.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){HI(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(WI(r,t,h))}s={arrayValue:{values:u}}}else s=WI(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||HI(a,o),s=gI(n,"where",a,"in"===o||"not-in"===o);var f=bd.create(i,o,s);return function(t,e){if(e.g()){var n=qd(t);if(null!==n&&!n.isEqual(e.field))throw new dp(pp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=jd(t);null!==r&&zI(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new dp(pp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new dp(pp.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Mw(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(MI),jI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return pt(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new dp(pp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new dp(pp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Pd(e,n);return function(t,e){if(null===jd(t)){var n=qd(t);null!==n&&zI(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Mw(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Od(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(MI),qI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return pt(e,t),e.prototype._apply=function(t){return new Mw(t.firestore,t.converter,Wd(t._query,this.Hc,this.Jc))},e}(MI),VI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return pt(e,t),e.prototype._apply=function(t){var e=KI(t,this.type,this.Yc,this.Xc);return new Mw(t.firestore,t.converter,function(t,e){return new Od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(MI),BI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return pt(e,t),e.prototype._apply=function(t){var e=KI(t,this.type,this.Yc,this.Xc);return new Mw(t.firestore,t.converter,function(t,e){return new Od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(MI);function KI(t,e,n,r){if(n[0]=Te(n[0]),n[0]instanceof CI)return function(t,e,n,r,i){if(!r)throw new dp(pp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Bd(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(id(e,r.key));else{var c=r.data.field(u.field);if(Wp(c))throw new dp(pp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new dp(pp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Nd(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=aI(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new dp(pp.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new dp(pp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Vd(t)&&-1!==c.indexOf("/"))throw new dp(pp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Lp.fromString(c));if(!Yp.isDocumentKey(l))throw new dp(pp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Yp(l);s.push(id(e,h))}else{var f=gI(n,r,c);s.push(f)}}return new Nd(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function WI(t,e,n){if("string"==typeof(n=Te(n))){if(""===n)throw new dp(pp.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vd(e)&&-1!==n.indexOf("/"))throw new dp(pp.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Lp.fromString(n));if(!Yp.isDocumentKey(r))throw new dp(pp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return id(t,new Yp(r))}if(n instanceof Lw)return id(t,n._key);throw new dp(pp.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Pw(n)+".")}function HI(t,e){if(!Array.isArray(t)||0===t.length)throw new dp(pp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new dp(pp.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function zI(t,e,n){if(!n.isEqual(e))throw new dp(pp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var GI=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Xp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bp(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Kp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw wp()}},t.prototype.convertObject=function(t,e){var n=this,r={};return xp(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Zw(Bp(t.latitude),Bp(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Hp(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(zp(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Vp(t);return new Ap(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Lp.fromString(t);Ip(Mg(n));var r=new mw(n.get(1),n.get(3)),i=new Yp(n.popFirst(5));return r.isEqual(e)||yp("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $I(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var QI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pt(e,t),e.prototype.convertBytes=function(t){return new Xw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lw(this.firestore,null,e)},e}(GI),YI=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=aI(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=XI(t,this._firestore),i=$I(r.converter,e,n),o=sI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,dv.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=XI(t,this._firestore);return o="string"==typeof(e=Te(e))||e instanceof Yw?vI(this._dataReader,"WriteBatch.update",a._key,e,n,r):dI(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,dv.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=XI(t,this._firestore);return this._mutations=this._mutations.concat(new Av(e._key,dv.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new dp(pp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function XI(t,e){if((t=Te(t)).firestore!==e)throw new dp(pp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var JI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pt(e,t),e.prototype.convertBytes=function(t){return new Xw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lw(this.firestore,null,e)},e}(GI);function ZI(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Rw(t,Lw);var o=Rw(t.firestore,Hw),a=aI(o);return eT(o,[("string"==typeof(e=Te(e))||e instanceof Yw?vI(a,"updateDoc",t._key,e,n,r):dI(a,"updateDoc",t._key,e)).toMutation(t._key,dv.exists(!0))])}function tT(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Te(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Kw(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(Kw(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Lw)c=Rw(t.firestore,Hw),l=Md(t._key.path),u={next:function(e){i[s]&&i[s](nT(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=Rw(t,Mw);c=Rw(p.firestore,Hw),l=p._query;var d=new JI(c);u={next:function(t){i[s]&&i[s](new xI(c,d,p,t))},error:i[s+1],complete:i[s+2]},LI(t._query)}return function(t,e,n,r){var i=this,o=new tw(r),a=new a_(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return vt(i,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=e_,[4,pw(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return vt(i,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=n_,[4,pw(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(zw(c),l,h,u)}function eT(t,e){return function(t,e){var n=this,r=new am;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return n=__,[4,fw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(zw(t),e)}function nT(t,e,n){var r=n.docs.get(e._key),i=new JI(t);return new PI(t,i,e._key,r,new AI(n.hasPendingWrites,n.fromCache),e.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return pt(e,t),e.prototype.get=function(e){var n=this,r=XI(e,this._firestore),i=new JI(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new PI(n._firestore,i,r._key,t._document,new AI(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=aI(t)}return t.prototype.get=function(t){var e=this,n=XI(t,this._firestore),r=new QI(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return wp();var i=t[0];if(i.isFoundDocument())return new CI(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new CI(e._firestore,r,n._key,null,n.converter);throw wp()}))},t.prototype.set=function(t,e,n){var r=XI(t,this._firestore),i=$I(r.converter,e,n),o=sI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=XI(t,this._firestore);return o="string"==typeof(e=Te(e))||e instanceof Yw?vI(this._dataReader,"Transaction.update",a._key,e,n,r):dI(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=XI(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function iT(){if("undefined"==typeof Uint8Array)throw new dp(pp.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function oT(){if("undefined"==typeof atob)throw new dp(pp.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var aT=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return oT(),new t(Xw.fromBase64String(e))},t.fromUint8Array=function(e){return iT(),new t(Xw.fromUint8Array(e))},t.prototype.toBase64=function(){return oT(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return iT(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),sT=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Qw(t=Rw(t,Hw));var n=zw(t),r=t._freezeSettings(),i=new J_;return $w(n,i,new Y_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Qw(t=Rw(t,Hw));var e=zw(t),n=t._freezeSettings(),r=new J_;return $w(e,r,new X_(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new dp(pp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new am;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return vt(e,void 0,void 0,(function(){var e;return gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return cm.yt()?(e=t+"main",[4,cm.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(_y(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),uT=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof mw||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||bp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Rw(t,Ow))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&bp("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=Xy.MOCK_USER;else{a=Lt(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new dp(pp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Xy(u)}t._credentials=new ww(new bw(a,s))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return vt(e,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,cw(t)];case 1:return e=r.sent(),[4,hw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Tp(t);return e.Or.delete(0),Tb(e)}(n))]}}))}))}))}(zw(Rw(this._delegate,Hw)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return vt(e,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,cw(t)];case 1:return e=r.sent(),[4,hw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return(e=Tp(t)).Or.add(0),[4,Eb(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(zw(Rw(this._delegate,Hw)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&kw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new am;return t.asyncQueue.enqueueAndForget((function(){return vt(e,void 0,void 0,(function(){var e;return gt(this,(function(r){switch(r.label){case 0:return e=C_,[4,fw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(zw(Rw(this._delegate,Hw)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new tw(e);return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=function(t,e){Tp(t).Gr.add(e),e.next()},[4,pw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=function(t,e){Tp(t).Gr.delete(e)},[4,pw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(zw(t=Rw(t,Hw)),Kw(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new dp(pp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new IT(this,Uw(this._delegate,t))}catch(t){throw dT(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new pT(this,jw(this._delegate,t))}catch(t){throw dT(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new bT(this,function(t,e){if(t=Rw(t,Ow),Sw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dp(pp.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Mw(t,null,function(t){return new Od(Lp.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw dT(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new am;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return[4,function(t){return uw(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new rw(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(zw(t),(function(n){return e(new rT(t,n))}))}(this._delegate,(function(n){return t(new lT(e,n))}))},t.prototype.batch=function(){var t=this;return zw(this._delegate),new hT(new YI(this._delegate,(function(e){return eT(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new dp(pp.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new dp(pp.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),cT=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pt(e,t),e.prototype.convertBytes=function(t){return new aT(new Xw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return pT.eu(e,this.firestore,null)},e}(GI);var lT=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new cT(t)}return t.prototype.get=function(t){var e=this,n=TT(t);return this._delegate.get(n).then((function(t){return new mT(e._firestore,new PI(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=TT(t);return n?(Cw("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=TT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,_t([a,e,n],i)),this},t.prototype.delete=function(t){var e=TT(t);return this._delegate.delete(e),this},t}(),hT=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=TT(t);return n?(Cw("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=TT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,_t([a,e,n],i)),this},t.prototype.delete=function(t){var e=TT(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),fT=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new RI(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yT(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new cT(e),n),i.set(n,o)),o},t}();fT.su=new WeakMap;var pT=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new cT(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new dp(pp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Lw(n._delegate,r,new Yp(e)))},t.eu=function(e,n,r){return new t(n,new Lw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new IT(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new IT(this.firestore,Uw(this._delegate,t))}catch(t){throw dT(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Te(t))instanceof Lw&&qw(this._delegate,t)},t.prototype.set=function(t,e){e=Cw("DocumentReference.set",e);try{return function(t,e,n){t=Rw(t,Lw);var r=Rw(t.firestore,Hw),i=$I(t.converter,e,n);return eT(r,[sI(aI(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,dv.none())])}(this._delegate,t,e)}catch(t){throw dT(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ZI(this._delegate,t):ZI.apply(void 0,_t([this._delegate,t,e],n))}catch(t){throw dT(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return eT(Rw((t=this._delegate).firestore,Hw),[new Av(t._key,dv.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vT(e),i=gT(e,(function(e){return new mT(t.firestore,new PI(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return tT(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rw(t,Lw);var e=Rw(t.firestore,Hw),n=zw(e),r=new JI(e);return function(t,e){var n=this,r=new am;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i;return gt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Tp(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new dp(pp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Qb(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,lw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new PI(e,r,t._key,n,new AI(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Rw(t,Lw);var e=Rw(t.firestore,Hw);return dw(zw(e),t._key,{source:"server"}).then((function(n){return nT(e,t,n)}))}(this._delegate):function(t){t=Rw(t,Lw);var e=Rw(t.firestore,Hw);return dw(zw(e),t._key).then((function(n){return nT(e,t,n)}))}(this._delegate)).then((function(t){return new mT(e.firestore,new PI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(fT.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function dT(t,e,n){return t.message=t.message.replace(e,n),t}function vT(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Kw(r))return r}return{}}function gT(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Kw(t[0])?t[0]:Kw(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new pT(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return OI(this._delegate,t._delegate)},t}(),yT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(mT),bT=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new cT(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,FI(this._delegate,function(t,e,n){var r=e,i=NI("where",t);return new UI(i,r,n)}(e,n,r)))}catch(e){throw dT(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,FI(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=NI("orderBy",t);return new jI(r,n)}(e,n)))}catch(e){throw dT(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,FI(this._delegate,function(t){return xw("limit",t),new qI("limit",t,"F")}(e)))}catch(e){throw dT(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,FI(this._delegate,function(t){return xw("limitToLast",t),new qI("limitToLast",t,"L")}(e)))}catch(e){throw dT(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,FI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new VI("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw dT(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,FI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new VI("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw dT(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,FI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new BI("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw dT(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,FI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new BI("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw dT(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Vw(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rw(t,Mw);var e=Rw(t.firestore,Hw),n=zw(e),r=new JI(e);return function(t,e){var n=this,r=new am;return t.asyncQueue.enqueueAndForget((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Ly(t,e,!0)];case 1:return s=u.sent(),r=new p_(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Qb(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,lw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new xI(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Rw(t,Mw);var e=Rw(t.firestore,Hw),n=zw(e),r=new JI(e);return vw(n,t._query,{source:"server"}).then((function(n){return new xI(e,r,t,n)}))}(this._delegate):function(t){t=Rw(t,Mw);var e=Rw(t.firestore,Hw),n=zw(e),r=new JI(e);return LI(t._query),vw(n,t._query).then((function(n){return new xI(e,r,t,n)}))}(this._delegate)).then((function(t){return new wT(e.firestore,new xI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vT(e),i=gT(e,(function(e){return new wT(t.firestore,new xI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return tT(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(fT.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),_T=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new yT(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),wT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new bT(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new yT(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new _T(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new yT(n._firestore,r))}))},t.prototype.isEqual=function(t){return OI(this._delegate,t._delegate)},t}(),IT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return pt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new pT(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new pT(this.firestore,void 0===t?jw(this._delegate):jw(this._delegate,t))}catch(t){throw dT(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Rw(t.firestore,Hw),r=jw(t),i=$I(t.converter,e);return eT(n,[sI(aI(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,dv.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new pT(e.firestore,t)}))},e.prototype.isEqual=function(t){return qw(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(fT.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(bT);function TT(t){return Rw(t,Lw)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ET=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Yw.bind.apply(Yw,_t([void 0],t)))}return t.documentId=function(){return new t(Fp.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Te(t))instanceof Yw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),ST=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new lI("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new uI("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hI("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fI("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new pI("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function CT(t){return function(t,e){var n=zw(t=Rw(t,Hw)),r=new Ww;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new ew(t,e)}(function(t,e){if(t instanceof Uint8Array)return Z_(t,e);if(t instanceof ArrayBuffer)return Z_(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,vb(e));t.asyncQueue.enqueueAndForget((function(){return vt(i,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return e=$_,[4,fw(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)}function kT(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return vt(n,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=Tp(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,lw(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(zw(e=Rw(e,Hw)),n).then((function(t){return t?new Mw(e,null,t.query):null}))).then((function(t){return t?new bT(r,t):null}))}var NT,AT,PT={Firestore:uT,GeoPoint:Zw,Timestamp:Ap,Blob:aT,Transaction:lT,WriteBatch:hT,DocumentReference:pT,DocumentSnapshot:mT,Query:bT,QueryDocumentSnapshot:yT,QuerySnapshot:wT,CollectionReference:IT,FieldPath:ET,FieldValue:ST,setLogLevel:function(t){var e;e=t,vp.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(function(t,e){t.INTERNAL.registerComponent(new Se("firestore",(function(t){return function(t,e){return new uT(t,new Hw(t,e),new sT)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},PT)))})(NT=en),NT.registerVersion("@firebase/firestore","2.4.0"),(AT=uT).prototype.loadBundle=CT,AT.prototype.namedQuery=kT;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var RT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xT=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return pt(e,t),e}(Error);var DT=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function OT(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var LT=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return OT(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?OT(t,(function(t){return e.decode(t)})):t},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var MT=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new LT,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new DT(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,p;return gt(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new xT("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(s),c=u.timer,l=u.promise,[4,Promise.race([FT(c,this.postJSON(r,i,o)),l,FT(c,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new xT("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!RT[s])return new xT("internal","internal");r=RT[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new xT(r,i,o)}(h.status,h.json,this.serializer),f)throw f;if(!h.json)throw new xT("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new xT("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function FT(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
!function(t,e){var n={Functions:MT};t.INTERNAL.registerComponent(new Se("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new MT(i,o,s,a,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(en,fetch.bind(self)),en.registerVersion("@firebase/functions","0.6.15");"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function UT(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var jT,qT=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),VT="0.4.32",BT=1e4,KT="w:0.4.32",WT="FIS_v2",HT=36e5,zT=((jT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',jT["not-registered"]="Firebase Installation is not registered.",jT["installation-not-found"]="Firebase Installation not found.",jT["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',jT["app-offline"]="Could not process request. Application offline.",jT["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",jT),GT=new Xt("installations","Installations",zT);function $T(t){return t instanceof Yt&&t.code.includes("request-failed")}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function QT(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function YT(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function XT(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,GT.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function JT(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ZT(t,e){var n=e.refreshToken,r=JT(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n)),r}function tE(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function eE(t,e){var n=e.fid;return vt(this,void 0,void 0,(function(){var e,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return e=QT(t),r=JT(t),i={fid:n,authVersion:WT,appId:t.appId,sdkVersion:KT},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,tE((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:YT(s.authToken)}];case 3:return[4,XT("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nE(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var rE=/^[cdef][\w-]{21}$/;function iE(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,_t([],bt(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t);return rE.test(e)?e:""}catch(t){return""}}function oE(t){return t.appName+"!"+t.appId}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var aE=new Map;function sE(t,e){var n=oE(t);uE(n,e),function(t,e){var n=lE();n&&n.postMessage({key:t,fid:e});hE()}(n,e)}function uE(t,e){var n,r,i=aE.get(t);if(i)try{for(var o=yt(i),a=o.next();!a.done;a=o.next()){(0,a.value)(e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var cE=null;function lE(){return!cE&&"BroadcastChannel"in self&&((cE=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){uE(t.data.key,t.data.fid)}),cE}function hE(){0===aE.size&&cE&&(cE.close(),cE=null)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fE,pE="firebase-installations-store",dE=null;function vE(){return dE||(dE=qT.openDb("firebase-installations-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(pE)}))),dE}function gE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return n=oE(t),[4,vE()];case 1:return r=s.sent(),i=r.transaction(pE,"readwrite"),[4,(o=i.objectStore(pE)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||sE(t,e.fid),[2,e]}}))}))}function mE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return e=oE(t),[4,vE()];case 1:return n=i.sent(),[4,(r=n.transaction(pE,"readwrite")).objectStore(pE).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function yE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return n=oE(t),[4,vE()];case 1:return r=u.sent(),i=r.transaction(pE,"readwrite"),[4,(o=i.objectStore(pE)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||sE(t,s.fid),[2,s]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,yE(t,(function(n){var r=function(t){return IE(t||{fid:iE(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(GT.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,eE(t,e)];case 1:return n=i.sent(),[2,gE(t,n)];case 2:return $T(r=i.sent())&&409===r.customData.serverCode?[4,mE(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,gE(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:_E(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function _E(t){return vt(this,void 0,void 0,(function(){var e,n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,wE(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,nE(100)];case 3:return o.sent(),[4,wE(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,bE(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function wE(t){return yE(t,(function(t){if(!t)throw GT.create("installation-not-found");return IE(t)}))}function IE(t){return 1===(e=t).registrationStatus&&e.registrationTime+BT<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}function TE(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return vt(this,void 0,void 0,(function(){var t,i,o,a,s,u,c;return gt(this,(function(l){switch(l.label){case 0:return t=function(t,e){var n=e.fid;return QT(t)+"/"+n+"/authTokens:generate"}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n,e),i=ZT(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:KT}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,tE((function(){return fetch(t,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,YT(c)];case 3:return[4,XT("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function EE(t,e){return void 0===e&&(e=!1),vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return[4,yE(t.appConfig,(function(r){if(!CE(r))throw GT.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+HT}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,SE(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,nE(100)];case 3:return i.sent(),[4,SE(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,EE(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw GT.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return dt(dt({},t),{authToken:e})}(r);return n=function(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,TE(t,e)];case 1:return n=o.sent(),i=dt(dt({},e),{authToken:n}),[4,gE(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!$T(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,mE(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=dt(dt({},e),{authToken:{requestStatus:0}}),[4,gE(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function SE(t){return yE(t,(function(t){if(!CE(t))throw GT.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+BT<Date.now()?dt(dt({},t),{authToken:{requestStatus:0}}):t}))}function CE(t){return void 0!==t&&2===t.registrationStatus}function kE(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return[4,bE(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function NE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return QT(t)+"/"+n}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e),r=ZT(t,e),i={method:"DELETE",headers:r},[4,tE((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,XT("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function AE(t,e){var n=t.appConfig;return function(t,e){lE();var n=oE(t),r=aE.get(n);r||(r=new Set,aE.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=oE(t),r=aE.get(n);r&&(r.delete(e),0===r.size&&aE.delete(n),hE())}(n,e)}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function PE(t){return GT.create("missing-app-config-values",{valueName:t})}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t.INTERNAL.registerComponent(new Se("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw PE("App Configuration");if(!t.name)throw PE("App Name");try{for(var r=yt(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw PE(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},i={app:e,getId:function(){
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */return function(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,bE(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):EE(t).catch(console.error),[2,n.fid]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),vt(this,void 0,void 0,(function(){return gt(this,(function(n){switch(n.label){case 0:return[4,kE(t.appConfig)];case 1:return n.sent(),[4,EE(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,yE(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw GT.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw GT.create("app-offline");case 3:return[4,NE(e,n)];case 4:return r.sent(),[4,mE(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return AE(r,t)}};return i}),"PUBLIC")),t.registerVersion("@firebase/installations",VT)}(en);var RE,xE=((fE={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',fE["only-available-in-window"]="This method is available in a Window context.",fE["only-available-in-sw"]="This method is available in a service worker context.",fE["permission-default"]="The notification permission was not granted and dismissed instead.",fE["permission-blocked"]="The notification permission was not granted and blocked instead.",fE["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",fE["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",fE["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",fE["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",fE["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",fE["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",fE["token-update-no-token"]="FCM returned no token when updating the user to push.",fE["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",fE["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",fE["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",fE["invalid-vapid-key"]="The public VAPID key must be a string.",fE["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",fE),DE=new Xt("messaging","Messaging",xE),OE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",LE="google.c.a.c_id";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ME(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,_t([],bt(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function FE(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(RE||(RE={}));var UE="fcm_token_details_db",jE="fcm_token_object_Store";function qE(t){return vt(this,void 0,void 0,(function(){var e,n,r,i=this;return gt(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=o.sent(),n=e.map((function(t){return t.name})),!n.includes(UE))return[2,null];o.label=2;case 2:return r=null,[4,qT.openDb(UE,5,(function(e){return vt(i,void 0,void 0,(function(){var n,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(jE)?[4,(n=e.transaction.objectStore(jE)).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:ME(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(r={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:ME(o.auth),p256dh:ME(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:ME(o.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,qT.deleteDb(UE)];case 4:return o.sent(),[4,qT.deleteDb("fcm_vapid_details_db")];case 5:return o.sent(),[4,qT.deleteDb("undefined")];case 6:return o.sent(),[2,VE(r)?r:null]}}))}))}function VE(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var BE="firebase-messaging-store",KE=null;function WE(){return KE||(KE=qT.openDb("firebase-messaging-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(BE)}))),KE}function HE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return e=$E(t),[4,WE()];case 1:return[4,i.sent().transaction(BE).objectStore(BE).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,qE(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,zE(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function zE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i;return gt(this,(function(o){switch(o.label){case 0:return n=$E(t),[4,WE()];case 1:return r=o.sent(),[4,(i=r.transaction(BE,"readwrite")).objectStore(BE).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function GE(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return e=$E(t),[4,WE()];case 1:return n=i.sent(),[4,(r=n.transaction(BE,"readwrite")).objectStore(BE).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function $E(t){return t.appConfig.appId}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function QE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return[4,ZE(t)];case 1:n=u.sent(),r=tS(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(JE(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),DE.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,DE.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw DE.create("token-subscribe-no-token");return[2,o.token]}}))}))}function YE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return[4,ZE(t)];case 1:n=u.sent(),r=tS(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(JE(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),DE.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,DE.create("token-update-failed",{errorInfo:s});if(!o.token)throw DE.create("token-update-no-token");return[2,o.token]}}))}))}function XE(t,e){return vt(this,void 0,void 0,(function(){var n,r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:return[4,ZE(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(JE(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,DE.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),DE.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function JE(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function ZE(t){var e=t.appConfig,n=t.installations;return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function tS(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==OE&&(o.web.applicationPubKey=i),o}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function eS(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o,a;return gt(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw DE.create("permission-blocked");return[4,oS(e,n)];case 1:return r=s.sent(),[4,HE(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:ME(r.getKey("auth")),p256dh:ME(r.getKey("p256dh"))},i?[3,3]:[2,iS(t,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,XE(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,iS(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,rS({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,p;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}))}))}function nS(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,HE(t)];case 1:return(n=i.sent())?[4,XE(t,n.token)]:[3,4];case 2:return i.sent(),[4,GE(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function rS(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,YE(e,t)];case 1:return r=a.sent(),i=dt(dt({},t),{token:r,createTime:Date.now()}),[4,zE(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,nS(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function iS(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,QE(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,zE(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function oS(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:FE(e)})]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function aS(t){return"object"==typeof t&&!!t&&LE in t}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function sS(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uS=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw DE.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,HE(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:OE,r.label=2;case 2:return[2,eS(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return nS(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw DE.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw DE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw DE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw DE.create("only-available-in-window")},t.prototype.onMessage=function(){throw DE.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw DE.create("only-available-in-window")},t.prototype.onPush=function(t){return vt(this,void 0,void 0,(function(){var e,n,r,i;return gt(this,(function(o){switch(o.label){case 0:return e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t),e?[4,fS()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,hS(n,e)]:(r=!1,e.notification?[4,pS(cS(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,sS(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return vt(this,void 0,void 0,(function(){var r;return gt(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,nS(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,HE(this.firebaseDependencies)];case 3:return r=i.sent(),[4,nS(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,eS(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:OE)]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return vt(this,void 0,void 0,(function(){var r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return aS(t.data)?self.location.origin:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,lS(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,sS(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=RE.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function cS(t){var e,n=dt({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function lS(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return gt(this,(function(u){switch(u.label){case 0:return[4,fS()];case 1:e=u.sent();try{for(n=yt(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function hS(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=RE.PUSH_RECEIVED;try{for(var i=yt(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function fS(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function pS(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var dS=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return vt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===RE.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),aS(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw DE.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,eS(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=OE),[2]}))}))},t.prototype.updateSwReg=function(t){return vt(this,void 0,void 0,(function(){return gt(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw DE.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),DE.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,nS(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?DE.create("permission-blocked"):DE.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw DE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw DE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw DE.create("invalid-sw-registration");if(this.swRegistration)throw DE.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw DE.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw DE.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case RE.NOTIFICATION_CLICKED:return"notification_open";case RE.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function vS(t){return DE.create("missing-app-config-values",{valueName:t})}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gS={isSupported:mS};function mS(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}en.INTERNAL.registerComponent(new Se("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw vS("App Configuration Object");if(!t.name)throw vS("App Name");var r=t.options;try{for(var i=yt(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw vS(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),r={app:e,appConfig:n,installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!mS())throw DE.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new uS(r):new dS(r)}),"PUBLIC").setServiceProps(gS));
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var yS="firebasestorage.googleapis.com",bS=function(t){function e(n,r){var i=t.call(this,_S(n),"Firebase Storage: "+r+" ("+_S(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return pt(e,t),e.prototype._codeEquals=function(t){return _S(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(Yt);function _S(t){return"storage/"+t}function wS(){return new bS("unknown","An unknown error occurred, please check the error payload for server response.")}function IS(){return new bS("canceled","User canceled the upload/download.")}function TS(){return new bS("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ES(t){return new bS("invalid-argument",t)}function SS(){return new bS("app-deleted","The Firebase app was deleted.")}function CS(t){return new bS("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kS(t,e){return new bS("invalid-format","String does not match format '"+t+"': "+e)}function NS(t){throw new bS("internal-error","Internal error: "+t)}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var AS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},PS=function(t,e){this.data=t,this.contentType=e||null};function RS(t,e){switch(t){case AS.RAW:return new PS(xS(e));case AS.BASE64:case AS.BASE64URL:return new PS(DS(t,e));case AS.DATA_URL:return new PS((n=new OS(e)).base64?DS(AS.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw kS(AS.DATA_URL,"Malformed data URL.")}return xS(e)}(n.rest),function(t){return new OS(t).contentType}(e))}var n;throw wS()}function xS(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function DS(t,e){switch(t){case AS.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw kS(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case AS.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw kS(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw kS(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var OS=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw kS(AS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */};var LS,MS={STATE_CHANGED:"state_changed"},FS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function US(t){switch(t){case"running":case"pausing":case"canceling":return FS.RUNNING;case"paused":return FS.PAUSED;case"success":return FS.SUCCESS;case"canceled":return FS.CANCELED;default:return FS.ERROR}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(LS||(LS={}));
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var jS=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=LS.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=LS.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=LS.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw NS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw NS("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw NS("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw NS("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var qS=function(){function t(){}return t.prototype.createConnection=function(){return new jS},t}(),VS=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new bS("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===yS?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];p||(p=""),r=new t(f,p),l.postModify(r);break}}if(null==r)throw function(t){return new bS("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),BS=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function KS(t){return"string"==typeof t||t instanceof String}function WS(t){return HS()&&t instanceof Blob}function HS(){return"undefined"!=typeof Blob}function zS(t,e,n,r){if(r<e)throw ES("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw ES("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function GS(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function $S(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var QS=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=wS()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?SS():IS()):o(r=new bS("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new YS(!1,null,!0)):this.backoffId_=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,s())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,_t([null,t],e));else{var i;s()||o?c.call.apply(c,_t([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new YS(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===LS.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new YS(a,r))}else{var s=r.getErrorCode()===LS.ABORT;e(!1,new YS(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),YS=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function XS(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function JS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=XS();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(HS())return new Blob(t);throw new bS("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ZS=function(){function t(t,e){var n=0,r="";WS(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(WS(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(HS()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(JS.apply(null,r))}var i=e.map((function(t){return KS(t)?RS(AS.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tC(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function eC(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nC(t,e){return e}var rC=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||nC},iC=null;function oC(){if(iC)return iC;var t=[];t.push(new rC("bucket")),t.push(new rC("generation")),t.push(new rC("metageneration")),t.push(new rC("name","fullPath",!0));var e=new rC("name");e.xform=function(t,e){return function(t){return!KS(t)||t.length<2?t:eC(t)}(e)},t.push(e);var n=new rC("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new rC("timeCreated")),t.push(new rC("updated")),t.push(new rC("md5Hash",null,!0)),t.push(new rC("cacheControl",null,!0)),t.push(new rC("contentDisposition",null,!0)),t.push(new rC("contentEncoding",null,!0)),t.push(new rC("contentLanguage",null,!0)),t.push(new rC("contentType",null,!0)),t.push(new rC("metadata","customMetadata",!0)),iC=t}function aC(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new VS(n,r);return e._makeStorageReference(i)}})}(r,t),r}function sC(t,e,n){var r=tC(e);return null===r?null:aC(t,r,n)}function uC(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cC(t,e,n){var r=tC(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new VS(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t._makeStorageReference(new VS(e,l.name)),r.items.push(s)}return r}(t,e,r)}var lC=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hC(t){if(!t)throw wS()}function fC(t,e){return function(n,r){var i=sC(t,r,e);return hC(null!==i),i}}function pC(t,e){return function(n,r){var i=sC(t,r,e);return hC(null!==i),function(t,e,n){var r=tC(e);if(null===r)return null;if(!KS(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return GS("/b/"+o(r)+"/o/"+o(i),n)+$S({alt:"media",token:e})}))[0]}(i,r,t.host)}}function dC(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new bS("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new bS("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new bS("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new bS("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function vC(t){var e=dC(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new bS("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function gC(t,e,n){var r=GS(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new lC(r,"GET",fC(t,n),i);return o.errorHandler=vC(e),o}function mC(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=GS(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new lC(a,"GET",function(t,e){return function(n,r){var i=cC(t,e,r);return hC(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=dC(e),u}function yC(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var bC=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function _C(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){hC(!1)}return hC(!!n&&-1!==(e||["active"]).indexOf(n)),n}var wC=262144;function IC(t,e,n,r,i,o,a,s){var u=new bC(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new bS("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,f);if(null===d)throw TS();var v=e.maxUploadRetryTime,g=new lC(n,"POST",(function(t,n){var i,a=_C(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?fC(e,o)(t,n):null,new bC(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=dC(t),g}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var TC=function(t,e,n){var r=function(t){return"function"==typeof t}(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function EC(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var SC=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=oC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=yC(e,r,i),s={name:a.fullPath},u=GS(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=uC(a,n),h=t.maxUploadRetryTime,f=new lC(u,"POST",(function(t){var e;_C(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){hC(!1)}return hC(KS(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=dC(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new lC(n,"POST",(function(t){var e=_C(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){hC(!1)}n||hC(!1);var i=Number(n);return hC(!isNaN(i)),new bC(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=dC(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=wC*this._chunkMultiplier,n=new bC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=IC(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){wC*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=gC(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=yC(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+uC(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=ZS.getBlob(c,r,l);if(null===h)throw TS();var f={name:u.fullPath},p=GS(o,t.host),d=t.maxUploadRetryTime,v=new lC(p,"POST",fC(t,n),d);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=dC(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=IS(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=US(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new TC(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(US(this._state)){case FS.SUCCESS:EC(this._resolve.bind(null,this.snapshot))();break;case FS.CANCELED:case FS.ERROR:EC(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(US(this._state)){case FS.RUNNING:case FS.PAUSED:t.next&&EC(t.next.bind(t,this.snapshot))();break;case FS.SUCCESS:t.complete&&EC(t.complete.bind(t))();break;default:t.error&&EC(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),CC=function(){function t(t,e){this._service=t,this._location=e instanceof VS?e:VS.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new VS(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return eC(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new VS(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw CS(t)},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kC(t){var e={prefixes:[],items:[]};return NC(t,e).then((function(){return e}))}function NC(t,e,n){return vt(this,void 0,void 0,(function(){var r,i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,AC(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,NC(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function AC(t,e){return vt(this,void 0,void 0,(function(){var n,r;return gt(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&zS("options.maxResults",1,1e3,e.maxResults),n=e||{},r=mC(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function PC(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=GS(e.fullServerUrl(),t.host),o=uC(n,r),a=t.maxOperationRetryTime,s=new lC(i,"PATCH",fC(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=vC(e),s}(t.storage,t._location,e,oC()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function RC(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=GS(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new lC(r,"GET",pC(t,n),i);return o.errorHandler=vC(e),o}(t.storage,t._location,oC()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new bS("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function xC(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=GS(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new lC(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=vC(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function DC(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new VS(t._location.bucket,n);return new CC(t.storage,r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function OC(t){return/^[A-Za-z]+:\/\//.test(t)}function LC(t,e){if(t instanceof UC){var n=t;if(null==n._bucket)throw new bS("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new CC(n,n._bucket);return null!=e?LC(r,e):r}return void 0!==e?DC(t,e):t}function MC(t,e){if(e&&OC(e)){if(t instanceof UC)return new CC(t,e);throw ES("To use ref(service, url), the first argument must be a Storage instance.")}return LC(t,e)}function FC(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:VS.makeFromBucketSpec(n,t)}var UC=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=yS,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?VS.makeFromBucketSpec(i,this._host):FC(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=VS.makeFromBucketSpec(this._url,t):this._bucket=FC(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){zS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){zS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return vt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new CC(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new BS(SS());var i=function(t,e,n,r,i,o){var a=$S(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new QS(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return vt(this,void 0,void 0,(function(){var e,n,r;return gt(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jC(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new SC(t,new ZS(e),n)}(t=Te(t),e,n)}function qC(t){return function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=gC(t.storage,t._location,oC()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Te(t))}function VC(t,e){return MC(t=Te(t),e)}function BC(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"==typeof i?i:Lt(i,t.app.options.projectId))}(t,e,n,r)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var KC=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),WC=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new KC(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new KC(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new KC(t,i,i._ref))}:{next:e.next?function(t){return e.next(new KC(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),HC=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new zC(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new zC(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),zC=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return DC(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new WC(jC(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=AS.RAW),this._throwIfRoot("putString");var r=RS(e,t),i=dt({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new WC(new SC(this._delegate,new ZS(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return kC(t=Te(t))}(this._delegate).then((function(e){return new HC(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return AC(t=Te(t),e)}(this._delegate,t||void 0).then((function(t){return new HC(t,e.storage)}))},t.prototype.getMetadata=function(){return qC(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return PC(t=Te(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return RC(t=Te(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return xC(t=Te(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw CS(t)},t}(),GC=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(OC(t))throw ES("ref() expected a child path but got a URL, use refFromURL instead.");return new zC(VC(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!OC(t))throw ES("refFromURL() expected a full URL but got a child path, use ref() instead.");try{VS.makeFromUrl(t,this._delegate.host)}catch(t){throw ES("refFromUrl() expected a valid full URL but got an invalid one.")}return new zC(VC(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),BC(this._delegate,t,e,n)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $C(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new GC(r,new UC(r,i,o,new qS,n,en.SDK_VERSION))}!function(t){var e={TaskState:FS,TaskEvent:MS,StringFormat:AS,Storage:UC,Reference:zC};t.INTERNAL.registerComponent(new Se("storage",$C,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.0")}(en);var QC,YC,XC,JC="0.4.18",ZC=JC,tk="FB-PERF-TRACE-MEASURE",ek="_wt_",nk="_fcp",rk="_fid",ik="@firebase/performance/config",ok="@firebase/performance/configexpire",ak="Performance",sk=((QC={})["trace started"]="Trace {$traceName} was started before.",QC["trace stopped"]="Trace {$traceName} is not running.",QC["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",QC["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",QC["no window"]="Window is not available.",QC["no app id"]="App id is not available.",QC["no project id"]="Project id is not available.",QC["no api key"]="Api key is not available.",QC["invalid cc log"]="Attempted to queue invalid cc event",QC["FB not default"]="Performance can only start when Firebase app instance is the default one.",QC["RC response not ok"]="RC response is not ok",QC["invalid attribute name"]="Attribute name {$attributeName} is invalid.",QC["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",QC["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",QC["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",QC),uk=new Xt("performance",ak,sk),ck=new Ue(ak);ck.logLevel=xe.INFO;var lk,hk=function(){function t(t){if(this.window=t,!t)throw uk.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Gt()||(ck.info("IndexedDB is not supported by current browswer"),!1):(ck.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===YC&&(YC=new t(XC)),YC},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function fk(t,e){var n=t.length-e.length;if(n<0||n>1)throw uk.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pk,dk,vk=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=fk("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=fk("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw uk.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw uk.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw uk.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===lk&&(lk=new t),lk},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gk(){return pk}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(dk||(dk={}));var mk=["firebase_","google_","ga_"],yk=new RegExp("^[a-zA-Z]\\w*$");function bk(){var t=hk.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function _k(){switch(hk.getInstance().document.visibilityState){case"visible":return dk.VISIBLE;case"hidden":return dk.HIDDEN;default:return dk.UNKNOWN}}function wk(){var t=hk.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ik="0.0.1",Tk=!0,Ek="FIREBASE_INSTALLATIONS_AUTH";function Sk(t){var e=function(){var t=hk.getInstance().localStorage;if(!t)return;var e=t.getItem(ok);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem(ik);if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(kk(e),Promise.resolve()):function(t){return(e=vk.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+vk.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+vk.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:Ek+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:vk.getInstance().getAppId(),app_version:ZC,sdk_version:Ik})});return fetch(r).then((function(t){if(t.ok)return t.json();throw uk.create("RC response not ok")}))})).catch((function(){ck.info(Ck)}));var e;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}(t).then(kk).then((function(t){return function(t){var e=hk.getInstance().localStorage;if(!t||!e)return;e.setItem(ik,JSON.stringify(t)),e.setItem(ok,String(Date.now()+60*vk.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}var Ck="Could not fetch config, will use default configs";function kk(t){if(!t)return t;var e=vk.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=Tk,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Nk(e.tracesSamplingRate),e.logNetworkAfterSampling=Nk(e.networkRequestsSamplingRate),t}function Nk(t){return Math.random()<=t}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ak,Pk=1;function Rk(){return Pk=2,Ak=Ak||function(){var t=hk.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=vk.getInstance().installationsService.getId()).then((function(t){pk=t})),t;var t})).then((function(t){return Sk(t)})).then((function(){return xk()}),(function(){return xk()}))}function xk(){Pk=3}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dk,Ok=1e4,Lk=3,Mk=[],Fk=!1;function Uk(t){setTimeout((function(){var t,e;if(0!==Lk)return Mk.length?(t=Mk.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=vk.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||ck.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=Ok;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Mk=_t(_t([],e),Mk),ck.info("Retry transport request later.")),Lk=3,Uk(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:vk.getInstance().logSource,log_event:e},t).catch((function(){Mk=_t(_t([],t),Mk),Lk--,ck.info("Tries left: "+Lk+"."),Uk(Ok)}))):Uk(Ok)}),t)}function jk(t){if(!t.eventTime||!t.message)throw uk.create("invalid cc log");Mk=_t(_t([],Mk),[t])}function qk(t,e){Dk||(Dk=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];jk({message:t.apply(void 0,e),eventTime:Date.now()})}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(Kk)),Dk(t,e)}function Vk(t){var e=vk.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&hk.getInstance().requiredApisAvailable()&&(t.isAuto&&_k()!==dk.VISIBLE||(3===Pk?Bk(t):Rk().then((function(){return Bk(t)}),(function(){return Bk(t)}))))}function Bk(t){if(gk()){var e=vk.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return qk(t,1)}),0)}}function Kk(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Wk(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Wk(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function Wk(){return{google_app_id:vk.getInstance().getAppId(),app_instance_id:gk(),web_app_info:{sdk_version:ZC,page_url:hk.getInstance().getUrl(),service_worker_status:bk(),visibility_state:_k(),effective_connection_type:wk()},application_process_state:0}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hk=["_fp",nk,rk];
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var zk=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=hk.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw uk.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw uk.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Vk(this)},t.prototype.record=function(t,e,n){if(t<=0)throw uk.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw uk.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=dt({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Vk(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(ek)&&Hk.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw uk.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&ck.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||mk.some((function(e){return t.startsWith(e)}))||!t.match(yk))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw uk.create("invalid attribute name",{attributeName:t});if(!r)throw uk.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return dt({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=hk.getInstance().getUrl();if(i){var o=new t(ek+i,!0),a=Math.floor(1e3*hk.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(nk,Math.floor(1e3*u.startTime)),r&&o.putMetric(rk,Math.floor(1e3*r))}Vk(o)}},t.createUserTimingTrace=function(e){Vk(new t(e,!1,e))},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gk(t){var e=t;if(e&&void 0!==e.responseStart){var n=hk.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=vk.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return qk(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $k(){gk()&&(setTimeout((function(){return function(){var t=hk.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){zk.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),zk.createOobTrace(e,n,t))}))}else zk.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=hk.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Gk(r[n])}t.setupObserver("resource",Gk)}()}),0),setTimeout((function(){return function(){for(var t=hk.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){Qk(r[n])}t.setupObserver("measure",Qk)}()}),0))}function Qk(t){var e=t.name;e.substring(0,tk.length)!==tk&&zk.createUserTimingTrace(e)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yk=function(){function t(t){this.app=t,hk.getInstance().requiredApisAvailable()&&$t().then((function(t){t&&(Fk||(Uk(5500),Fk=!0),Rk().then($k,$k))})).catch((function(t){ck.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new zk(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return vk.getInstance().instrumentationEnabled},set:function(t){vk.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return vk.getInstance().dataCollectionEnabled},set:function(t){vk.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw uk.create("FB not default");if("undefined"==typeof window)throw uk.create("no window");return function(t){XC=t}(window),vk.getInstance().firebaseAppInstance=t,vk.getInstance().installationsService=e,new Yk(t)};t.INTERNAL.registerComponent(new Se("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance",JC)}(en);
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Xk,Jk,Zk="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Xk||(Xk={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(Jk||(Jk={}));
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var tN,eN=new Ue("@firebase/analytics");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nN(t,e,n,r,i,o){return vt(this,void 0,void 0,(function(){var a,s,u,c;return gt(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),eN.error(c),[3,8];case 8:return t(Xk.CONFIG,i,o),[2]}}))}))}function rN(t,e,n,r,i){return vt(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f;return gt(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(h=l[c],"break"!==u(h));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(Xk.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),eN.error(f),[3,5];case 5:return[2]}}))}))}function iN(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return vt(this,void 0,void 0,(function(){var s;return gt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Xk.EVENT?[3,2]:[4,rN(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==Xk.CONFIG?[3,4]:[4,nN(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(Xk.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),eN.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var oN=((tN={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",tN["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",tN["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",tN["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",tN["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",tN["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",tN["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",tN["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',tN["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',tN),aN=new Xt("analytics","Analytics",oN),sN=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function uN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function cN(t){var e;return vt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:uN(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw aN.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function lN(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=sN),vt(this,void 0,void 0,(function(){var e,a,s,u,c,l,h;return gt(this,(function(f){switch(f.label){case 0:e=t.appId,a=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,hN(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return eN.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,cN(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Yt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),a)return eN.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?Ie(o,r.intervalMillis,30):Ie(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),eN.debug("Calling attemptFetch again in "+l+" millis"),[2,lN(t,h,n,r)];case 7:return[2]}}))}))}function hN(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(aN.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var fN=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pN(t,e,n,r,i,o){return vt(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return gt(this,(function(p){switch(p.label){case 0:return a=function(t,e,n){return void 0===e&&(e=sN),vt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return gt(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw aN.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw aN.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new fN,setTimeout((function(){return vt(c,void 0,void 0,(function(){return gt(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,lN({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}(t),a.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&eN.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return eN.error(t)})),e.push(a),s=function(){return vt(this,void 0,void 0,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return Gt()?[3,1]:(eN.warn(aN.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,$t()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),eN.warn(aN.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=p.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Zk))return r}return null}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */()||function(t,e){var n=document.createElement("script");n.src=Zk+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(Xk.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dN,vN,gN={},mN=[],yN={},bN="dataLayer",_N="gtag",wN=!1;function IN(t){if(wN)throw aN.create("already-initialized");t.dataLayerName&&(bN=t.dataLayerName),t.gtagName&&(_N=t.gtagName)}function TN(t,e){!function(){var t=[];if(qt()&&t.push("This is a browser extension environment."),Qt()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=aN.create("invalid-analytics-context",{errorInfo:e});eN.warn(n.message)}}();var n=t.options.appId;if(!n)throw aN.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw aN.create("no-api-key");eN.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=gN[n])throw aN.create("already-exists",{id:n});if(!wN){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(bN);var r=iN(gN,mN,yN,bN,_N),i=r.wrappedGtag,o=r.gtagCore;vN=i,dN=o,wN=!0}gN[n]=pN(t,mN,yN,e,dN,bN);var a={app:t,logEvent:function(t,e,r){(
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n,r,i){return vt(this,void 0,void 0,(function(){var o,a;return gt(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(Xk.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=dt(dt({},r),{send_to:o}),t(Xk.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(vN,gN[n],t,e,r).catch((function(t){return eN.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i;return gt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Xk.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Xk.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(vN,gN[n],t,e).catch((function(t){return eN.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i;return gt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Xk.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Xk.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(vN,gN[n],t,e).catch((function(t){return eN.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return vt(this,void 0,void 0,(function(){var i,o,a,s,u;return gt(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(Xk.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(Xk.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(vN,gN[n],t,e).catch((function(t){return eN.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return vt(this,void 0,void 0,(function(){var n;return gt(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(gN[n],t).catch((function(t){return eN.error(t)}))},INTERNAL:{delete:function(){return delete gN[n],Promise.resolve()}}};return a}var EN="analytics";function SN(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:if(qt())return[2,!1];if(!Qt())return[2,!1];if(!Gt())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,$t()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t.INTERNAL.registerComponent(new Se(EN,(function(t){return TN(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:IN,EventName:Jk,isSupported:SN})),t.INTERNAL.registerComponent(new Se("analytics-internal",(function(t){try{return{logEvent:t.getProvider(EN).getImmediate().logEvent}}catch(t){throw aN.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.18")}(en);var CN,kN=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),NN=((CN={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",CN["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",CN["registration-api-key"]="Undefined API key. Check Firebase app initialization.",CN["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",CN["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",CN["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",CN["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",CN["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",CN["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",CN["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',CN["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',CN["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",CN["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",CN),AN=new Xt("remoteconfig","Remote Config",NN);
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var PN=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return vt(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,p,d,v,g,m,y,b;return gt(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),AN.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),AN.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=y.entries,m=y.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?d=500:"NO_CHANGE"===m?d=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==d&&200!==d)throw AN.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var w}))}))},t}(),RN=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),xN=["1","true","t","yes","y","on"],DN=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&xN.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),ON=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=xe.DEBUG;break;case"silent":this._logger.logLevel=xe.SILENT;break;default:this._logger.logLevel=xe.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return vt(this,void 0,void 0,(function(){var t,e,n;return gt(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r=this;return gt(this,(function(i){switch(i.label){case 0:t=new RN,setTimeout((function(){return vt(r,void 0,void 0,(function(){return gt(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Yt&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return vt(this,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(dt(dt({},t),e))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new DN("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new DN("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new DN("static"))},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function LN(t,e){var n=t.target.error||void 0;return AN.create(e,{originalErrorMessage:n&&n.message})}var MN="app_namespace_store";var FN=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(LN(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(MN,{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([MN],"readonly").objectStore(MN),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(LN(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(AN.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return vt(this,void 0,void 0,(function(){var n,r=this;return gt(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([MN],"readwrite").objectStore(MN),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(LN(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(AN.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return vt(this,void 0,void 0,(function(){var e,n=this;return gt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([MN],"readwrite").objectStore(MN),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(LN(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i(AN.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),UN=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return vt(this,void 0,void 0,(function(){var t,e,n,r,i,o;return gt(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function jN(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(AN.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var qN,VN=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return vt(this,void 0,void 0,(function(){var e;return gt(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return vt(this,void 0,void 0,(function(){var e,i,o;return gt(this,(function(a){switch(a.label){case 0:return[4,jN(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Yt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Ie(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),BN="@firebase/remote-config";(qN=en).INTERNAL.registerComponent(new Se("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw AN.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw AN.create("registration-project-id");if(!s)throw AN.create("registration-api-key");if(!u)throw AN.create("registration-app-id");n=n||"firebase";var c=new FN(u,r.name,n),l=new UN(c),h=new Ue(BN);h.logLevel=xe.ERROR;var f=new PN(i,qN.SDK_VERSION,n,a,s,u),p=new VN(f,c),d=new kN(p,c,l,h),v=new ON(r,d,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),qN.registerVersion(BN,"0.1.43");var KN=UT(nn),WN=UT(Pe),HN=UT(Tt),zN=UT(Ee),GN=UT(Ke);function $N(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var QN,YN=$N(KN),XN=((QN={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",QN["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",QN["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",QN["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",QN["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",QN["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",QN["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",QN["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",QN["recaptcha-error"]="ReCAPTCHA error.",QN),JN=new zN.ErrorFactory("appCheck","AppCheck",XN),ZN=new Map,tA={activated:!1,tokenObservers:[]},eA={enabled:!1};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nA(t){return ZN.get(t)||tA}function rA(t,e){ZN.set(t,e)}function iA(){return eA}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var oA="https://content-firebaseappcheck.googleapis.com/v1beta",aA=3e4,sA=96e4,uA=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return HN.__awaiter(this,void 0,void 0,(function(){var e;return HN.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new zN.Deferred,[4,cA(this.getNextRun(t))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new zN.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function cA(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function lA(){return self.grecaptcha}function hA(t){if(!nA(t).activated)throw JN.create("use-before-activation",{appName:t.name})}function fA(t){return zN.base64.encodeString(JSON.stringify(t),!1)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pA(t,e){var n=t.url,r=t.body;return HN.__awaiter(this,void 0,void 0,(function(){var t,i,o,a,s,u,c,l,h,f;return HN.__generator(this,(function(p){switch(p.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:t},p.label=1;case 1:return p.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=p.sent(),[3,4];case 3:throw s=p.sent(),JN.create("fetch-network-error",{originalErrorMessage:s.message});case 4:if(200!==a.status)throw JN.create("fetch-status-error",{httpStatus:a.status});p.label=5;case 5:return p.trys.push([5,7,,8]),[4,a.json()];case 6:return u=p.sent(),[3,8];case 7:throw c=p.sent(),JN.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(l=u.ttl.match(/^([\d.]+)(s)$/))||!l[2]||isNaN(Number(l[1])))throw JN.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return h=1e3*Number(l[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f}]}}))}))}function dA(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:oA+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:e}}}function vA(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:oA+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:e}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gA="firebase-app-check-store",mA="debug-token",yA=null;function bA(){return yA||(yA=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(JN.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;if(0===t.oldVersion)e.createObjectStore(gA,{keyPath:"compositeKey"})}}catch(t){e(JN.create("storage-open",{originalErrorMessage:t.message}))}})),yA)}function _A(t){return IA(TA(t))}function wA(t,e){return HN.__awaiter(this,void 0,void 0,(function(){var n,r,i,o;return HN.__generator(this,(function(a){switch(a.label){case 0:return[4,bA()];case 1:return n=a.sent(),r=n.transaction(gA,"readwrite"),i=r.objectStore(gA),o=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){o.onsuccess=function(e){t()},r.onerror=function(t){var n;e(JN.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function IA(t){return HN.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return HN.__generator(this,(function(o){switch(o.label){case 0:return[4,bA()];case 1:return e=o.sent(),n=e.transaction(gA,"readonly"),r=n.objectStore(gA),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(JN.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function TA(t){return t.options.appId+"-"+t.name}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var EA=new GN.Logger("@firebase/app-check");
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function SA(t,e){return zN.isIndexedDBAvailable()?function(t,e){return wA(TA(t),e)}(t,e).catch((function(t){EA.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function CA(){return HN.__awaiter(this,void 0,void 0,(function(){var t,e;return HN.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,IA(mA)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,wA(mA,r)).catch((function(t){return EA.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kA(){return HN.__awaiter(this,void 0,void 0,(function(){var t;return HN.__generator(this,(function(e){if((t=iA()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var NA={error:"UNKNOWN_ERROR"};function AA(t,e,n){return void 0===n&&(n=!1),HN.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return HN.__generator(this,(function(p){switch(p.label){case 0:return hA(t),r=nA(t),i=r.token,o=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(a=p.sent())&&DA(a)&&(i=a,rA(t,HN.__assign(HN.__assign({},r),{token:i})),xA(t,{token:i.token})),p.label=2;case 2:return!n&&i&&DA(i)?[2,{token:i.token}]:iA().enabled?(u=pA,c=vA,l=[t],[4,kA()]):[3,6];case 3:return[4,u.apply(void 0,[c.apply(void 0,l.concat([p.sent()])),e])];case 4:return s=p.sent(),[4,SA(t,s)];case 5:return p.sent(),rA(t,HN.__assign(HN.__assign({},r),{token:s})),[2,{token:s.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return h=p.sent(),EA.error(h),o=h,[3,9];case 9:return i?[3,10]:(f=function(t){return{token:fA(NA),error:t}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(o),[3,12]);case 10:return f={token:i.token},rA(t,HN.__assign(HN.__assign({},r),{token:i})),[4,SA(t,i)];case 11:p.sent(),p.label=12;case 12:return xA(t,f),[2,f]}}))}))}function PA(t,e,n,r,i){var o=nA(t),a={next:r,error:i,type:n},s=HN.__assign(HN.__assign({},o),{tokenObservers:HN.__spreadArray(HN.__spreadArray([],o.tokenObservers),[a])});if(!s.tokenRefresher){var u=function(t,e){var n=this;return new uA((function(){return HN.__awaiter(n,void 0,void 0,(function(){var n;return HN.__generator(this,(function(r){switch(r.label){case 0:return nA(t).token?[3,2]:[4,AA(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,AA(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=nA(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),aA,sA)}(t,e);s.tokenRefresher=u}if(!s.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&s.tokenRefresher.start(),o.token&&DA(o.token)){var c=o.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}else null==o.token&&o.cachedTokenPromise.then((function(t){t&&DA(t)&&r({token:t.token})})).catch((function(){}));rA(t,s)}function RA(t,e){var n=nA(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),rA(t,HN.__assign(HN.__assign({},n),{tokenObservers:r}))}function xA(t,e){for(var n=0,r=nA(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(t){}}}function DA(t){return t.expireTimeMillis-Date.now()>0}var OA="https://www.google.com/recaptcha/api.js";function LA(t,e){var n=nA(t),r=new zN.Deferred;rA(t,HN.__assign(HN.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a,s,u=lA();return u?u.ready((function(){FA(t,e,u,i),r.resolve(u)})):(a=function(){var n=lA();if(!n)throw new Error("no recaptcha");n.ready((function(){FA(t,e,n,i),r.resolve(n)}))},(s=document.createElement("script")).src=""+OA,s.onload=a,document.head.appendChild(s)),r.promise}function MA(t){return HN.__awaiter(this,void 0,void 0,(function(){var e;return HN.__generator(this,(function(n){switch(n.label){case 0:return hA(t),[4,nA(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=nA(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function FA(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),o=nA(t);rA(t,HN.__assign(HN.__assign({},o),{reCAPTCHAState:HN.__assign(HN.__assign({},o.reCAPTCHAState),{widgetId:i})}))}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var UA=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return HN.__awaiter(this,void 0,void 0,(function(){var t;return HN.__generator(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw JN.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,MA(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),JN.create("recaptcha-error");case 4:return[2,pA(dA(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,LA(t,this._siteKey).catch((function(){}))},t}(),jA=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return HN.__awaiter(this,void 0,void 0,(function(){var t,e,n;return HN.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw JN.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),e=zN.issuedAtTime(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,HN.__assign(HN.__assign({},t),{issuedAtTimeMillis:n})]}}))}))},t.prototype.initialize=function(t){this._app=t},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function qA(t,e,n,r){var i=nA(t);if(i.activated)throw JN.create("already-activated",{appName:t.name});var o=HN.__assign(HN.__assign({},i),{activated:!0});o.cachedTokenPromise=function(t){return HN.__awaiter(this,void 0,void 0,(function(){var e,n;return HN.__generator(this,(function(r){switch(r.label){case 0:if(!zN.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,_A(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),EA.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}(t).then((function(e){return e&&DA(e)&&rA(t,HN.__assign(HN.__assign({},nA(t)),{token:e})),e})),o.provider="string"==typeof e?new UA(e):e instanceof UA||e instanceof jA?e:new jA({getToken:e.getToken}),o.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,rA(t,o),o.provider.initialize(t,n)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function VA(t,e){return{app:t,activate:function(n,r){return qA(t,n,e,r)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=nA(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),rA(t,HN.__assign(HN.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return HN.__awaiter(this,void 0,void 0,(function(){var r;return HN.__generator(this,(function(i){switch(i.label){case 0:return[4,AA(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),PA(t,e,"EXTERNAL",o,a),function(){return RA(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=nA(t).tokenObservers;e<n.length;e++){var r=n[e];RA(t,r.next)}return Promise.resolve()}}}}var BA="app-check-internal";!function(t){t.INTERNAL.registerComponent(new WN.Component("appCheck",(function(t){return VA(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:UA,CustomProvider:jA}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider(BA).initialize()}))),t.INTERNAL.registerComponent(new WN.Component(BA,(function(t){return function(t,e){return{getToken:function(n){return AA(t,e,n)},addTokenListener:function(n){return PA(t,e,"INTERNAL",n)},removeTokenListener:function(e){return RA(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.2")}(YN.default),function(){var t=zN.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=iA();e.enabled=!0;var n=new zN.Deferred;e.token=n,"string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(CA())}}();var KA="8.10.0";
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
en.registerVersion("firebase",KA,"app"),en.SDK_VERSION=KA;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),en.registerVersion("firebase","8.10.0");const WA={apiKey:at,authDomain:"jsd13-first-firebase-app.firebaseapp.com",databaseURL:"https://jsd13-first-firebase-app-default-rtdb.firebaseio.com/",projectId:"jsd13-first-firebase-app",storageBucket:"jsd13-first-firebase-app.appspot.com",messagingSenderId:"112203651031",appId:"1:112203651031:web:172ab5f076ded1c5645d92"};en.initializeApp(WA);const HA=en.database();function zA(t,e,n){const r=t.slice();return r[15]=e[n],r}function GA(t,e,n){const r=t.slice();return r[18]=e[n],r}function $A(t){let e,n,r,i,o,c,f,p,d;return{c(){e=l("h3"),n=h("Save this string "),r=l("strong"),i=h('"'),o=h(t[4]),c=h('"'),f=h(" in case you want to\n      reference this session again! You can do so by clicking\n      "),p=l("strong"),p.textContent="Search",d=h("! Cheers 🍻!"),v(e,"class","firebase-string svelte-ux8hjz")},m(t,u){s(t,e,u),a(e,n),a(e,r),a(r,i),a(r,o),a(r,c),a(e,f),a(e,p),a(e,d)},p(t,e){16&e&&m(o,t[4])},d(t){t&&u(e)}}}function QA(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=JA(zA(t,n,e));return{c(){e=l("div");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){s(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(1&i){let o;for(n=t[0],o=0;o<n.length;o+=1){const a=zA(t,n,o);r[o]?r[o].p(a,i):(r[o]=JA(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&u(e),c(r,t)}}}function YA(t){let e,n,i,o,c,h,m,b,_,w,I;return{c(){e=l("div"),n=l("form"),i=l("h4"),i.textContent="One last step, please enter the sales tax and tip",o=f(),c=l("input"),h=f(),m=l("input"),b=f(),_=l("button"),_.textContent="Calculate",v(c,"type","number"),v(c,"min","0"),v(c,"placeholder","Sales Tax Amount"),v(m,"type","number"),v(m,"min","0"),v(m,"placeholder","Tip Amount")},m(r,u){s(r,e,u),a(e,n),a(n,i),a(n,o),a(n,c),y(c,t[1]),a(n,h),a(n,m),y(m,t[2]),a(n,b),a(n,_),w||(I=[p(c,"input",t[7]),p(m,"input",t[8]),p(n,"submit",d(t[5]),{once:!0})],w=!0)},p(t,e){2&e&&g(c.value)!==t[1]&&y(c,t[1]),4&e&&g(m.value)!==t[2]&&y(m,t[2])},d(t){t&&u(e),w=!1,r(I)}}}function XA(t){let e,n,r,i,o,c,p,d,v=t[18][2].toFixed(2)+"",g=t[18][1]+"",y=t[18][0]+"",b=(t[18][1]*t[18][2]).toFixed(2)+"";return{c(){e=l("p"),n=h(v),r=h(", $"),i=h(g),o=f(),c=h(y),p=h(" | Item Amount (w/ Quantity): $"),d=h(b)},m(t,u){s(t,e,u),a(e,n),a(e,r),a(e,i),a(e,o),a(e,c),a(e,p),a(e,d)},p(t,e){1&e&&v!==(v=t[18][2].toFixed(2)+"")&&m(n,v),1&e&&g!==(g=t[18][1]+"")&&m(i,g),1&e&&y!==(y=t[18][0]+"")&&m(c,y),1&e&&b!==(b=(t[18][1]*t[18][2]).toFixed(2)+"")&&m(d,b)},d(t){t&&u(e)}}}function JA(t){let e,n,r,i,o,p,d,g,y,b,_,w,I,T,E,S,C,k,N,A,P,R,x,D,O=t[15].name+"",L=(t[15].total-(t[15].percentageOfTip+t[15].percentageOfSalesTax)).toFixed(2)+"",M=t[15].percentageOfSalesTax.toFixed(2)+"",F=t[15].percentageOfTip.toFixed(2)+"",U=t[15].total.toFixed(2)+"",j=t[15].itemsOrdered,q=[];for(let e=0;e<j.length;e+=1)q[e]=XA(GA(t,j,e));return{c(){e=l("div"),n=l("h2"),r=h(O),i=f(),o=l("h4"),o.textContent="Summary:",p=f();for(let t=0;t<q.length;t+=1)q[t].c();d=f(),g=l("p"),y=h("Subtotal = $"),b=h(L),_=f(),w=l("p"),I=h("Percentage of Sales Tax = $"),T=h(M),E=f(),S=l("p"),C=h("Percentage of Tip = $"),k=h(F),N=f(),A=l("p"),P=l("strong"),R=h("Total Amount = $"),x=h(U),D=f(),v(e,"class","person-card svelte-ux8hjz")},m(t,u){s(t,e,u),a(e,n),a(n,r),a(e,i),a(e,o),a(e,p);for(let t=0;t<q.length;t+=1)q[t].m(e,null);a(e,d),a(e,g),a(g,y),a(g,b),a(e,_),a(e,w),a(w,I),a(w,T),a(e,E),a(e,S),a(S,C),a(S,k),a(e,N),a(e,A),a(A,P),a(P,R),a(P,x),a(e,D)},p(t,n){if(1&n&&O!==(O=t[15].name+"")&&m(r,O),1&n){let r;for(j=t[15].itemsOrdered,r=0;r<j.length;r+=1){const i=GA(t,j,r);q[r]?q[r].p(i,n):(q[r]=XA(i),q[r].c(),q[r].m(e,d))}for(;r<q.length;r+=1)q[r].d(1);q.length=j.length}1&n&&L!==(L=(t[15].total-(t[15].percentageOfTip+t[15].percentageOfSalesTax)).toFixed(2)+"")&&m(b,L),1&n&&M!==(M=t[15].percentageOfSalesTax.toFixed(2)+"")&&m(T,M),1&n&&F!==(F=t[15].percentageOfTip.toFixed(2)+"")&&m(k,F),1&n&&U!==(U=t[15].total.toFixed(2)+"")&&m(x,U)},d(t){t&&u(e),c(q,t)}}}function ZA(e){let n,r,i=e[4]&&$A(e);function o(t,e){return!1===t[3]?YA:QA}let c=o(e),h=c(e);return{c(){n=l("div"),i&&i.c(),r=f(),h.c(),v(n,"class","show-results svelte-ux8hjz")},m(t,e){s(t,n,e),i&&i.m(n,null),a(n,r),h.m(n,null)},p(t,[e]){t[4]?i?i.p(t,e):(i=$A(t),i.c(),i.m(n,r)):i&&(i.d(1),i=null),c===(c=o(t))&&h?h.p(t,e):(h.d(1),h=c(t),h&&(h.c(),h.m(n,null)))},i:t,o:t,d(t){t&&u(n),i&&i.d(),h.d()}}}function tP(t,e,n){let r,i,o,{itemsArray:a}=e,{people:s}=e,u=!1;let c=0;let l;return t.$$set=t=>{"itemsArray"in t&&n(6,a=t.itemsArray),"people"in t&&n(0,s=t.people)},[s,r,i,u,l,()=>{n(3,u=!0),s.forEach((t=>{let e=t.id;a.forEach((n=>{n.peopleWhoAteIDs.forEach((r=>{e===r[0]&&(t.total+=parseFloat(n.itemAmount)*n.quantity/n.peopleWhoAteIDs.length,t.itemsOrdered.push([n.itemName,n.itemAmount,n.quantity.toFixed(3)/n.peopleWhoAteIDs.length]))}))}))})),console.log(s),a.forEach((t=>{c+=parseFloat(t.itemAmount)*t.quantity})),console.log(c),s.forEach((t=>{t.percentageOfTotal=t.total/c,t.percentageOfSalesTax=t.percentageOfTotal*r,t.percentageOfTip=t.percentageOfTotal*i,t.total+=t.percentageOfTip+t.percentageOfSalesTax,console.log(t)})),o=c+i+r,((t,e,r,i,o)=>{HA.ref("finished-results").push({people:t,itemsArray:e,subtotal:r,salesTax:i,tip:o}).then((t=>{n(4,l=t._delegate._path.pieces_[1]),console.log(t),console.log(l)})).catch((t=>{console.log(t)}))})(s,a,c,r,i),console.log(o)},a,function(){r=g(this.value),n(1,r)},function(){i=g(this.value),n(2,i)}]}class eP extends K{constructor(t){super(),B(this,t,tP,ZA,o,{itemsArray:6,people:0})}}function nP(t,e,n){const r=t.slice();return r[10]=e[n],r}function rP(t,e,n){const r=t.slice();return r[13]=e[n],r}function iP(t){let e;return{c(){e=l("p"),e.textContent="No result found..."},m(t,n){s(t,e,n)},d(t){t&&u(e)}}}function oP(t){let e,n=t[2],r=[];for(let e=0;e<n.length;e+=1)r[e]=sP(nP(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=h("")},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);s(t,e,n)},p(t,i){if(4&i){let o;for(n=t[2],o=0;o<n.length;o+=1){const a=nP(t,n,o);r[o]?r[o].p(a,i):(r[o]=sP(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){c(r,t),t&&u(e)}}}function aP(t){let e,n,r,i,o,c,p,d,v=t[13][2].toFixed(2)+"",g=t[13][1]+"",y=t[13][0]+"",b=(t[13][1]*t[13][2]).toFixed(2)+"";return{c(){e=l("p"),n=h(v),r=h(", $"),i=h(g),o=f(),c=h(y),p=h(" | Item Amount (w/ Quantity): $"),d=h(b)},m(t,u){s(t,e,u),a(e,n),a(e,r),a(e,i),a(e,o),a(e,c),a(e,p),a(e,d)},p(t,e){4&e&&v!==(v=t[13][2].toFixed(2)+"")&&m(n,v),4&e&&g!==(g=t[13][1]+"")&&m(i,g),4&e&&y!==(y=t[13][0]+"")&&m(c,y),4&e&&b!==(b=(t[13][1]*t[13][2]).toFixed(2)+"")&&m(d,b)},d(t){t&&u(e)}}}function sP(t){let e,n,r,i,o,p,d,g,y,b,_,w,I,T,E,S,C,k,N,A,P,R,x,D,O=t[10].name+"",L=(t[10].total-(t[10].percentageOfTip+t[10].percentageOfSalesTax)).toFixed(2)+"",M=t[10].percentageOfSalesTax.toFixed(2)+"",F=t[10].percentageOfTip.toFixed(2)+"",U=t[10].total.toFixed(2)+"",j=t[10].itemsOrdered,q=[];for(let e=0;e<j.length;e+=1)q[e]=aP(rP(t,j,e));return{c(){e=l("div"),n=l("h2"),r=h(O),i=f(),o=l("h4"),o.textContent="Summary:",p=f();for(let t=0;t<q.length;t+=1)q[t].c();d=f(),g=l("p"),y=h("Subtotal = $"),b=h(L),_=f(),w=l("p"),I=h("Percentage of Sales Tax = $"),T=h(M),E=f(),S=l("p"),C=h("Percentage of Tip = $"),k=h(F),N=f(),A=l("p"),P=l("strong"),R=h("Total Amount = $"),x=h(U),D=f(),v(e,"class","person-card svelte-ve2hvx")},m(t,u){s(t,e,u),a(e,n),a(n,r),a(e,i),a(e,o),a(e,p);for(let t=0;t<q.length;t+=1)q[t].m(e,null);a(e,d),a(e,g),a(g,y),a(g,b),a(e,_),a(e,w),a(w,I),a(w,T),a(e,E),a(e,S),a(S,C),a(S,k),a(e,N),a(e,A),a(A,P),a(P,R),a(P,x),a(e,D)},p(t,n){if(4&n&&O!==(O=t[10].name+"")&&m(r,O),4&n){let r;for(j=t[10].itemsOrdered,r=0;r<j.length;r+=1){const i=rP(t,j,r);q[r]?q[r].p(i,n):(q[r]=aP(i),q[r].c(),q[r].m(e,d))}for(;r<q.length;r+=1)q[r].d(1);q.length=j.length}4&n&&L!==(L=(t[10].total-(t[10].percentageOfTip+t[10].percentageOfSalesTax)).toFixed(2)+"")&&m(b,L),4&n&&M!==(M=t[10].percentageOfSalesTax.toFixed(2)+"")&&m(T,M),4&n&&F!==(F=t[10].percentageOfTip.toFixed(2)+"")&&m(k,F),4&n&&U!==(U=t[10].total.toFixed(2)+"")&&m(x,U)},d(t){t&&u(e),c(q,t)}}}function uP(e){let n,o,c,h,d,g,m,b,_,w=null===e[3]&&iP(),I=!0===e[1]&&oP(e);return{c(){n=l("div"),o=l("input"),c=f(),h=l("button"),h.textContent="Submit",d=f(),w&&w.c(),g=f(),m=l("div"),I&&I.c(),v(o,"type","text"),v(n,"class","show-results svelte-ve2hvx")},m(t,r){s(t,n,r),a(n,o),y(o,e[0]),a(n,c),a(n,h),a(n,d),w&&w.m(n,null),a(n,g),a(n,m),I&&I.m(m,null),b||(_=[p(o,"input",e[5]),p(h,"click",(function(){i(e[4](e[0]))&&e[4](e[0]).apply(this,arguments)}),{once:!0})],b=!0)},p(t,[r]){e=t,1&r&&o.value!==e[0]&&y(o,e[0]),null===e[3]?w||(w=iP(),w.c(),w.m(n,g)):w&&(w.d(1),w=null),!0===e[1]?I?I.p(e,r):(I=oP(e),I.c(),I.m(m,null)):I&&(I.d(1),I=null)},i:t,o:t,d(t){t&&u(n),w&&w.d(),I&&I.d(),b=!1,r(_)}}}function cP(t,e,n){let r,i,o,a=!1;return[r,a,i,o,t=>{HA.ref(`finished-results/${t}`).get().then((t=>{n(3,o=t.val()),o?(n(1,a=!0),n(2,i=o.people)):console.log("no item found")})).catch((t=>{console.log(t)}))},function(){r=this.value,n(0,r)}]}class lP extends K{constructor(t){super(),B(this,t,cP,uP,o,{})}}function hP(e){let n;return{c(){n=l("footer"),n.innerHTML='<div class="copyright svelte-6xwcu5">Copyright 2021 @mlichtenberger</div>',v(n,"class","svelte-6xwcu5")},m(t,e){s(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}class fP extends K{constructor(t){super(),B(this,t,null,hP,o,{})}}function pP(e){let n;return{c(){n=l("header"),n.innerHTML='<h1 class="svelte-1qpfx6u">Checkbreaker App</h1>',v(n,"class","svelte-1qpfx6u")},m(t,e){s(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}class dP extends K{constructor(t){super(),B(this,t,null,pP,o,{})}}function vP(t,e,n){const r=t.slice();return r[2]=e[n],r}function gP(t){let e,n,r,i,o=t[2]+"";return{c(){e=l("li"),n=l("div"),r=h(o),i=f(),v(n,"class","svelte-5x3czw"),b(n,"active",t[2]===t[1]),v(e,"class","svelte-5x3czw")},m(t,o){s(t,e,o),a(e,n),a(n,r),a(e,i)},p(t,e){1&e&&o!==(o=t[2]+"")&&m(r,o),3&e&&b(n,"active",t[2]===t[1])},d(t){t&&u(e)}}}function mP(e){let n,r,i=e[0],o=[];for(let t=0;t<i.length;t+=1)o[t]=gP(vP(e,i,t));return{c(){n=l("div"),r=l("ul");for(let t=0;t<o.length;t+=1)o[t].c();v(r,"class","svelte-5x3czw"),v(n,"class","tabs svelte-5x3czw")},m(t,e){s(t,n,e),a(n,r);for(let t=0;t<o.length;t+=1)o[t].m(r,null)},p(t,[e]){if(3&e){let n;for(i=t[0],n=0;n<i.length;n+=1){const a=vP(t,i,n);o[n]?o[n].p(a,e):(o[n]=gP(a),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},i:t,o:t,d(t){t&&u(n),c(o,t)}}}function yP(t,e,n){let{items:r}=e,{activeItem:i}=e;return t.$$set=t=>{"items"in t&&n(0,r=t.items),"activeItem"in t&&n(1,i=t.activeItem)},[r,i]}class bP extends K{constructor(t){super(),B(this,t,yP,mP,o,{items:0,activeItem:1})}}function _P(e){let n,r;return n=new lP({}),{c(){U(n.$$.fragment)},m(t,e){j(n,t,e),r=!0},p:t,i(t){r||(M(n.$$.fragment,t),r=!0)},o(t){F(n.$$.fragment,t),r=!1},d(t){q(n,t)}}}function wP(t){let e,n;return e=new eP({props:{itemsArray:t[3],people:t[1]}}),{c(){U(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.itemsArray=t[3]),2&n&&(r.people=t[1]),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function IP(t){let e,n;return e=new it({props:{people:t[1],receiptInfo:t[2]}}),e.$on("gotItemsArray",t[7]),{c(){U(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.people=t[1]),4&n&&(r.receiptInfo=t[2]),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function TP(e){let n,r;return n=new ht({}),n.$on("gotReceiptInfo",e[6]),{c(){U(n.$$.fragment)},m(t,e){j(n,t,e),r=!0},p:t,i(t){r||(M(n.$$.fragment,t),r=!0)},o(t){F(n.$$.fragment,t),r=!1},d(t){q(n,t)}}}function EP(e){let n,r;return n=new Q({}),n.$on("gotPeopleObject",e[5]),n.$on("searchPastSessions",e[8]),{c(){U(n.$$.fragment)},m(t,e){j(n,t,e),r=!0},p:t,i(t){r||(M(n.$$.fragment,t),r=!0)},o(t){F(n.$$.fragment,t),r=!1},d(t){q(n,t)}}}function SP(t){let e,n,i,o,c,h,p,d,v,g;n=new dP({}),o=new bP({props:{activeItem:t[0],items:t[4]}});const m=[EP,TP,IP,wP,_P],y=[];function b(t,e){return"Add People"===t[0]?0:"Scan Receipt"===t[0]?1:"Add Items"===t[0]?2:"Results"===t[0]?3:"Search Past Sessions"===t[0]?4:-1}return~(h=b(t))&&(p=y[h]=m[h](t)),v=new fP({}),{c(){e=l("main"),U(n.$$.fragment),i=f(),U(o.$$.fragment),c=f(),p&&p.c(),d=f(),U(v.$$.fragment)},m(t,r){s(t,e,r),j(n,e,null),a(e,i),j(o,e,null),a(e,c),~h&&y[h].m(e,null),a(e,d),j(v,e,null),g=!0},p(t,[n]){const i={};1&n&&(i.activeItem=t[0]),o.$set(i);let a=h;h=b(t),h===a?~h&&y[h].p(t,n):(p&&(L={r:0,c:[],p:L},F(y[a],1,1,(()=>{y[a]=null})),L.r||r(L.c),L=L.p),~h?(p=y[h],p?p.p(t,n):(p=y[h]=m[h](t),p.c()),M(p,1),p.m(e,d)):p=null)},i(t){g||(M(n.$$.fragment,t),M(o.$$.fragment,t),M(p),M(v.$$.fragment,t),g=!0)},o(t){F(n.$$.fragment,t),F(o.$$.fragment,t),F(p),F(v.$$.fragment,t),g=!1},d(t){t&&u(e),q(n),q(o),~h&&y[h].d(),q(v)}}}function CP(t,e,n){let r="Add People",i=[],o=[],a=[];return[r,i,o,a,["Add People","Scan Receipt","Add Items","Results","Search Past Sessions"],t=>(n(1,i=t.detail),n(0,r="Scan Receipt"),i),t=>(n(2,o=t.detail),n(0,r="Add Items"),o),t=>(n(3,a=t.detail),n(0,r="Results"),a),()=>{n(0,r="Search Past Sessions")}]}return new class extends K{constructor(t){super(),B(this,t,CP,SP,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
